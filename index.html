<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="wujiahaocoder">
    <meta name="license" content="CC BY-NC-ND 4.0">
    <!-- æˆ–è€…ä½¿ç”¨æ›´è¯¦ç»†çš„æè¿° -->
    <meta name="copyright" content="Copyright (c) 2025-2026 wujiahaocoder">
    <title>AFOï¼šç»“æŸï¼Ÿå¼€å§‹ï¼Ÿ</title>
    <style>
        /* ==================== å…¨å±€æ ·å¼ ==================== */
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --purple: #9b59b6;
            --pink: #e91e63;
            --cyan: #00bcd4;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --bg: #1a1a2e;
            --card-bg: rgba(255, 255, 255, 0.08);
            --border: rgba(255, 255, 255, 0.15);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --glass: blur(15px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', 'HarmonyOS Sans', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--bg), #0f0c29, #302b63, #24243e);
            color: var(--light);
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
            position: relative;
        }

            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle at 10% 20%, rgba(52, 152, 219, 0.1) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(46, 204, 113, 0.1) 0%, transparent 20%);
                pointer-events: none;
                z-index: -1;
            }

        /* ==================== å¸ƒå±€ç³»ç»Ÿ ==================== */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr 320px;
            gap: 15px;
            grid-template-areas:
                "header header header"
                "stats main events"
                "schedule actions achievements"
                "footer footer footer";
        }

        /* ==================== å¤´éƒ¨ ==================== */
        header {
            grid-area: header;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

            header::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.5s;
            }

            header:hover::before {
                left: 100%;
            }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.85;
            margin-bottom: 10px;
            font-style: italic;
        }

        .license-info {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 8px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

            .license-info a {
                color: var(--light);
                text-decoration: none;
                border-bottom: 1px dotted var(--border);
            }

                .license-info a:hover {
                    opacity: 1;
                    border-bottom-color: var(--primary);
                }

        /* ==================== ç»Ÿè®¡é¢æ¿ ==================== */
        .stats {
            grid-area: stats;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 650px;
            overflow-y: auto;
        }

        .stat-section-title {
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--primary);
            margin-top: 10px;
            margin-bottom: 5px;
            padding-bottom: 3px;
            border-bottom: 1px solid var(--border);
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            position: relative;
        }

            .stat-card:hover {
                transform: translateX(5px);
                background: rgba(0, 0, 0, 0.3);
            }

            .stat-card h3 {
                font-size: 0.9rem;
                margin-bottom: 6px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

        .stat-value {
            font-weight: bold;
            color: var(--secondary);
            font-size: 0.95rem;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 4px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

            .progress-fill::after {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                animation: shimmer 2s infinite;
            }

        @keyframes shimmer {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .progress-fill.energy {
            background: var(--secondary);
        }

        .progress-fill.stress {
            background: var(--danger);
        }

        .progress-fill.health {
            background: var(--warning);
        }

        .progress-fill.relationship {
            background: var(--purple);
        }

        .progress-fill.economy {
            background: var(--cyan);
        }

        .progress-fill.mental {
            background: var(--pink);
        }

        .relationship-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 4px;
        }

        .relationship-fill {
            height: 100%;
            background: var(--purple);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* ==================== ä¸»åŒºåŸŸ ==================== */
        .main {
            grid-area: main;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 650px;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 8px;
        }

        .time-display {
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time-badge {
            background: rgba(52, 152, 219, 0.3);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .season-indicator {
            font-size: 1.2rem;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }

        .event-log {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 8px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .event-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 10px;
            border-radius: 6px;
            border-left: 3px solid var(--primary);
            animation: fadeIn 0.4s ease;
            font-size: 0.9rem;
            line-height: 1.35;
            position: relative;
        }

            .event-item::before {
                content: 'â€¢';
                position: absolute;
                left: -2px;
                color: var(--primary);
                font-weight: bold;
            }

            .event-item.good {
                border-left-color: var(--secondary);
                background: rgba(46, 204, 113, 0.15);
            }

            .event-item.bad {
                border-left-color: var(--danger);
                background: rgba(231, 76, 60, 0.15);
            }

            .event-item.neutral {
                border-left-color: var(--warning);
                background: rgba(243, 156, 18, 0.15);
            }

            .event-item.story {
                border-left-color: var(--purple);
                background: rgba(155, 89, 182, 0.2);
            }

            .event-item.important {
                border-left-color: var(--pink);
                background: rgba(233, 30, 99, 0.2);
                font-weight: bold;
            }

            .event-item .timestamp {
                font-size: 0.7rem;
                opacity: 0.6;
                margin-right: 6px;
                font-family: monospace;
            }

        /* ==================== è¯¾ç¨‹è¡¨ ==================== */
        .schedule {
            grid-area: schedule;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

            .schedule h3 {
                font-size: 1rem;
                margin-bottom: 10px;
                color: var(--cyan);
            }

        .schedule-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px;
            margin-bottom: 6px;
            border-radius: 6px;
            border-left: 3px solid var(--cyan);
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

            .schedule-item.completed {
                opacity: 0.5;
                text-decoration: line-through;
                border-left-color: var(--secondary);
            }

            .schedule-item.missed {
                border-left-color: var(--danger);
                background: rgba(231, 76, 60, 0.2);
            }

            .schedule-item .time {
                font-weight: bold;
                color: var(--cyan);
            }

        /* ==================== äº‹ä»¶åŒºåŸŸ ==================== */
        .events {
            grid-area: events;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 650px;
            overflow-y: auto;
        }

        .event-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            border-top: 3px solid var(--warning);
            transition: all 0.3s ease;
        }

            .event-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }

            .event-card h3 {
                font-size: 0.95rem;
                margin-bottom: 8px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .event-card p {
                font-size: 0.85rem;
                line-height: 1.4;
                opacity: 0.9;
            }

            .event-card.relationship {
                border-top-color: var(--purple);
            }

            .event-card.achievement {
                border-top-color: var(--secondary);
            }

            .event-card.economy {
                border-top-color: var(--cyan);
            }

            .event-card.mental {
                border-top-color: var(--pink);
            }

            .event-card .progress-bar {
                height: 6px;
                margin-top: 8px;
            }

        /* ==================== æ“ä½œåŒºåŸŸ ==================== */
        .actions {
            grid-area: actions;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .action-btn {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid var(--primary);
            color: var(--light);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            text-align: center;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

            .action-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.4s;
            }

            .action-btn:hover::before {
                left: 100%;
            }

            .action-btn:hover {
                background: rgba(52, 152, 219, 0.4);
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            }

            .action-btn:active {
                transform: translateY(0);
            }

            .action-btn.primary {
                background: rgba(46, 204, 113, 0.2);
                border-color: var(--secondary);
            }

                .action-btn.primary:hover {
                    background: rgba(46, 204, 113, 0.4);
                }

            .action-btn.danger {
                background: rgba(231, 76, 60, 0.2);
                border-color: var(--danger);
            }

                .action-btn.danger:hover {
                    background: rgba(231, 76, 60, 0.4);
                }

            .action-btn.warning {
                background: rgba(243, 156, 18, 0.2);
                border-color: var(--warning);
            }

            .action-btn.purple {
                background: rgba(155, 89, 182, 0.2);
                border-color: var(--purple);
            }

            .action-btn.cyan {
                background: rgba(0, 188, 212, 0.2);
                border-color: var(--cyan);
            }

            .action-btn:disabled {
                opacity: 0.4;
                cursor: not-allowed;
                transform: none !important;
            }

                .action-btn:disabled::before {
                    display: none;
                }

            .action-btn .hotkey {
                font-size: 0.7rem;
                opacity: 0.6;
                margin-left: 4px;
            }

        /* ==================== æˆå°±åŒºåŸŸ ==================== */
        .achievements {
            grid-area: achievements;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

            .achievements h3 {
                font-size: 1rem;
                margin-bottom: 5px;
                color: var(--secondary);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

        .achievement-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .achievement-badge {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid var(--secondary);
            padding: 5px 8px;
            border-radius: 15px;
            font-size: 0.75rem;
            opacity: 0.4;
            transition: all 0.3s ease;
            cursor: help;
            white-space: nowrap;
        }

            .achievement-badge.unlocked {
                opacity: 1;
                background: rgba(46, 204, 113, 0.4);
                box-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
                animation: popIn 0.3s ease;
            }

            .achievement-badge.hidden {
                background: rgba(255, 255, 255, 0.1);
                border-color: var(--border);
                color: transparent;
                cursor: default;
            }

                .achievement-badge.hidden.unlocked {
                    color: var(--light);
                    background: rgba(155, 89, 182, 0.4);
                    border-color: var(--purple);
                }

        @keyframes popIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ==================== é¡µè„š ==================== */
        .footer {
            grid-area: footer;
            background: var(--card-bg);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            opacity: 0.7;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

            .footer .save-status {
                color: var(--secondary);
                font-weight: bold;
            }

                .footer .save-status.error {
                    color: var(--danger);
                }

        /* ==================== æ¨¡æ€æ¡† ==================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #1a1a2e;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px) scale(0.95);
                opacity: 0;
            }

            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

            .modal-header h2 {
                font-size: 1.4rem;
                color: var(--primary);
                display: flex;
                align-items: center;
                gap: 8px;
            }

        .close-btn {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.8rem;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.2s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

            .close-btn:hover {
                opacity: 1;
                background: rgba(255, 255, 255, 0.1);
                transform: rotate(90deg);
            }

        .modal-body {
            line-height: 1.6;
        }

        .modal-footer {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* å­¦ä¹ æ¨¡æ€æ¡† */
        .study-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .study-btn {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid var(--primary);
            color: var(--light);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

            .study-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.4s;
            }

            .study-btn:hover::before {
                left: 100%;
            }

            .study-btn:hover {
                background: rgba(52, 152, 219, 0.4);
                transform: translateY(-2px);
            }

            .study-btn small {
                display: block;
                font-size: 0.75rem;
                opacity: 0.7;
                margin-top: 4px;
                font-weight: normal;
            }

            .study-btn.special {
                background: rgba(155, 89, 182, 0.2);
                border-color: var(--purple);
            }

                .study-btn.special:hover {
                    background: rgba(155, 89, 182, 0.4);
                }

            .study-btn:disabled {
                opacity: 0.4;
                cursor: not-allowed;
            }

        /* æ•…äº‹æ¨¡æ€æ¡† */
        .story-modal {
            background: linear-gradient(135deg, #1a1a2e, #2d1b3d);
        }

        .story-content {
            font-size: 1.05rem;
            line-height: 1.8;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid var(--purple);
            font-family: 'Georgia', serif;
        }

        .story-choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .story-choice-btn {
            background: rgba(155, 89, 182, 0.2);
            border: 1px solid var(--purple);
            color: var(--light);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 0.95rem;
            position: relative;
        }

            .story-choice-btn:hover {
                background: rgba(155, 89, 182, 0.4);
                transform: translateX(5px);
            }

        .choice-preview {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 5px;
            font-style: italic;
            color: var(--warning);
        }

        /* ç»“æŸç”»é¢ */
        .end-screen {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(155, 89, 182, 0.2));
            border-radius: 12px;
            border: 1px solid var(--border);
        }

            .end-screen h2 {
                font-size: 2.5rem;
                margin-bottom: 20px;
                background: linear-gradient(90deg, var(--secondary), var(--primary));
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }

            .end-screen .final-score {
                font-size: 3.5rem;
                font-weight: bold;
                margin: 15px 0;
                color: var(--secondary);
                text-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
            }

            .end-screen .ending-text {
                font-size: 1.1rem;
                line-height: 1.8;
                margin: 20px 0;
                opacity: 0.9;
                font-family: 'Georgia', serif;
            }

            .end-screen .stats-summary {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 10px;
                margin: 20px 0;
                font-size: 0.9rem;
            }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--border);
        }

            .stat-box .label {
                font-size: 0.75rem;
                opacity: 0.7;
            }

            .stat-box .value {
                font-size: 1.2rem;
                font-weight: bold;
                color: var(--secondary);
            }

        .restart-btn {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

            .restart-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            }

        /* ==================== é€šçŸ¥ç³»ç»Ÿ ==================== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px 20px;
            max-width: 380px;
            z-index: 200;
            transform: translateX(120%);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            font-size: 0.95rem;
            line-height: 1.4;
        }

            .notification.show {
                transform: translateX(0);
            }

            .notification.good {
                border-left: 4px solid var(--secondary);
            }

            .notification.bad {
                border-left: 4px solid var(--danger);
            }

            .notification.neutral {
                border-left: 4px solid var(--warning);
            }

            .notification.story {
                border-left: 4px solid var(--purple);
            }

            .notification.important {
                border-left: 4px solid var(--pink);
            }

        /* ==================== å·¥å…·æç¤º ==================== */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted var(--light);
        }

            .tooltip .tooltiptext {
                visibility: hidden;
                width: 240px;
                background-color: rgba(0, 0, 0, 0.95);
                color: #fff;
                text-align: center;
                border-radius: 6px;
                padding: 10px;
                position: absolute;
                z-index: 1;
                bottom: 125%;
                left: 50%;
                margin-left: -120px;
                opacity: 0;
                transition: opacity 0.3s;
                font-size: 0.85rem;
                line-height: 1.4;
                border: 1px solid var(--border);
            }

            .tooltip:hover .tooltiptext {
                visibility: visible;
                opacity: 1;
            }

        /* ==================== åŠ¨ç”» ==================== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* ==================== æ»šåŠ¨æ¡ ==================== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

            ::-webkit-scrollbar-thumb:hover {
                background: rgba(255, 255, 255, 0.3);
            }

        /* ==================== å“åº”å¼è®¾è®¡ ==================== */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr 1fr;
                grid-template-areas:
                    "header header"
                    "stats main"
                    "events events"
                    "schedule actions"
                    "achievements achievements"
                    "footer footer";
            }
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "header"
                    "stats"
                    "main"
                    "events"
                    "schedule"
                    "actions"
                    "achievements"
                    "footer";
            }

            h1 {
                font-size: 1.8rem;
            }

            .study-options {
                grid-template-columns: 1fr;
            }

            .actions {
                grid-template-columns: 1fr;
            }

            .notification {
                max-width: 90%;
                right: 5%;
            }
        }

        /* ==================== ç‰¹æ®ŠçŠ¶æ€æŒ‡ç¤ºå™¨ ==================== */
        .status-indicator {
            display: inline-block;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 6px;
            border: 1px solid currentColor;
        }

        .status-good {
            background: rgba(46, 204, 113, 0.3);
            color: var(--secondary);
        }

        .status-bad {
            background: rgba(231, 76, 60, 0.3);
            color: var(--danger);
        }

        .status-normal {
            background: rgba(52, 152, 219, 0.3);
            color: var(--primary);
        }

        /* ==================== å¿«æ·é”®æç¤º ==================== */
        .hotkey-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 50;
        }

            .hotkey-hint.show {
                opacity: 1;
            }

            .hotkey-hint kbd {
                background: rgba(255, 255, 255, 0.2);
                padding: 2px 6px;
                border-radius: 4px;
                font-family: monospace;
                margin: 0 2px;
            }

        /* ==================== æ“ä½œè®¡æ•°å™¨ ==================== */
        .action-counter {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
            z-index: 50;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }

            .action-counter.warning {
                border-color: var(--warning);
                color: var(--warning);
            }

            .action-counter.danger {
                border-color: var(--danger);
                color: var(--danger);
                animation: pulse 1s infinite;
            }

        /* ==================== å¯åŠ¨å¼¹çª—ï¼ˆæåŠ©ï¼‰ ==================== */
        .donation-modal {
            background: linear-gradient(135deg, #1a1a2e, #2d1b3d);
        }

        .donation-content {
            text-align: center;
            padding: 20px;
        }

            .donation-content h3 {
                color: var(--primary);
                margin-bottom: 15px;
                font-size: 1.3rem;
            }

            .donation-content p {
                margin-bottom: 15px;
                line-height: 1.6;
                opacity: 0.9;
            }

        .donation-qr {
            width: 200px;
            height: 200px;
            margin: 15px auto;
            border: 2px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }

            .donation-qr img {
                width: 100%;
                height: 100%;
                object-fit: contain;
            }

        .donation-link {
            display: inline-block;
            margin-top: 10px;
            color: var(--cyan);
            text-decoration: none;
            font-size: 0.9rem;
            border-bottom: 1px dotted var(--cyan);
        }

            .donation-link:hover {
                opacity: 0.8;
            }

        .donation-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .donation-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

            .donation-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: translateY(-2px);
            }

            .donation-btn.primary {
                background: var(--primary);
                border-color: var(--primary);
            }

                .donation-btn.primary:hover {
                    background: #2980b9;
                }

        /* ==================== é˜¶æ®µç›®æ ‡å¼¹çª— ==================== */
        .goal-modal {
            background: linear-gradient(135deg, #1a1a2e, #2d1b3d);
        }

        .goal-content {
            padding: 15px;
        }

        .goal-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--warning);
        }

            .goal-item.achieved {
                border-left-color: var(--secondary);
                background: rgba(46, 204, 113, 0.15);
            }

            .goal-item.failed {
                border-left-color: var(--danger);
                background: rgba(231, 76, 60, 0.15);
            }

            .goal-item h4 {
                margin-bottom: 5px;
                font-size: 1rem;
            }

            .goal-item p {
                font-size: 0.85rem;
                opacity: 0.8;
                margin-bottom: 5px;
            }

        .goal-progress {
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 5px;
        }

            .goal-progress.achieved {
                color: var(--secondary);
            }

            .goal-progress.failed {
                color: var(--danger);
            }

        /* ==================== æˆå°±è¯¦æƒ…å¼¹çª— ==================== */
        .achievement-detail-modal {
            background: linear-gradient(135deg, #1a1a2e, #2d1b3d);
        }

        .achievement-detail-content {
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .achievement-detail-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            border-left: 3px solid var(--secondary);
            font-size: 0.9rem;
        }

            .achievement-detail-item.hidden {
                border-left-color: var(--purple);
                opacity: 0.6;
            }

            .achievement-detail-item .name {
                font-weight: bold;
                color: var(--secondary);
            }

            .achievement-detail-item.hidden .name {
                color: var(--purple);
            }

            .achievement-detail-item .desc {
                font-size: 0.8rem;
                opacity: 0.8;
            }
    </style>
</head>

<body>
    <!-- æ“ä½œè®¡æ•°å™¨ -->
    <div class="action-counter" id="actionCounter">
        æœ¬å‘¨æ“ä½œ: 0/3
    </div>

    <!-- å¿«æ·é”®æç¤º -->
    <div class="hotkey-hint" id="hotkeyHint">
        å¿«æ·é”®: 1å­¦ä¹  2ä¼‘æ¯ 3é”»ç‚¼ 4ç¤¾äº¤ 5å›å¿† 6æ¨¡è€ƒ 7ä½œä¸š 8æ´»åŠ¨ 9ç»æµ 0ç»“æŸ
    </div>

    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header>
            <h1>AFOï¼šç»“æŸï¼Ÿå¼€å§‹ï¼Ÿ</h1>
            <div class="subtitle">"ä»ä»£ç åˆ°è€ƒå·ï¼Œè¿™æ˜¯ä¸€åœºå…³äºæˆé•¿ä¸æ•‘èµçš„å²è¯—æ—…ç¨‹"</div>
            <div class="license-info">
                <span>
                    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode.zh-Hans" target="_blank"
                       style="color: rgb(196, 196, 196)">
                        CC
                        BY-NC-ND 4.0
                    </a>
                </span>
                <span>ä½œè€…: wujiahaocoder</span>
                <a href="https://github.com/wujiahaocoder/AFO-Simulator" target="_blank">GitHub</a>
                <span>v1.2.3</span>
            </div>
            <div id="game-status" style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">å‡†å¤‡å¼€å§‹ä½ çš„æ–‡åŒ–è¯¾ä¹‹æ—…...</div>
        </header>

        <!-- ç»Ÿè®¡é¢æ¿ -->
        <div class="stats">
            <div class="stat-section-title">ğŸ“Š æ ¸å¿ƒçŠ¶æ€</div>
            <div class="stat-card">
                <h3>ç²¾åŠ›å€¼ <span class="stat-value" id="energy-value">80/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill energy" id="energy-bar" style="width: 80%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>å‹åŠ›å€¼ <span class="stat-value" id="stress-value">20/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill stress" id="stress-bar" style="width: 20%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>å¥åº·å€¼ <span class="stat-value" id="health-value">85/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill health" id="health-bar" style="width: 85%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>å¿ƒç†å€¼ <span class="stat-value" id="mental-value">75/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill mental" id="mental-bar" style="width: 75%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>ç»æµå€¼ <span class="stat-value" id="money-value">500å…ƒ</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill economy" id="money-bar" style="width: 50%"></div>
                </div>
            </div>

            <div class="stat-section-title">ğŸ“š å­¦ç§‘èƒ½åŠ›</div>
            <div class="stat-card">
                <h3>è¯­æ–‡ <span class="stat-value" id="chinese-value">10/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="chinese-bar" style="width: 10%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>æ•°å­¦ <span class="stat-value" id="math-value">15/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="math-bar" style="width: 15%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>è‹±è¯­ <span class="stat-value" id="english-value">8/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="english-bar" style="width: 8%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>ç‰©ç† <span class="stat-value" id="physics-value">20/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="physics-bar" style="width: 20%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>åŒ–å­¦ <span class="stat-value" id="chemistry-value">12/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="chemistry-bar" style="width: 12%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>ç”Ÿç‰© <span class="stat-value" id="biology-value">10/100</span></h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="biology-bar" style="width: 10%"></div>
                </div>
            </div>

            <div class="stat-section-title">ğŸ‘¥ äººé™…å…³ç³»</div>
            <div class="stat-card">
                <h3>ç­ä¸»ä»» <span class="stat-value" id="teacher-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="teacher-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>æ•°å­¦è€å¸ˆ <span class="stat-value" id="math-teacher-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="math-teacher-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>è¯­æ–‡è€å¸ˆ <span class="stat-value" id="chinese-teacher-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="chinese-teacher-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>è‹±è¯­è€å¸ˆ <span class="stat-value" id="english-teacher-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="english-teacher-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>åŒå­¦A <span class="stat-value" id="classmate-a-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="classmate-a-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>åŒå­¦B <span class="stat-value" id="classmate-b-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="classmate-b-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>çˆ¶æ¯ <span class="stat-value" id="parents-value">50</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="parents-bar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>æš—æ‹å¯¹è±¡ <span class="stat-value" id="crush-value">0</span></h3>
                <div class="relationship-bar">
                    <div class="relationship-fill" id="crush-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- ä¸»åŒºåŸŸ -->
        <div class="main">
            <div class="time-info">
                <div class="time-display">
                    <span class="time-badge">ç¬¬ <span id="week">1</span> å‘¨</span>
                    <span class="time-badge" id="day">å‘¨ä¸€</span>
                    <span class="time-badge" id="period">æ—©æ™¨</span>
                </div>
                <div class="season-indicator" id="season">ğŸŒ¸ æ˜¥å­£</div>
            </div>
            <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">
                è·ç¦»é«˜è€ƒ: <span id="days-left">365</span> å¤© |
                å‰©ä½™å‡æœŸ: <span id="vacation-days">0</span> å¤©
            </div>
            <div class="event-log" id="event-log">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- è¯¾ç¨‹è¡¨ -->
        <div class="schedule">
            <h3>ğŸ“… æœ¬å‘¨è¯¾ç¨‹è¡¨</h3>
            <div id="schedule-list">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div style="margin-top: 10px; font-size: 0.8rem; opacity: 0.7;">
                ä½œä¸š: <span id="homework-count">0</span> æœªå®Œæˆ |
                æœ¬å‘¨æ´»åŠ¨: <span id="week-activities">0</span>
            </div>
        </div>

        <!-- äº‹ä»¶åŒºåŸŸ -->
        <div class="events">
            <div class="event-card">
                <h3>ğŸ¯ å½“å‰çŠ¶æ€</h3>
                <p id="current-status">ä¸€åˆ‡æ­£å¸¸ï¼Œå‡†å¤‡å¼€å§‹å­¦ä¹ ã€‚</p>
            </div>
            <div class="event-card relationship">
                <h3>ğŸ‘¥ å…³ç³»åŠ¨æ€</h3>
                <p id="relationship-status">ä¸è€å¸ˆå…³ç³»è‰¯å¥½ï¼ŒåŒå­¦å…³ç³»ä¸€èˆ¬ã€‚</p>
            </div>
            <div class="event-card economy">
                <h3>ğŸ’° ç»æµçŠ¶å†µ</h3>
                <p id="economy-status">é›¶èŠ±é’±å……è¶³ï¼Œå¯ä»¥è´­ä¹°èµ„æ–™ã€‚</p>
            </div>
            <div class="event-card mental">
                <h3>ğŸ’­ å¿ƒç†çŠ¶æ€</h3>
                <p id="mental-status">æƒ…ç»ªç¨³å®šï¼Œå¿ƒç†è‰¯å¥½ã€‚</p>
            </div>
            <div class="event-card">
                <h3>ğŸ¯ å½“å‰é˜¶æ®µç›®æ ‡</h3>
                <p id="current-goal">æš‚æ— ç›®æ ‡</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="goal-progress" style="width: 0%; background: var(--warning)"></div>
                </div>
            </div>
            <div class="event-card">
                <h3>ğŸ² éšæœºäº‹ä»¶</h3>
                <p id="random-event">æš‚æ— äº‹ä»¶</p>
            </div>
        </div>

        <!-- æ“ä½œåŒºåŸŸ -->
        <div class="actions">
            <button class="action-btn primary" id="study-btn">ğŸ“š å­¦ä¹  <span class="hotkey">1</span></button>
            <button class="action-btn" id="rest-btn">ğŸ’¤ ä¼‘æ¯ <span class="hotkey">2</span></button>
            <button class="action-btn" id="exercise-btn">ğŸƒ é”»ç‚¼ <span class="hotkey">3</span></button>
            <button class="action-btn" id="social-btn">ğŸ‘¥ ç¤¾äº¤ <span class="hotkey">4</span></button>
            <button class="action-btn purple" id="memory-btn">ğŸ’­ å›å¿† <span class="hotkey">5</span></button>
            <button class="action-btn warning" id="exam-btn">ğŸ“ æ¨¡è€ƒ <span class="hotkey">6</span></button>
            <button class="action-btn cyan" id="homework-btn">âœï¸ ä½œä¸š <span class="hotkey">7</span></button>
            <button class="action-btn" id="activity-btn">ğŸ‰ æ´»åŠ¨ <span class="hotkey">8</span></button>
            <button class="action-btn" id="economy-btn">ğŸ’° ç»æµ <span class="hotkey">9</span></button>
            <button class="action-btn danger" id="end-btn">ğŸŒ™ ç»“æŸæœ¬å‘¨ <span class="hotkey">0</span></button>
        </div>

        <!-- æˆå°±åŒºåŸŸï¼ˆå·²éšè—ï¼‰ -->
        <div class="achievements" style="display: none;">
            <h3>ğŸ† æˆå°±è¿›åº¦ <span id="achievement-count">0</span>/60</h3>
            <div class="achievement-list" id="achievement-list">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- é¡µè„š -->
        <div class="footer">
            <span>ğŸ’¡ æç¤ºï¼šæŒ‰ä½Shiftæ˜¾ç¤ºå¿«æ·é”®æç¤º</span>
            <span>
                <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode.zh-Hans" target="_blank"
                   style="color: rgb(196, 196, 196)">
                    CC
                    BY-NC-ND 4.0
                </a> | wujiahaocoder | ä»“åº“ï¼šhttps://github.com/wujiahaocoder/AFO-Simulator
            </span>
            <button class="donation-btn" onclick="showAchievementDetail()"
                    style="padding: 5px 10px; font-size: 0.75rem;">
                æŸ¥çœ‹æˆå°±
            </button>

        </div>
    </div>

    <!-- ==================== æ¨¡æ€æ¡†ç³»ç»Ÿ ==================== -->
    <!-- å¯åŠ¨å¼¹çª—ï¼ˆæåŠ©+ä»‹ç»ï¼‰ -->
    <div class="modal" id="welcome-modal" style="display: flex;">
        <div class="modal-content donation-modal">
            <div class="modal-header">
                <h2>ğŸ‰ æ¬¢è¿æ¥åˆ° AFOï¼šç»“æŸï¼Ÿå¼€å§‹ï¼Ÿ</h2>
            </div>
            <div class="modal-body donation-content">
                <h3>æ¸¸æˆä»‹ç»</h3>
                <p>è¿™æ˜¯ä¸€ä¸ªAFOåè¿›è¡Œæ–‡åŒ–å­¦ä¹ çš„æ¨¡æ‹Ÿæ¸¸æˆã€‚ä½ å°†æ‰®æ¼”ä¸€ä½é€€å½¹OIé€‰æ‰‹ï¼Œåœ¨52å‘¨çš„æ—¶é—´å†…ï¼Œé€šè¿‡ç­–ç•¥æ€§çš„é€‰æ‹©ï¼Œå¹³è¡¡å­¦ä¹ ã€ä¼‘æ¯ã€ç¤¾äº¤ã€ç»æµç­‰å¤šç»´åº¦çŠ¶æ€ï¼Œæœ€ç»ˆåœ¨é«˜è€ƒä¸­å–å¾—ç†æƒ³æˆç»©ã€‚</p>

                <p><strong>æ ¸å¿ƒæœºåˆ¶ï¼š</strong>æ¯å‘¨é™åˆ¶3æ¬¡æ“ä½œï¼Œå¿…é¡»åœ¨æœ‰é™èµ„æºä¸‹åšå‡ºæœ€ä¼˜å†³ç­–ã€‚ä½ çš„å¿ƒç†çŠ¶æ€ã€äººé™…å…³ç³»ã€ç»æµçŠ¶å†µéƒ½ä¼šç›´æ¥å½±å“å­¦ä¹ æ•ˆç‡ï¼</p>

                <h3 style="margin-top: 20px;">â¤ï¸ æ”¯æŒå¼€å‘</h3>
                <p>
                    æœ¬æ¸¸æˆå®Œå…¨å…è´¹ï¼Œé‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode.zh-Hans"
                                 target="_blank" style="color: rgb(196, 196, 196)">
                        CC BY-NC-ND
                        4.0
                    </a>åè®®ã€‚å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ¸¸æˆï¼Œæ¬¢è¿è¯·æˆ‘å–æ¯å’–å•¡ï¼Œæ”¯æŒåç»­å¼€å‘ï¼
                </p>

                <div class="donation-qr">
                    <img src="https://github.com/wujiahaocoder/English_word_learner/blob/master/image.png?raw=true"
                         alt="æåŠ©äºŒç»´ç "
                         onerror="this.style.display='none';this.parentElement.innerHTML='<div style=\'padding:20px;color:#666;font-size:0.8rem;\'>äºŒç»´ç åŠ è½½å¤±è´¥<br>è¯·è®¿é—®GitHubæ”¯æŒ</div>'">
                </div>

                <a href="https://github.com/wujiahaocoder/English_word_learner/blob/master/image.png" target="_blank"
                   class="donation-link">æˆ–ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹é«˜æ¸…äºŒç»´ç </a>

                <div style="margin-top: 20px; font-size: 0.85rem; opacity: 0.7; text-align: left; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 6px;">
                    <strong>æ¸¸æˆç‰¹è‰²ï¼š</strong><br>
                    â€¢ 52å‘¨å®Œæ•´å­¦å¹´ï¼Œæ¯å‘¨3æ¬¡æ“ä½œé™åˆ¶<br>
                    â€¢ 50+éšæœºäº‹ä»¶ï¼Œ15+æ•…äº‹å‰§æƒ…<br>
                    â€¢ 60+æˆå°±ï¼Œ10+ç»“å±€<br>
                    â€¢ å¤šç»´åº¦å±æ€§è”åŠ¨ç³»ç»Ÿ<br>
                    â€¢ ç­–ç•¥æ€§èµ„æºç®¡ç†
                </div>
            </div>
            <div class="donation-buttons">
                <button class="donation-btn" onclick="closeModal('welcome-modal')">æš‚ä¸æ”¯æŒï¼Œç›´æ¥å¼€å§‹</button>
                <button class="donation-btn primary"
                        onclick="window.open('https://github.com/wujiahaocoder/English_word_learner/blob/master/image.png', '_blank')">
                    æ”¯æŒå¼€å‘è€…
                </button>
            </div>
        </div>
    </div>

    <!-- å­¦ä¹ æ¨¡æ€æ¡† -->
    <div class="modal" id="study-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“š é€‰æ‹©å­¦ä¹ ç§‘ç›®</h2>
                <button class="close-btn" onclick="closeModal('study-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>é€‰æ‹©è¦é‡ç‚¹å­¦ä¹ çš„ç§‘ç›®ã€‚ä¸åŒç§‘ç›®æ¶ˆè€—ç²¾åŠ›ä¸åŒï¼Œæå‡æ•ˆæœä¹Ÿä¸åŒã€‚ç«èµ›èƒŒæ™¯è®©ä½ åœ¨æ•°ç†åŒ–ä¸Šæœ‰é¢å¤–åŠ æˆã€‚</p>
                <div class="study-options">
                    <button class="study-btn" onclick="study('chinese')">
                        è¯­æ–‡
                        <small>æ¶ˆè€—15ç²¾åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="study('math')">
                        æ•°å­¦
                        <small>æ¶ˆè€—20ç²¾åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="study('english')">
                        è‹±è¯­
                        <small>æ¶ˆè€—15ç²¾åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="study('physics')">
                        ç‰©ç†
                        <small>æ¶ˆè€—20ç²¾åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="study('chemistry')">
                        åŒ–å­¦
                        <small>æ¶ˆè€—15ç²¾åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="study('biology')">
                        ç”Ÿç‰©
                        <small>æ¶ˆè€—15ç²¾åŠ›</small>
                    </button>
                </div>
                <div style="margin-top: 15px; font-size: 0.85rem; opacity: 0.8;">
                    ğŸ’¡ æç¤ºï¼šæ•°å­¦å’Œç‰©ç†æœ‰ç«èµ›åŸºç¡€ï¼Œæå‡æ›´å¿«ä½†æ¶ˆè€—æ›´å¤§ã€‚å¿ƒç†çŠ¶æ€ä¼šå½±å“å­¦ä¹ æ•ˆç‡ï¼
                </div>
            </div>
        </div>
    </div>

    <!-- ä¼‘æ¯æ¨¡æ€æ¡† -->
    <div class="modal" id="rest-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’¤ ä¼‘æ¯æ–¹å¼</h2>
                <button class="close-btn" onclick="closeModal('rest-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>é€‰æ‹©é€‚å½“çš„ä¼‘æ¯æ–¹å¼ã€‚è¿‡åº¦åŠ³ç´¯ä¼šå½±å“å¥åº·ï¼Œåˆç†ä¼‘æ¯æ‰èƒ½ä¿æŒæœ€ä½³çŠ¶æ€ã€‚</p>
                <div class="study-options">
                    <button class="study-btn" onclick="rest('sleep')">
                        æ·±åº¦ç¡çœ 
                        <small>æ¢å¤30ç²¾åŠ› | é™ä½10å‹åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="rest('nap')">
                        åˆç¡
                        <small>æ¢å¤15ç²¾åŠ› | é™ä½5å‹åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="rest('relax')">
                        æ”¾æ¾å¨±ä¹
                        <small>æ¢å¤10ç²¾åŠ› | é™ä½15å‹åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="rest('music')">
                        å¬éŸ³ä¹
                        <small>æ¢å¤5ç²¾åŠ› | é™ä½8å‹åŠ› </small>
                    </button>
                    <button class="study-btn special" onclick="rest('counseling')">
                        å¿ƒç†å’¨è¯¢
                        <small>æ¶ˆè€—100å…ƒ | æ¢å¤20å¿ƒç†</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç»æµæ¨¡æ€æ¡† -->
    <div class="modal" id="economy-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’° ç»æµç®¡ç†</h2>
                <button class="close-btn" onclick="closeModal('economy-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>ç®¡ç†ä½ çš„é›¶èŠ±é’±å’Œæ”¯å‡ºã€‚åˆç†è§„åˆ’ç»æµï¼Œè´­ä¹°å­¦ä¹ èµ„æ–™ã€‚</p>
                <div class="study-options">
                    <button class="study-btn" onclick="economy('part-time')">
                        å…¼èŒå®¶æ•™
                        <small>è·å¾—200å…ƒ | å¢åŠ å‹åŠ›</small>
                    </button>
                    <button class="study-btn" onclick="economy('buy-books')">
                        è´­ä¹°èµ„æ–™
                        <small>æ¶ˆè€—100å…ƒ | å…¨ç§‘+1 | æå‡æ•ˆç‡</small>
                    </button>
                    <button class="study-btn" onclick="economy('buy-course')">
                        ç½‘è¯¾è¡¥ä¹ 
                        <small>æ¶ˆè€—300å…ƒ | æŒ‡å®šç§‘ç›®+3 | æ¶ˆè€—ç²¾åŠ›</small>
                    </button>
                    <!-- <button class="study-btn" onclick="economy('save')">
                        å­˜é’±
                        <small>æ— æ¶ˆè€— | å¢åŠ å­˜æ¬¾ | æ— ç›´æ¥æ”¶ç›Š</small>
                    </button> -->
                    <button class="study-btn" onclick="economy('parents')">
                        å‘çˆ¶æ¯è¦é’±
                        <small>æ¶ˆè€—å…³ç³» | è·å¾—150å…ƒ | å¢åŠ å‹åŠ›</small>
                    </button>
                </div>
                <div style="margin-top: 10px; font-size: 0.85rem;">
                    å½“å‰å­˜æ¬¾: <span id="current-money">500</span> å…ƒ
                </div>
            </div>
        </div>
    </div>

    <!-- æ´»åŠ¨æ¨¡æ€æ¡† -->
    <div class="modal" id="activity-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ‰ è¯¾å¤–æ´»åŠ¨</h2>
                <button class="close-btn" onclick="closeModal('activity-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>å‚åŠ è¯¾å¤–æ´»åŠ¨å¯ä»¥ä¸°å¯Œç»å†ï¼Œä½†ä¹Ÿä¼šæ¶ˆè€—æ—¶é—´å’Œç²¾åŠ›ã€‚</p>
                <div class="study-options">
                    <button class="study-btn" onclick="activity('club')">
                        ç¤¾å›¢æ´»åŠ¨
                        <small>åŒå­¦å…³ç³»+5 | å‹åŠ›-5</small>
                    </button>
                    <button class="study-btn" onclick="activity('volunteer')">
                        å¿—æ„¿è€…
                        <small>å¿ƒç†+3</small>
                    </button>
                    <button class="study-btn" onclick="activity('lecture')">
                        å¬è®²åº§
                        <small>éšæœºç§‘ç›®+1 | å‹åŠ›-3</small>
                    </button>
                    <button class="study-btn" onclick="activity('competition')">
                        çŸ¥è¯†ç«èµ›
                        <small>å‹åŠ›+10</small>
                    </button>
                    <button class="study-btn special" onclick="activity('oi-meetup')">
                        OIèšä¼š
                        <small>å‹åŠ›-10 | å›å¿†+1</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä½œä¸šæ¨¡æ€æ¡† -->
    <div class="modal" id="homework-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âœï¸ ä½œä¸šç®¡ç†</h2>
                <button class="close-btn" onclick="closeModal('homework-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>å®Œæˆä½œä¸šå¯ä»¥å·©å›ºçŸ¥è¯†ï¼Œä½†ä¹Ÿä¼šæ¶ˆè€—ç²¾åŠ›ã€‚æ‹–æ¬ ä½œä¸šä¼šå½±å“è€å¸ˆå…³ç³»ã€‚</p>
                <div id="homework-list" style="margin-bottom: 15px;">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="study-options">
                    <button class="study-btn" onclick="homework('complete-all')">
                        å®Œæˆæ‰€æœ‰ä½œä¸š
                        <small>æ¶ˆè€—30ç²¾åŠ› | å…¨ç§‘+0.5 | è€å¸ˆå…³ç³»+3</small>
                    </button>
                    <button class="study-btn" onclick="homework('complete-one')">
                        å®Œæˆä¸€é¡¹ä½œä¸š
                        <small>æ¶ˆè€—10ç²¾åŠ› | éšæœºç§‘ç›®+0.3 | è€å¸ˆå…³ç³»+1</small>
                    </button>
                    <button class="study-btn danger" onclick="homework('skip')">
                        æ‹–æ¬ ä½œä¸š
                        <small>æ— æ¶ˆè€— | è€å¸ˆå…³ç³»-5 | å‹åŠ›+5</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ•…äº‹/å›å¿†æ¨¡æ€æ¡† -->
    <div class="modal" id="story-modal">
        <div class="modal-content story-modal">
            <div class="modal-header">
                <h2>ğŸ“– <span id="story-title">æ•…äº‹äº‹ä»¶</span></h2>
                <button class="close-btn" onclick="closeModal('story-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="story-content" id="story-content">
                    <!-- åŠ¨æ€å†…å®¹ -->
                </div>
                <div class="story-choices" id="story-choices">
                    <!-- åŠ¨æ€é€‰æ‹© -->
                </div>
            </div>
        </div>
    </div>

    <!-- é˜¶æ®µç›®æ ‡å¼¹çª— -->
    <div class="modal" id="goal-modal">
        <div class="modal-content goal-modal">
            <div class="modal-header">
                <h2>ğŸ¯ é˜¶æ®µç›®æ ‡æ›´æ–°</h2>
                <button class="close-btn" onclick="closeModal('goal-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="goal-content" id="goal-content">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="donation-btn primary" onclick="closeModal('goal-modal')">æ˜ç™½äº†</button>
            </div>
        </div>

    </div>

    <!-- æˆå°±è¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="achievement-modal">
        <div class="modal-content achievement-detail-modal">
            <div class="modal-header">
                <h2>ğŸ† æˆå°±è¯¦æƒ…</h2>
                <button class="close-btn" onclick="closeModal('achievement-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="achievement-detail-content" id="achievement-detail-content">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification">
        <div id="notification-text"></div>
    </div>

    <script>
        // ==================== æ¸¸æˆçŠ¶æ€ ====================
        const gameState = {
            // æ—¶é—´ç³»ç»Ÿ
            week: 1,
            dayOfWeek: 0, // 0=å‘¨ä¸€, 6=å‘¨æ—¥
            period: 0, // 0=æ—©æ™¨, 1=ä¸Šåˆ, 2=ä¸‹åˆ, 3=æ™šä¸Š
            daysLeft: 365,
            vacationDays: 0,
            season: 0, // 0=æ˜¥, 1=å¤, 2=ç§‹, 3=å†¬

            // æ ¸å¿ƒçŠ¶æ€
            energy: 80,
            stress: 20,
            health: 85,
            mental: 75,
            money: 500,

            // å­¦ç§‘èƒ½åŠ›
            subjects: {
                chinese: 10,
                math: 15,
                english: 8,
                physics: 20,
                chemistry: 12,
                biology: 10
            },

            // äººé™…å…³ç³»ï¼ˆ8ä¸ªè§’è‰²ï¼‰
            relationships: {
                teacher: 50,        // ç­ä¸»ä»»
                mathTeacher: 50,    // æ•°å­¦è€å¸ˆ
                chineseTeacher: 50, // è¯­æ–‡è€å¸ˆ
                englishTeacher: 50, // è‹±è¯­è€å¸ˆ
                classmateA: 50,     // åŒå­¦A
                classmateB: 50,     // åŒå­¦B
                parents: 50,        // çˆ¶æ¯
                crush: 0            // æš—æ‹å¯¹è±¡
            },

            // ä½œä¸šç³»ç»Ÿ
            homework: {
                chinese: false,
                math: false,
                english: false,
                physics: false,
                chemistry: false,
                biology: false
            },

            // è¯¾ç¨‹è¡¨ï¼ˆæ¯å‘¨ï¼‰
            schedule: [],

            // æ´»åŠ¨è®°å½•
            weekActivities: 0,
            totalActivities: 0,

            // ä¸“ç²¾ç³»ç»Ÿ
            specialization: null, // 'literature', 'science', 'all-rounder'

            // æ¸¸æˆè¿›åº¦
            events: [], // å·²è§¦å‘çš„æ•…äº‹äº‹ä»¶ID
            achievements: new Set(),
            storyProgress: 0,
            examCount: 0,
            memoryCount: 0,
            perfectWeeks: 0,

            // ç»Ÿè®¡
            totalStudyHours: 0,
            totalRestHours: 0,
            totalExerciseHours: 0,
            totalSocialHours: 0,

            // æ“ä½œé™åˆ¶
            actionsThisWeek: 0,
            maxActionsPerWeek: 3,

            // é˜¶æ®µç›®æ ‡
            currentGoal: null,
            goalProgress: 0,

            // æ¸¸æˆçŠ¶æ€
            gameOver: false,
            lastAction: null,
            studyStreak: 0,

            // å¤©æ°”
            weather: 'â˜€ï¸',
            currentWeather: { type: 'â˜€ï¸', name: 'æ™´å¤©', mood: 1, efficiency: 1.1 }
        };

        // ==================== æ•°æ®åº“ ====================

        // å­£èŠ‚ç³»ç»Ÿ
        const seasons = [
            { name: 'æ˜¥å­£', emoji: 'ğŸŒ¸', mood: 1, events: ['å¼€å­¦', 'æ˜¥æ¸¸', 'æœŸä¸­è€ƒè¯•'] },
            { name: 'å¤å­£', emoji: 'â˜€ï¸', mood: 0, events: ['æœŸæœ«è€ƒè¯•', 'æš‘å‡', 'æ¯•ä¸š'] },
            { name: 'ç§‹å­£', emoji: 'ğŸ‚', mood: -1, events: ['å¼€å­¦', 'è¿åŠ¨ä¼š', 'æœŸä¸­è€ƒè¯•'] },
            { name: 'å†¬å­£', emoji: 'â„ï¸', mood: -2, events: ['æœŸæœ«è€ƒè¯•', 'å¯’å‡', 'æ˜¥èŠ‚'] }
        ];

        // å¤©æ°”ç³»ç»Ÿ
        const weathers = [
            { type: 'â˜€ï¸', name: 'æ™´å¤©', mood: 1, efficiency: 1.1 },
            { type: 'â˜ï¸', name: 'é˜´å¤©', mood: 0, efficiency: 1.0 },
            { type: 'ğŸŒ§ï¸', name: 'é›¨å¤©', mood: -1, efficiency: 0.9 },
            { type: 'â›ˆï¸', name: 'é›·é›¨', mood: -2, efficiency: 0.8 },
            { type: 'â„ï¸', name: 'é›ªå¤©', mood: -1, efficiency: 0.85 },
            { type: 'ğŸŒ«ï¸', name: 'é›¾éœ¾', mood: -1, efficiency: 0.85 }
        ];

        // å‡æœŸç³»ç»Ÿ
        const holidays = {
            1: { name: 'å›½åº†', days: 7, week: 1, effect: { stress: -10 } },
            2: { name: 'å…ƒæ—¦', days: 3, week: 20, effect: { stress: -5 } },
            3: { name: 'å¯’å‡', days: 21, week: 25, effect: { stress: -20, health: 5 } },
            4: { name: 'æ˜¥èŠ‚', days: 7, week: 26, effect: { parents: 10, stress: -15 } },
            5: { name: 'æ¸…æ˜', days: 3, week: 35, effect: { mental: 5 } },
            6: { name: 'äº”ä¸€', days: 5, week: 40, effect: { stress: -8 } },
            7: { name: 'ç«¯åˆ', days: 3, week: 45, effect: { stress: -5 } }
        };

        // é˜¶æ®µç›®æ ‡ç³»ç»Ÿ
        const stageGoals = {
            5: {
                title: "é€‚åº”æœŸç›®æ ‡ï¼ˆç¬¬5å‘¨ï¼‰",
                desc: "å…¨ç§‘å¹³å‡è¾¾åˆ°20åˆ†ï¼Œå‹åŠ›ä½äº40ï¼Œå¥åº·ä¿æŒ80ä»¥ä¸Š",
                check: (s) => {
                    const avg = Object.values(s.subjects).reduce((a, b) => a + b, 0) / 6;
                    return avg >= 20 && s.stress < 40 && s.health >= 80;
                },
                reward: { energy: 10, stress: -5 }
            },
            10: {
                title: "æå‡æœŸç›®æ ‡ï¼ˆç¬¬10å‘¨ï¼‰",
                desc: "è‡³å°‘ä¸¤ç§‘è¾¾åˆ°40åˆ†ï¼Œä¸è€å¸ˆå…³ç³»è‰¯å¥½ï¼ˆ>60ï¼‰ï¼Œç»æµçŠ¶å†µæ­£å¸¸ï¼ˆ>300å…ƒï¼‰",
                check: (s) => {
                    const highCount = Object.values(s.subjects).filter(v => v >= 40).length;
                    return highCount >= 2 && s.relationships.teacher >= 60 && s.money >= 300;
                },
                reward: { mental: 5, money: 100 }
            },
            15: {
                title: "ç¨³å®šæœŸç›®æ ‡ï¼ˆç¬¬15å‘¨ï¼‰",
                desc: "å…¨ç§‘å¹³å‡è¾¾åˆ°50åˆ†ï¼Œå‹åŠ›ä½äº30ï¼Œå®Œæˆè‡³å°‘5æ¬¡ä½œä¸š",
                check: (s) => {
                    const avg = Object.values(s.subjects).reduce((a, b) => a + b, 0) / 6;
                    const homeworkCount = Object.values(s.homework).filter(v => v).length;
                    return avg >= 50 && s.stress < 30 && homeworkCount >= 5;
                },
                reward: { health: 5, stress: -10 }
            },
            25: {
                title: "å†²åˆºæœŸç›®æ ‡ï¼ˆç¬¬25å‘¨ï¼‰",
                desc: "å…¨ç§‘å¹³å‡è¾¾åˆ°65åˆ†ï¼Œè‡³å°‘ä¸€ç§‘è¾¾åˆ°70åˆ†ï¼Œæš—æ‹å¯¹è±¡å…³ç³»>30",
                check: (s) => {
                    const avg = Object.values(s.subjects).reduce((a, b) => a + b, 0) / 6;
                    const has70 = Object.values(s.subjects).some(v => v >= 70);
                    return avg >= 65 && has70 && s.relationships.crush >= 30;
                },
                reward: { energy: 15, mental: 10 }
            },
            35: {
                title: "å†³æˆ˜æœŸç›®æ ‡ï¼ˆç¬¬35å‘¨ï¼‰",
                desc: "å…¨ç§‘å¹³å‡è¾¾åˆ°75åˆ†ï¼Œå¿ƒç†å€¼>70ï¼Œå®Œæˆè‡³å°‘3æ¬¡æ¨¡è€ƒ",
                check: (s) => {
                    const avg = Object.values(s.subjects).reduce((a, b) => a + b, 0) / 6;
                    return avg >= 75 && s.mental > 70 && s.examCount >= 3;
                },
                reward: { stress: -15, health: 10 }
            },
            45: {
                title: "æœ€ç»ˆç›®æ ‡ï¼ˆç¬¬45å‘¨ï¼‰",
                desc: "å…¨ç§‘å¹³å‡è¾¾åˆ°85åˆ†ï¼Œæ‰€æœ‰å…³ç³»>60ï¼Œå‹åŠ›<20",
                check: (s) => {
                    const avg = Object.values(s.subjects).reduce((a, b) => a + b, 0) / 6;
                    const allRel = Object.values(s.relationships).every(v => v >= 60);
                    return avg >= 85 && allRel && s.stress < 20;
                },
                reward: { energy: 20, mental: 15 }
            }
        };

        // éšæœºäº‹ä»¶åº“ï¼ˆä¼˜åŒ–ç‰ˆï¼šåŠ å…¥åˆç†æ€§æ£€æŸ¥ï¼‰
        const randomEvents = {
            study: [
                {
                    text: "æ•°å­¦è€å¸ˆé¢å¤–å¸ƒç½®äº†5é“éš¾é¢˜ï¼Œè¯´'ç«èµ›ç”Ÿåº”è¯¥è½»æ¾æå®š'",
                    effect: { stress: 5, math: 1 },
                    type: "bad",
                    weight: 10,
                    condition: (s) => s.subjects.math >= 15
                },
                {
                    text: "å‘ç°ä¸€é“æ•°å­¦é¢˜æœ‰ä¸‰ç§è§£æ³•ï¼Œè±ç„¶å¼€æœ—",
                    effect: { math: 2, energy: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.math >= 20
                },
                {
                    text: "æ•°å­¦æµ‹éªŒæœ€åä¸€é¢˜å…¨ç­åªæœ‰ä½ åšå¯¹äº†",
                    effect: { math: 3, teacher: 5, stress: -5 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.math >= 35
                },
                {
                    text: "æ•°å­¦ä½œä¸šå¤ªå¤šï¼Œç†¬å¤œåˆ°å‡Œæ™¨ä¸¤ç‚¹",
                    effect: { math: 1, energy: -10, stress: 8 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.subjects.math >= 25
                },
                {
                    text: "æ•°å­¦è¯¾ä»£è¡¨ä¸»åŠ¨åˆ†äº«ä»–çš„é”™é¢˜æœ¬",
                    effect: { math: 2, classmateA: 2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æ•°å­¦è€å¸ˆç”¨ä½ çš„è§£æ³•å½“èŒƒä¾‹è®²è§£",
                    effect: { math: 3, teacher: 5, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.math >= 30
                },
                {
                    text: "æ•°å­¦ç«èµ›æŠ¥åæˆªæ­¢ï¼Œä½ çŠ¹è±«ä¸å†³",
                    effect: { stress: 5 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.subjects.math >= 25 && s.week <= 8
                },
                {
                    text: "æ•°å­¦å…¬å¼çªç„¶æƒ³ä¸èµ·æ¥ï¼Œè€ƒè¯•å¡å£³",
                    effect: { math: -2, stress: 8 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.math >= 20
                },
                {
                    text: "æ•°å­¦è€å¸ˆæ¨èäº†ä¸€æœ¬å¾ˆå¥½çš„å‚è€ƒä¹¦",
                    effect: { math: 2, teacher: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.mathTeacher >= 40
                },
                {
                    text: "æ•°å­¦è¯¾ä¸Šæ‰“çŒç¡ï¼Œé”™è¿‡äº†å…³é”®çŸ¥è¯†ç‚¹",
                    effect: { math: -1, energy: -3, stress: 3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.energy < 50
                },
                // è¯­æ–‡ç›¸å…³
                {
                    text: "è¯­æ–‡ä½œæ–‡è¢«å½“ä½œèŒƒæ–‡æœ—è¯»",
                    effect: { chinese: 2, teacher: 5 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.subjects.chinese >= 20
                },
                {
                    text: "å¤æ–‡é»˜å†™é”™äº†ä¸€ä¸ªå­—ï¼Œè¢«æ‰£åˆ†",
                    effect: { chinese: -1, stress: 3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.subjects.chinese >= 15
                },
                {
                    text: "è¯­æ–‡è€å¸ˆæ¨èä½ å‚åŠ ä½œæ–‡æ¯”èµ›",
                    effect: { chinese: 3, teacher: 5, stress: 5 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 30
                },
                {
                    text: "é˜…è¯»ç†è§£é¢˜å®Œå…¨ç†è§£äº†ä½œè€…çš„æ„å›¾",
                    effect: { chinese: 2, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.chinese >= 25
                },
                {
                    text: "è¯­æ–‡è¯¾ä¸Šè®¨è®ºã€Šçº¢æ¥¼æ¢¦ã€‹ï¼Œä½ å‘è¨€ç²¾å½©",
                    effect: { chinese: 2, classmateA: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 20
                },
                {
                    text: "è¯­æ–‡ä½œä¸šæ˜¯æŠ„å†™è¯¾æ–‡ï¼Œæ¯ç‡¥ä¹å‘³",
                    effect: { chinese: 1, stress: 2 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "è¯­æ–‡è€ƒè¯•ä½œæ–‡è·‘é¢˜ï¼Œåˆ†æ•°ä¸ç†æƒ³",
                    effect: { chinese: -2, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.subjects.chinese >= 15
                },
                {
                    text: "è¯­æ–‡è€å¸ˆè¡¨æ‰¬ä½ çš„æ–‡ç¬”æœ‰è¿›æ­¥",
                    effect: { chinese: 2, teacher: 3, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.chinese >= 18
                },
                {
                    text: "æ–‡è¨€æ–‡ç¿»è¯‘é‡åˆ°ç”Ÿåƒ»å­—ï¼ŒæŸ¥å­—å…¸èŠ±äº†å¾ˆä¹…",
                    effect: { chinese: 1, energy: -2 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 20
                },
                {
                    text: "è¯­æ–‡è¯¾ä¸Šåˆ†äº«è¯»ä¹¦å¿ƒå¾—ï¼Œè·å¾—æŒå£°",
                    effect: { chinese: 2, classmateA: 2, stress: -2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chinese >= 25
                },
                // è‹±è¯­ç›¸å…³
                {
                    text: "åŒå­¦åˆ†äº«äº†é«˜æ•ˆè‹±è¯­å•è¯è®°å¿†æ³•ï¼Œå¾ˆæœ‰ç”¨",
                    effect: { english: 2, stress: -2 },
                    type: "good",
                    weight: 10,
                    condition: (s) => true
                },
                {
                    text: "è‹±è¯­å¬åŠ›è€ƒè¯•å®Œå…¨å¬æ‡‚äº†ï¼Œå¾ˆè‡ªä¿¡",
                    effect: { english: 3, stress: -5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.english >= 25
                },
                {
                    text: "è‹±è¯­ä½œæ–‡ç”¨äº†é«˜çº§å¥å‹ï¼Œè¢«è€å¸ˆåœˆå‡ºè¡¨æ‰¬",
                    effect: { english: 2, teacher: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.english >= 30
                },
                {
                    text: "è‹±è¯­å•è¯èƒŒäº†åˆå¿˜ï¼Œå¾ˆæ²®ä¸§",
                    effect: { english: -1, stress: 3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.subjects.english >= 15
                },
                {
                    text: "è‹±è¯­è€å¸ˆè®©ä½ å½“å°è€å¸ˆï¼Œæ•™åŒå­¦å‘éŸ³",
                    effect: { english: 3, teacher: 5, stress: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.english >= 35
                },
                {
                    text: "è‹±è¯­è¯¾ä¸Šå’Œå¤–æ•™å¯¹è¯ï¼Œè™½ç„¶ç´§å¼ ä½†å®Œæˆäº†",
                    effect: { english: 2, stress: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.english >= 20
                },
                {
                    text: "è‹±è¯­é˜…è¯»ç†è§£é‡åˆ°ç”Ÿè¯å¤ªå¤šï¼Œå½±å“ç†è§£",
                    effect: { english: -1, stress: 4 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.english >= 18
                },
                {
                    text: "è‹±è¯­è€å¸ˆé€ä½ ä¸€æœ¬åŸç‰ˆå°è¯´",
                    effect: { english: 2, englishTeacher: 5 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.englishTeacher >= 40
                },
                {
                    text: "è‹±è¯­å£è¯­ç»ƒä¹ æ—¶ï¼ŒåŒå­¦çº æ­£äº†ä½ çš„å‘éŸ³",
                    effect: { english: 1, classmateA: 1 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.subjects.english >= 15
                },
                {
                    text: "è‹±è¯­è€ƒè¯•æ—¶é—´ä¸å¤Ÿï¼Œæœ€åå‡ é¢˜ä¹±å¡«",
                    effect: { english: -2, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.subjects.english >= 20
                },
                // ç‰©ç†ç›¸å…³
                {
                    text: "ç‰©ç†è¯¾ä¸Šçªç„¶è¢«ç‚¹åè§£é¢˜ï¼Œå¹¸å¥½ä»¥å‰ç«èµ›å­¦è¿‡",
                    effect: { physics: 1, teacher: 3 },
                    type: "good",
                    weight: 8,
                    condition: (s) => s.subjects.physics >= 15
                },
                {
                    text: "ç‰©ç†å®éªŒæ•°æ®è¯¯å·®å¾ˆå¤§ï¼Œè¢«è€å¸ˆæŒ‡å‡º",
                    effect: { physics: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.physics >= 10
                },
                {
                    text: "ç‰©ç†è€å¸ˆç”¨ç”ŸåŠ¨çš„æ¯”å–»è®²è§£ç”µç£å­¦ï¼Œæç„¶å¤§æ‚Ÿ",
                    effect: { physics: 3, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.physics >= 20
                },
                {
                    text: "ç‰©ç†ç«èµ›æ¨¡æ‹Ÿé¢˜å¤ªéš¾ï¼Œåªåšå‡ºæ¥ä¸€åŠ",
                    effect: { physics: 1, stress: 5 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.subjects.physics >= 25
                },
                {
                    text: "ç‰©ç†è¯¾ä»£è¡¨ç»„ç»‡è®¨è®ºï¼Œä½ æå‡ºäº†æ–°æ€è·¯",
                    effect: { physics: 2, classmateA: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.physics >= 30
                },
                {
                    text: "ç‰©ç†å…¬å¼æ¨å¯¼å¡åœ¨å…³é”®æ­¥éª¤ï¼Œå¾ˆçƒ¦èº",
                    effect: { physics: -1, stress: 4 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.physics >= 20
                },
                {
                    text: "ç‰©ç†è€å¸ˆè¡¨æ‰¬ä½ å®éªŒæ“ä½œè§„èŒƒ",
                    effect: { physics: 2, teacher: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.physics >= 15
                },
                {
                    text: "ç‰©ç†è€ƒè¯•é€‰æ‹©é¢˜å…¨å¯¹ï¼Œå¤§é¢˜å´ä¸ä¼š",
                    effect: { physics: 1, stress: 3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.subjects.physics >= 18
                },
                {
                    text: "ç‰©ç†å®éªŒå™¨ææŸåï¼Œå®éªŒè¯¾å–æ¶ˆ",
                    effect: { physics: -1, stress: 2 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.subjects.physics >= 10
                },
                {
                    text: "ç‰©ç†è€å¸ˆæ¨èä½ å‚åŠ ç‰©ç†ç«èµ›åŸ¹è®­",
                    effect: { physics: 3, teacher: 5, stress: 5 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.subjects.physics >= 35
                },
                // åŒ–å­¦ç›¸å…³
                {
                    text: "åŒ–å­¦å®éªŒå¤±è´¥ï¼Œè¢«è€å¸ˆæ‰¹è¯„",
                    effect: { chemistry: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.subjects.chemistry >= 10
                },
                {
                    text: "åŒ–å­¦æ–¹ç¨‹å¼é…å¹³çªç„¶å¼€çªï¼Œä¸€æ°”å‘µæˆ",
                    effect: { chemistry: 2, energy: 2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.subjects.chemistry >= 15
                },
                {
                    text: "åŒ–å­¦è€å¸ˆæ¼”ç¤ºäº†æœ‰è¶£çš„é¢œè‰²å˜åŒ–å®éªŒ",
                    effect: { chemistry: 2, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.chemistry >= 10
                },
                {
                    text: "åŒ–å­¦æœ‰æœºåŒ–å­¦éƒ¨åˆ†å®Œå…¨å¬ä¸æ‡‚",
                    effect: { chemistry: -2, stress: 5 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.subjects.chemistry >= 15
                },
                {
                    text: "åŒ–å­¦å®éªŒåˆ¶å¤‡æˆåŠŸï¼Œäº§ç‡å¾ˆé«˜",
                    effect: { chemistry: 3, teacher: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chemistry >= 20
                },
                {
                    text: "åŒ–å­¦è€ƒè¯•è®¡ç®—é¢˜å•ä½æ¢ç®—é”™è¯¯ï¼Œå…¨é”™",
                    effect: { chemistry: -2, stress: 4 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.subjects.chemistry >= 18
                },
                {
                    text: "åŒ–å­¦è€å¸ˆç”¨ç”Ÿæ´»ä¾‹å­è®²è§£é…¸ç¢±ä¸­å’Œ",
                    effect: { chemistry: 2, energy: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.chemistry >= 12
                },
                {
                    text: "åŒ–å­¦å…ƒç´ å‘¨æœŸè¡¨èƒŒè¯µæ¯”èµ›ï¼Œä½ å¾—äº†ç¬¬äºŒ",
                    effect: { chemistry: 2, classmateA: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chemistry >= 25
                },
                {
                    text: "åŒ–å­¦å®éªŒæŠ¥å‘Šè¢«å½“ä½œä¼˜ç§€èŒƒä¾‹å±•ç¤º",
                    effect: { chemistry: 3, teacher: 5 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.subjects.chemistry >= 30
                },
                {
                    text: "åŒ–å­¦è¯¾ä¸Šé—»åˆ°åˆºæ¿€æ€§æ°”å‘³ï¼Œå¤´æ™•",
                    effect: { chemistry: -1, health: -2, stress: 2 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.subjects.chemistry >= 10
                },
                // ç”Ÿç‰©ç›¸å…³
                {
                    text: "ç”Ÿç‰©è¯¾ä»£è¡¨ä¸»åŠ¨å¸®ä½ å¤ä¹ é—ä¼ å­¦",
                    effect: { biology: 2, classmateA: 2 },
                    type: "good",
                    weight: 8,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "ç”Ÿç‰©å®éªŒæ˜¾å¾®é•œæ“ä½œä¸ç†Ÿç»ƒï¼Œè§†é‡æ¨¡ç³Š",
                    effect: { biology: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.biology >= 10
                },
                {
                    text: "ç”Ÿç‰©è€å¸ˆç”¨åŠ¨ç”»æ¼”ç¤ºç»†èƒåˆ†è£‚ï¼Œå°è±¡æ·±åˆ»",
                    effect: { biology: 3, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.subjects.biology >= 15
                },
                {
                    text: "ç”Ÿç‰©é—ä¼ é¢˜æ¦‚ç‡è®¡ç®—é”™è¯¯ï¼Œç­”æ¡ˆå…¨é”™",
                    effect: { biology: -2, stress: 4 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.biology >= 20
                },
                {
                    text: "ç”Ÿç‰©å®éªŒè§‚å¯Ÿæ¤ç‰©ç»†èƒï¼Œå‘ç°æœ‰è¶£ç°è±¡",
                    effect: { biology: 2, classmateA: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.biology >= 15
                },
                {
                    text: "ç”Ÿç‰©è¯¾ä¸Šè®¨è®ºç”Ÿæ€ç³»ç»Ÿï¼Œä½ å‘è¨€æœ‰æ·±åº¦",
                    effect: { biology: 2, teacher: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.biology >= 25
                },
                {
                    text: "ç”Ÿç‰©è€ƒè¯•å¡«ç©ºé¢˜è®°æ··äº†ä¸“ä¸šæœ¯è¯­",
                    effect: { biology: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.subjects.biology >= 18
                },
                {
                    text: "ç”Ÿç‰©è€å¸ˆæ¨èä½ å‚åŠ ç”Ÿç‰©å¥¥èµ›åŸ¹è®­",
                    effect: { biology: 3, teacher: 5, stress: 5 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.subjects.biology >= 35
                },
                {
                    text: "ç”Ÿç‰©å®éªŒè§£å‰–é’è›™ï¼Œå¿ƒç†å‹åŠ›å¤§",
                    effect: { biology: 1, stress: 5, mental: -2 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.subjects.biology >= 20
                },
                {
                    text: "ç”Ÿç‰©è¯¾ä¸Šå°ç»„åˆä½œå®Œæˆå®éªŒï¼Œæ•ˆç‡å¾ˆé«˜",
                    effect: { biology: 2, classmateA: 2, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                // ç»¼åˆå­¦ä¹ äº‹ä»¶
                {
                    text: "å‘ç°ä¸€æœ¬ç»ç‰ˆå‚è€ƒä¹¦ï¼Œå¦‚è·è‡³å®",
                    effect: { chinese: 1, math: 1, physics: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.money >= 100
                },
                {
                    text: "è‡ªä¹ å®¤ç©ºè°ƒåäº†ï¼Œé—·çƒ­éš¾è€",
                    effect: { energy: -5, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "å›¾ä¹¦é¦†åº§ä½è¢«å ï¼Œåªå¥½å›æ•™å®¤",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "å‘ç°ä¸€ä¸ªè¶…å¥½ç”¨çš„å­¦ä¹ APP",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ å°ç»„è®¨è®ºæ¿€çƒˆï¼Œæ”¶è·å¾ˆå¤š",
                    effect: { math: 1, physics: 1, chemistry: 1, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "è€ƒè¯•å‰ä¸€å¤©å¤ä¹ åˆ°æ·±å¤œï¼Œæ•ˆç‡ä½ä¸‹",
                    effect: { energy: -8, stress: 5 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.week >= 4
                },
                {
                    text: "è¯¾é—´å‘è€å¸ˆè¯·æ•™é—®é¢˜ï¼Œå¾—åˆ°è€å¿ƒè§£ç­”",
                    effect: { teacher: 3, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ è®¡åˆ’è¢«æ‰“ä¹±ï¼Œæ„Ÿåˆ°ç„¦è™‘",
                    effect: { stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æå‰é¢„ä¹ äº†æ–°è¯¾ï¼Œä¸Šè¯¾è½»æ¾å¾ˆå¤š",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "å‘ç°è‡ªå·±çš„ç¬”è®°ç³»ç»Ÿéœ€è¦æ”¹è¿›",
                    effect: { stress: 2 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æ•°å­¦å’Œç‰©ç†éƒ½è€ƒäº†é«˜åˆ†ï¼Œä¿¡å¿ƒå¤§å¢",
                    effect: { math: 2, physics: 2, stress: -5, energy: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.math >= 30 && s.subjects.physics >= 30
                },
                {
                    text: "åŒ–å­¦å’Œç”Ÿç‰©å®éªŒå†²çªï¼Œæ—¶é—´ç´§å¼ ",
                    effect: { chemistry: -1, biology: -1, stress: 4 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.subjects.chemistry >= 15 && s.subjects.biology >= 15
                },
                {
                    text: "è¯­æ–‡å’Œè‹±è¯­ä½œæ–‡éƒ½å†™å¾—ä¸é”™ï¼Œè€å¸ˆè¡¨æ‰¬",
                    effect: { chinese: 2, english: 2, teacher: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chinese >= 25 && s.subjects.english >= 25
                },
                {
                    text: "å­¦ä¹ æ—¶æ‰‹æœºå¹²æ‰°ä¸¥é‡ï¼Œæ•ˆç‡ä½ä¸‹",
                    effect: { energy: -3, stress: 3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æ‰¾åˆ°é€‚åˆè‡ªå·±çš„å­¦ä¹ èŠ‚å¥ï¼Œäº‹åŠåŠŸå€",
                    effect: { energy: 5, stress: -5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆçªç„¶å®£å¸ƒå°æµ‹éªŒï¼Œæªæ‰‹ä¸åŠ",
                    effect: { stress: 5 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶çª—å¤–é£æ™¯å¾ˆç¾ï¼Œå¿ƒæƒ…æ„‰æ‚¦",
                    effect: { stress: -3, energy: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å‘ç°è‡ªå·±çš„é”™é¢˜æœ¬æ•´ç†å¾—å¾ˆä¹±",
                    effect: { stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶çªç„¶åœç”µï¼Œè¢«è¿«ä¼‘æ¯",
                    effect: { energy: 3, stress: 2 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆå¸ƒç½®çš„ä½œä¸šé‡çªç„¶å‡å°‘",
                    effect: { stress: -5, energy: 3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶è¢«åŒå­¦æ‰“æ‰°ï¼Œå¾ˆçƒ¦èº",
                    effect: { stress: 4 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "å‘ç°ä¸€ä¸ªå®‰é™çš„å­¦ä¹ è§’è½ï¼Œæ•ˆç‡æå‡",
                    effect: { energy: 3, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶çªç„¶æƒ³é€šä¸€ä¸ªéš¾é¢˜ï¼Œå¾ˆå…´å¥‹",
                    effect: { energy: 5, stress: -5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆè®²è¯¾å£°éŸ³å¤ªå°ï¼Œå¬ä¸æ¸…",
                    effect: { stress: 3 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„çŸ¥è¯†ä½“ç³»æœ‰æ¼æ´",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å¹½é»˜çš„æ–¹å¼è®²è§£æ¯ç‡¥å†…å®¹",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„ç¬”è®°è®°å¾—å¾ˆè¯¦ç»†",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆçªç„¶æé—®ï¼Œä½ ç­”ä¸ä¸Šæ¥",
                    effect: { stress: 4 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„è¿›æ­¥å¾ˆæ˜æ˜¾",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆå¸ƒç½®çš„ä½œä¸šéœ€è¦æŸ¥å¾ˆå¤šèµ„æ–™",
                    effect: { energy: -3, stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„æ—¶é—´ç®¡ç†æœ‰é—®é¢˜",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å®ç‰©æ¼”ç¤ºæŠ½è±¡æ¦‚å¿µï¼Œç†è§£åŠ æ·±",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„ä¸“æ³¨åŠ›ä¸‹é™",
                    effect: { energy: -2, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆé¼“åŠ±å¤§å®¶å¤šæé—®ï¼Œæ°›å›´å¾ˆå¥½",
                    effect: { stress: -3, energy: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„çŸ¥è¯†é¢å¾ˆçª„",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ€ç»´å¯¼å›¾æ¢³ç†çŸ¥è¯†ï¼Œæ¸…æ™°æ˜äº†",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ–¹æ³•éœ€è¦è°ƒæ•´",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆåˆ†äº«äº†è‡ªå·±çš„å­¦ä¹ ç»å†ï¼Œå¾ˆå—å¯å‘",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„åŸºç¡€ä¸ç‰¢å›º",
                    effect: { stress: 4 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ¸¸æˆçš„æ–¹å¼å¤ä¹ ï¼Œæœ‰è¶£åˆæœ‰æ•ˆ",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„çŸ¥è¯†é—å¿˜å¾ˆå¿«",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å¯¹æ¯”æ³•è®²è§£æ˜“æ··æ·†æ¦‚å¿µï¼Œå°è±¡æ·±åˆ»",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„ç†è§£èƒ½åŠ›æœ‰å¾…æé«˜",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ•…äº‹å¼•å…¥æ–°è¯¾ï¼Œå¸å¼•æ³¨æ„åŠ›",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„è®¡ç®—èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å›¾è¡¨å±•ç¤ºæ•°æ®ï¼Œä¸€ç›®äº†ç„¶",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„é€»è¾‘æ€ç»´éœ€è¦è®­ç»ƒ",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å®éªŒéªŒè¯ç†è®ºï¼ŒåŠ æ·±ç†è§£",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„è®°å¿†åŠ›éœ€è¦æå‡",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨ç±»æ¯”æ³•è®²è§£æŠ½è±¡æ¦‚å¿µï¼Œå®¹æ˜“ç†è§£",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„è¡¨è¾¾èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨åˆ†ç»„è®¨è®ºçš„æ–¹å¼ï¼Œäº’ç›¸å­¦ä¹ ",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„æ—¶é—´åˆ†é…ä¸åˆç†",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ€ç»´è®­ç»ƒé¢˜ï¼Œé”»ç‚¼å¤§è„‘",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ åŠ¨åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æˆåŠŸæ¡ˆä¾‹æ¿€åŠ±å¤§å®¶ï¼Œå……æ»¡å¸Œæœ›",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„è‡ªä¿¡å¿ƒä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨é”™è¯¯æ¡ˆä¾‹åˆ†æï¼Œé¿å…è¸©å‘",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„æŠ—å‹èƒ½åŠ›éœ€è¦æé«˜",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨é˜¶æ®µæ€§ç›®æ ‡è®¾å®šï¼Œæœ‰æˆå°±æ„Ÿ",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ ä¹ æƒ¯éœ€è¦åŸ¹å…»",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ­£å‘åé¦ˆé¼“åŠ±ï¼Œè¿›æ­¥æ˜æ˜¾",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ–¹æ³•éœ€è¦ä¼˜åŒ–",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨çŸ¥è¯†å›¾è°±ä¸²è”çŸ¥è¯†ç‚¹ï¼Œç³»ç»Ÿæ€§å¼º",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ•ˆç‡éœ€è¦æé«˜",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æ€ç»´å¯¼å›¾æ€»ç»“ï¼Œä¸€ç›®äº†ç„¶",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ€åº¦éœ€è¦ç«¯æ­£",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨æˆåŠŸç»éªŒåˆ†äº«ï¼Œå°‘èµ°å¼¯è·¯",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ ç›®æ ‡ä¸æ˜ç¡®",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å¤±è´¥æ•™è®­è­¦ç¤ºï¼Œé¿å…é‡è¹ˆè¦†è¾™",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è®¡åˆ’ä¸åˆ‡å®é™…",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨ç§‘å­¦æ–¹æ³•æŒ‡å¯¼ï¼Œäº‹åŠåŠŸå€",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ ç¯å¢ƒä¸ä½³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å¿ƒç†è¾…å¯¼ç¼“è§£ç„¦è™‘ï¼Œå¿ƒæ€å¹³ç¨³",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ èµ„æºä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ ç­–ç•¥æŒ‡å¯¼ï¼Œæå‡æ•ˆç‡",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ–¹æ³•ä¸é€‚åˆ",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ æŠ€å·§åˆ†äº«ï¼Œå¿«é€Ÿæå‡",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ åŠ¨åŠ›æ¥æºå•ä¸€",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ ç›®æ ‡åˆ†è§£ï¼Œå¾ªåºæ¸è¿›",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ åé¦ˆä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è¯„ä¼°æ–¹æ³•ï¼ŒåŠæ—¶è°ƒæ•´",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ ç›‘æ§ä¸å¤Ÿ",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ åæ€æŒ‡å¯¼ï¼ŒæŒç»­æ”¹è¿›",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è¿ç§»èƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ åº”ç”¨æŒ‡å¯¼ï¼Œå­¦ä»¥è‡´ç”¨",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ åˆ›æ–°èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ æ‹“å±•æŒ‡å¯¼ï¼Œå¼€é˜”è§†é‡",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ‰¹åˆ¤æ€§æ€ç»´å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ æ€è¾¨æŒ‡å¯¼ï¼Œæå‡æ€ç»´",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ åˆä½œèƒ½åŠ›å·®",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ åä½œæŒ‡å¯¼ï¼Œå›¢é˜Ÿè¿›æ­¥",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æ²Ÿé€šèƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è¡¨è¾¾æŒ‡å¯¼ï¼Œæ¸…æ™°ä¼ è¾¾",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ é¢†å¯¼èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ ç»„ç»‡æŒ‡å¯¼ï¼Œæå‡æ•ˆç‡",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ é€‚åº”èƒ½åŠ›å·®",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è°ƒæ•´æŒ‡å¯¼ï¼Œçµæ´»åº”å¯¹",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ æŠ—æŒ«æŠ˜èƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ åšæŒæŒ‡å¯¼ï¼Œå…‹æœå›°éš¾",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘ç®¡ç†èƒ½åŠ›å·®",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è‡ªå¾‹æŒ‡å¯¼ï¼Œæå‡è‡ªåˆ¶åŠ›",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘æ¿€åŠ±èƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è‡ªä¿¡æŒ‡å¯¼ï¼Œå¢å¼ºä¿¡å¿ƒ",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘åæ€èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ æ€»ç»“æŒ‡å¯¼ï¼Œæå‡è®¤çŸ¥",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘è¯„ä¼°èƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è¯Šæ–­æŒ‡å¯¼ï¼Œç²¾å‡†æ”¹è¿›",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘è°ƒèŠ‚èƒ½åŠ›å·®",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ ä¼˜åŒ–æŒ‡å¯¼ï¼ŒæŒç»­æå‡",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘å‘å±•èƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ è§„åˆ’æŒ‡å¯¼ï¼Œæ˜ç¡®æ–¹å‘",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘å®ç°èƒ½åŠ›å¼±",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ ç›®æ ‡æŒ‡å¯¼ï¼Œæ¿€å‘æ½œèƒ½",
                    effect: { energy: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å­¦ä¹ æ—¶å‘ç°è‡ªå·±çš„å­¦ä¹ è‡ªæˆ‘è¶…è¶Šèƒ½åŠ›ä¸è¶³",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆç”¨å­¦ä¹ æ„¿æ™¯æŒ‡å¯¼ï¼Œè¿½æ±‚å“è¶Š",
                    effect: { energy: 3, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                }
            ],

            relationship: [

                {
                    text: "æœ‹å‹ä¸»åŠ¨å€Ÿä½ è¯¾å ‚ç¬”è®°ï¼Œå­—è¿¹å·¥æ•´",
                    effect: { classmateA: 3, stress: -2 },
                    type: "good",
                    weight: 8,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "å’Œæœ‹å‹ä¸€èµ·åˆ·é¢˜ï¼Œæ•ˆç‡ç¿»å€",
                    effect: { classmateA: 2, math: 1, energy: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.subjects.math >= 10
                },
                {
                    text: "æœ‹å‹å‘ç°ä½ æ¼è®°äº†é‡ç‚¹ï¼ŒåŠæ—¶æé†’",
                    effect: { classmateA: 4, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„è§£é¢˜æ€è·¯å¾ˆç‹¬ç‰¹ï¼Œè®©ä½ è±ç„¶å¼€æœ—",
                    effect: { classmateA: 3, physics: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.physics >= 15
                },
                {
                    text: "æœ‹å‹çº¦ä½ å‘¨æœ«ä¸€èµ·å¤ä¹ ï¼Œä½ ç­”åº”äº†",
                    effect: { classmateA: 2, stress: 2 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„è‹±è¯­ä½œæ–‡è¢«è€å¸ˆè¡¨æ‰¬ï¼Œä½ ä¸ºä»–é«˜å…´",
                    effect: { classmateA: 3, english: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿç—…æ—¶å¸®å¿™æŠ„äº†ç¬”è®°",
                    effect: { classmateA: 5, stress: -5 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.health < 70
                },
                {
                    text: "æœ‹å‹çš„åŒ–å­¦å®éªŒæ•°æ®ç»™ä½ å‚è€ƒ",
                    effect: { classmateA: 2, chemistry: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chemistry >= 10
                },
                {
                    text: "æœ‹å‹æé†’ä½ æ˜å¤©æœ‰å°æµ‹",
                    effect: { classmateA: 3, stress: 3 },
                    type: "neutral",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„ç”Ÿç‰©ç¬”è®°æœ‰å½©è‰²å›¾è§£ï¼Œå¾ˆæ¸…æ™°",
                    effect: { classmateA: 2, biology: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ æ¯”èµ›èƒŒå•è¯ï¼Œè¾“äº†è¯·å¥¶èŒ¶",
                    effect: { classmateA: 2, english: 1, stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„ä½œæ–‡æ€è·¯å¯å‘äº†ä½ ",
                    effect: { classmateA: 3, chinese: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 15
                },
                {
                    text: "æœ‹å‹çš„ç‰©ç†é”™é¢˜æœ¬å€Ÿä½ å‚è€ƒ",
                    effect: { classmateA: 2, physics: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.physics >= 10
                },
                {
                    text: "æœ‹å‹çš„æ•°å­¦ç«èµ›é¢˜è§£æ³•å¾ˆå·§å¦™",
                    effect: { classmateA: 3, math: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.math >= 25
                },
                {
                    text: "æœ‹å‹çš„ç”Ÿç‰©å®éªŒæŠ¥å‘Šå†™å¾—è¯¦ç»†",
                    effect: { classmateA: 2, biology: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹çš„è¯­æ–‡é˜…è¯»ç¬”è®°å¾ˆæœ‰è§è§£",
                    effect: { classmateA: 2, chinese: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chinese >= 20
                },
                {
                    text: "æœ‹å‹çš„è‹±è¯­å¬åŠ›æŠ€å·§å¾ˆå®ç”¨",
                    effect: { classmateA: 2, english: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹çš„åŒ–å­¦æ–¹ç¨‹å¼è®°å¿†æ³•å¾ˆæœ‰æ•ˆ",
                    effect: { classmateA: 2, chemistry: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.chemistry >= 15
                },
                {
                    text: "æœ‹å‹çš„å†å²æ—¶é—´è½´æ•´ç†å¾—å¾ˆæ¸…æ™°",
                    effect: { classmateA: 2, history: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„åœ°ç†åœ°å›¾å†Œå€Ÿä½ å¤ä¹ ",
                    effect: { classmateA: 2, geography: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 30
                },

                {
                    text: "æœ‹å‹åˆ†äº«äº†å–œæ¬¢çš„éŸ³ä¹ï¼Œå¾ˆå¥½å¬",
                    effect: { classmateA: 2, stress: -3 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çº¦ä½ ä¸€èµ·å»é£Ÿå ‚åƒé¥­",
                    effect: { classmateA: 2, energy: 3 },
                    type: "good",
                    weight: 9,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„ç¬‘è¯è®©ä½ ç¬‘å‡ºå£°",
                    effect: { classmateA: 2, stress: -5 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹å€Ÿä½ å……ç”µå®ï¼Œæ‰‹æœºæ²¡ç”µäº†",
                    effect: { classmateA: 3, stress: -2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹å¸®ä½ å äº†å›¾ä¹¦é¦†åº§ä½",
                    effect: { classmateA: 3, stress: -3 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„é›¨ä¼å€Ÿä½ ç”¨ï¼Œä¸‹é›¨äº†",
                    effect: { classmateA: 3, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„çº¸å·¾å€Ÿä½ ç”¨ï¼Œæ‰“äº†ä¸ªå–·åš",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„åˆ›å¯è´´å€Ÿä½ ç”¨ï¼Œæ“¦ä¼¤äº†",
                    effect: { classmateA: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„æ©¡çš®å€Ÿä½ ç”¨ï¼Œç¬”æ²¡å¢¨äº†",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„ä¿®æ­£å¸¦å€Ÿä½ ç”¨ï¼Œå†™é”™äº†",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„å°ºå­å€Ÿä½ ç”¨ï¼Œç”»å›¾éœ€è¦",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„åœ†è§„å€Ÿä½ ç”¨ï¼Œå‡ ä½•é¢˜éœ€è¦",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„é‡è§’å™¨å€Ÿä½ ç”¨ï¼Œè§’åº¦æµ‹é‡",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„è®¡ç®—å™¨å€Ÿä½ ç”¨ï¼Œå¤æ‚è®¡ç®—",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„è§å…‰ç¬”å€Ÿä½ ç”¨ï¼Œåˆ’é‡ç‚¹",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„ä¾¿åˆ©è´´å€Ÿä½ ç”¨ï¼Œè®°ä¸´æ—¶äº‹é¡¹",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„è®¢ä¹¦æœºå€Ÿä½ ç”¨ï¼Œæ•´ç†èµ„æ–™",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„æ‰“å­”å™¨å€Ÿä½ ç”¨ï¼Œåšç¬”è®°",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„æ–‡ä»¶å¤¹å€Ÿä½ ç”¨ï¼Œåˆ†ç±»è¯•å·",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„ä¹¦ç«‹å€Ÿä½ ç”¨ï¼Œæ•´ç†ä¹¦æœ¬",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },

                {
                    text: "æœ‹å‹åœ¨ä½ ä½è½æ—¶å®‰æ…°ä½ ",
                    effect: { classmateA: 4, stress: -8, mental: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.stress > 40
                },
                {
                    text: "æœ‹å‹ä¸ºä½ åº†ç¥ç”Ÿæ—¥ï¼Œé€äº†å°ç¤¼ç‰©",
                    effect: { classmateA: 5, stress: -5, energy: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è€ƒè¯•å¤±åˆ©æ—¶é¼“åŠ±ä½ ",
                    effect: { classmateA: 3, stress: -5, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åˆ†äº«äº†è‡ªå·±çš„çƒ¦æ¼ï¼Œä½ å€¾å¬äº†",
                    effect: { classmateA: 3, stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¾©æŠ¤",
                    effect: { classmateA: 5, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿç—…æ—¶å‘æ¶ˆæ¯å…³å¿ƒ",
                    effect: { classmateA: 3, stress: -2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.health < 80
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç†¬å¤œæ—¶æé†’ä½ æ—©ç‚¹ä¼‘æ¯",
                    effect: { classmateA: 2, stress: -1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.energy < 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å‹åŠ›å¤§æ—¶é™ªä½ æ•£æ­¥",
                    effect: { classmateA: 3, stress: -6, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.stress > 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶ç»™ä½ å»ºè®®",
                    effect: { classmateA: 3, stress: -3, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶çœŸå¿ƒä¸ºä½ é«˜å…´",
                    effect: { classmateA: 4, stress: -3, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶è¯´'ä¸‹æ¬¡ä¼šæ›´å¥½'",
                    effect: { classmateA: 3, stress: -4, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å­¤ç‹¬æ—¶é™ªä½ èŠå¤©",
                    effect: { classmateA: 3, stress: -4, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç„¦è™‘æ—¶æ•™ä½ æ·±å‘¼å¸",
                    effect: { classmateA: 2, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.stress > 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±çœ æ—¶åˆ†äº«åŠ©çœ éŸ³ä¹",
                    effect: { classmateA: 2, stress: -3, energy: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.energy < 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¥¥é¥¿æ—¶åˆ†ä½ é›¶é£Ÿ",
                    effect: { classmateA: 2, energy: 3, stress: -2 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å£æ¸´æ—¶åˆ†ä½ æ°´",
                    effect: { classmateA: 2, energy: 2, stress: -1 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å†·æ—¶å€Ÿä½ å¤–å¥—",
                    effect: { classmateA: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ çƒ­æ—¶å€Ÿä½ æ‰‡å­",
                    effect: { classmateA: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å›°æ—¶å€Ÿä½ é£æ²¹ç²¾",
                    effect: { classmateA: 2, energy: 2, stress: -1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤´ç–¼æ—¶å€Ÿä½ æ­¢ç—›è¯",
                    effect: { classmateA: 2, stress: -3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => true
                },

                {
                    text: "æœ‹å‹è¯¯ä¼šä½ ï¼Œè¯´äº†æ°”è¯",
                    effect: { classmateA: -5, stress: 8 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "ä½ å’Œæœ‹å‹å› ä¸ºå°äº‹äº‰åµ",
                    effect: { classmateA: -3, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„ç©ç¬‘å¼€è¿‡äº†ï¼Œä½ æ„Ÿåˆ°ä¸èˆ’æœ",
                    effect: { classmateA: -2, stress: 3 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹å¿˜è®°ç­”åº”ä½ çš„äº‹ï¼Œä½ æœ‰ç‚¹å¤±æœ›",
                    effect: { classmateA: -2, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "ä½ å’Œæœ‹å‹ç«äº‰åŒä¸€ä¸ªå¥–é¡¹ï¼Œæ°”æ°›ç´§å¼ ",
                    effect: { classmateA: -3, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨èƒŒåè¯´ä½ åè¯ï¼Œè¢«ä½ å¬åˆ°",
                    effect: { classmateA: -8, stress: 10, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "ä½ å’Œæœ‹å‹å› ä¸ºè§‚ç‚¹ä¸åŒè€Œäº‰è®º",
                    effect: { classmateA: -2, stress: 4 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹å€Ÿä½ é’±å´è¿Ÿè¿Ÿä¸è¿˜",
                    effect: { classmateA: -4, stress: 5, money: -50 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¿™æ—¶æ‰“æ‰°ä½ ï¼Œä½ æœ‰ç‚¹çƒ¦èº",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„æ‰¿è¯ºæ²¡åšåˆ°ï¼Œä½ æ„Ÿåˆ°å¤±æœ›",
                    effect: { classmateA: -3, stress: 4 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "ä½ å’Œæœ‹å‹å†·æˆ˜äº†ï¼Œäº’ä¸ç†ç¬",
                    effect: { classmateA: -5, stress: 6, mental: -1 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹å‘ä½ é“æ­‰ï¼Œæ‰¿è®¤é”™è¯¯",
                    effect: { classmateA: 4, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "ä½ ä¸»åŠ¨å’Œæœ‹å‹å’Œè§£ï¼Œå…³ç³»ä¿®å¤",
                    effect: { classmateA: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 10
                },
                {
                    text: "æœ‹å‹é€ä½ å°ç¤¼ç‰©è¡¨ç¤ºæ­‰æ„",
                    effect: { classmateA: 4, stress: -4 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿæ—¥æ—¶ä¸»åŠ¨å’Œå¥½",
                    effect: { classmateA: 6, stress: -6 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 15
                },

                {
                    text: "æœ‹å‹é‚€è¯·ä½ å‚åŠ ç­çº§ç¯®çƒèµ›",
                    effect: { classmateA: 3, energy: -5, stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ ç¤¾å›¢æ´»åŠ¨",
                    effect: { classmateA: 3, energy: -3, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ ç»„é˜Ÿå‚åŠ çŸ¥è¯†ç«èµ›",
                    effect: { classmateA: 4, stress: 5, energy: -3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·æ’ç»ƒæ–‡è‰ºæ±‡æ¼”",
                    effect: { classmateA: 3, stress: 3, energy: -4 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·åšå¿—æ„¿è€…æ´»åŠ¨",
                    effect: { classmateA: 4, stress: -3, energy: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‡†å¤‡ç­çº§é»‘æ¿æŠ¥",
                    effect: { classmateA: 3, stress: 2, energy: -3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ è¿åŠ¨ä¼š",
                    effect: { classmateA: 3, energy: -8, stress: 2 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‡†å¤‡æ¼”è®²æ¯”èµ›",
                    effect: { classmateA: 4, stress: 5, energy: -4 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·ç­–åˆ’ç­çº§æ´»åŠ¨",
                    effect: { classmateA: 3, stress: 3, energy: -3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ è¾©è®ºèµ›",
                    effect: { classmateA: 4, stress: 6, energy: -5 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ åˆå”±æ¯”èµ›",
                    effect: { classmateA: 3, stress: 2, energy: -3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ ç¾æœ¯å±•è§ˆ",
                    effect: { classmateA: 3, stress: -2, energy: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ ç§‘æŠ€åˆ¶ä½œ",
                    effect: { classmateA: 4, stress: 3, energy: -4 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ æ•°å­¦å»ºæ¨¡",
                    effect: { classmateA: 4, stress: 5, energy: -5 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ ç‰©ç†å®éªŒç«èµ›",
                    effect: { classmateA: 4, stress: 4, energy: -4 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },

                {
                    text: "æœ‹å‹åœ¨ä½ è½¬å­¦æ—¶é€ä½ çºªå¿µå†Œ",
                    effect: { classmateA: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æ¯•ä¸šæ—¶é€ä½ æ¯•ä¸šç¤¼ç‰©",
                    effect: { classmateA: 5, stress: -3, energy: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.week >= 12
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è·å¥–æ—¶ç¬¬ä¸€ä¸ªç¥è´ºä½ ",
                    effect: { classmateA: 4, stress: -4, energy: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è½é€‰æ—¶å®‰æ…°ä½ ",
                    effect: { classmateA: 4, stress: -6, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿç—…æ—¶å¸®ä½ è¯·å‡",
                    effect: { classmateA: 5, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.health < 70
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¿˜å¸¦ä½œä¸šæ—¶å¸®ä½ è§£é‡Š",
                    effect: { classmateA: 3, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿Ÿåˆ°æ—¶å¸®ä½ æ‰“æ©æŠ¤",
                    effect: { classmateA: 3, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«è€å¸ˆè¯¯ä¼šæ—¶ä¸ºä½ ä½œè¯",
                    effect: { classmateA: 5, stress: -5 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¯´è¯",
                    effect: { classmateA: 4, stress: -4 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å­¤ç«‹æ—¶ä¸»åŠ¨æ¥è¿‘ä½ ",
                    effect: { classmateA: 6, stress: -8, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ¬ºè´Ÿæ—¶ç«™å‡ºæ¥ä¿æŠ¤ä½ ",
                    effect: { classmateA: 7, stress: -6, mental: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å˜²ç¬‘æ—¶ä¸ºä½ è¾©æŠ¤",
                    effect: { classmateA: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«è¯¯è§£æ—¶ä¸ºä½ æ¾„æ¸…",
                    effect: { classmateA: 4, stress: -4 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å¿½è§†æ—¶æ³¨æ„åˆ°ä½ ",
                    effect: { classmateA: 3, stress: -3, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å†·è½æ—¶é‚€è¯·ä½ åŠ å…¥",
                    effect: { classmateA: 4, stress: -4, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },

                {
                    text: "æœ‹å‹å’Œä½ ç«äº‰åŒä¸€ä¸ªæ’åï¼Œå‹åŠ›å¾ˆå¤§",
                    effect: { classmateA: -2, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹çš„æˆç»©è¶…è¿‡ä½ ï¼Œä½ æ„Ÿåˆ°å¤±è½",
                    effect: { classmateA: -1, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹çš„è§£é¢˜é€Ÿåº¦æ¯”ä½ å¿«ï¼Œä½ æœ‰ç‚¹ç€æ€¥",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„ç¬”è®°æ¯”ä½ è¯¦ç»†ï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateA: -1, stress: 2 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ è¿›åº¦æ¯”ä½ å¿«ï¼Œä½ æœ‰ç‚¹ç„¦è™‘",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„é”™é¢˜æœ¬æ¯”ä½ åšï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateA: -1, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ æ—¶é—´æ¯”ä½ é•¿ï¼Œä½ æœ‰ç‚¹ç€æ€¥",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹çš„æ¨¡æ‹Ÿè€ƒåˆ†æ•°æ¯”ä½ é«˜ï¼Œä½ æ„Ÿåˆ°å¤±è½",
                    effect: { classmateA: -2, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹çš„è§£é¢˜æ–¹æ³•æ¯”ä½ å·§å¦™ï¼Œä½ æœ‰ç‚¹æ²®ä¸§",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ æ•ˆç‡æ¯”ä½ é«˜ï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateA: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },

                {
                    text: "æœ‹å‹å’Œä½ åˆ†äº«äº†ç§˜å¯†",
                    effect: { classmateA: 5, stress: -2, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹å’Œä½ èŠåˆ°æ·±å¤œï¼Œå…³ç³»æ›´è¿‘",
                    effect: { classmateA: 4, energy: -5, stress: -3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·è§„åˆ’æœªæ¥",
                    effect: { classmateA: 4, stress: -2, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹å’Œä½ çº¦å®šè€ƒä¸ŠåŒä¸€æ‰€å¤§å­¦",
                    effect: { classmateA: 6, stress: 5, energy: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 55
                },
                {
                    text: "æœ‹å‹å’Œä½ æˆä¸ºæœ€å¥½çš„æœ‹å‹",
                    effect: { classmateA: 8, stress: -5, mental: 2 },
                    type: "good",
                    weight: 2,
                    condition: (s) => s.relationships.classmateA >= 60
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿæ—¥æ—¶ä¸ºä½ å‡†å¤‡æƒŠå–œ",
                    effect: { classmateA: 6, stress: -8, energy: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é‡è¦æ—¶åˆ»é™ªä¼´ä½ ",
                    effect: { classmateA: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ éœ€è¦æ—¶æ€»æ˜¯å‡ºç°",
                    effect: { classmateA: 4, stress: -4, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹çš„ç†è§£è®©ä½ æ„Ÿåˆ°æ¸©æš–",
                    effect: { classmateA: 3, stress: -3, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹çš„ä¿¡ä»»è®©ä½ æ„Ÿåˆ°è´£ä»»",
                    effect: { classmateA: 3, stress: 2, mental: 1 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },

                {
                    text: "æœ‹å‹åœ¨ä½ å›°éš¾æ—¶çŠ¹è±«æ˜¯å¦å¸®å¿™",
                    effect: { classmateA: -3, stress: 4 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æ±‚åŠ©æ—¶æ‰¾å€Ÿå£æ¨è„±",
                    effect: { classmateA: -4, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶è¡¨ç°å‡ºå«‰å¦’",
                    effect: { classmateA: -3, stress: 3, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶è¡¨ç°å‡ºè½»è§†",
                    effect: { classmateA: -4, stress: 5, mental: -1 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰ç‚«è€€æˆç»©",
                    effect: { classmateA: -2, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰è´¬ä½ä½ çš„åŠªåŠ›",
                    effect: { classmateA: -3, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰ä¼ æ’­ä½ çš„è°£è¨€",
                    effect: { classmateA: -6, stress: 8, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ èƒŒåè¯´ä½ çš„åè¯",
                    effect: { classmateA: -5, stress: 6, mental: -1 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ä¸çŸ¥æƒ…æ—¶åˆ©ç”¨ä½ ",
                    effect: { classmateA: -7, stress: 7, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ä¿¡ä»»æ—¶èƒŒå›ä½ ",
                    effect: { classmateA: -8, stress: 10, mental: -3 },
                    type: "bad",
                    weight: 2,
                    condition: (s) => s.relationships.classmateA >= 50
                },


                {
                    text: "æœ‹å‹ä¸»åŠ¨æ‰¾ä½ è°ˆå¿ƒï¼ŒåŒ–è§£è¯¯ä¼š",
                    effect: { classmateA: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹å†™ä¿¡å‘ä½ é“æ­‰ï¼Œæƒ…çœŸæ„åˆ‡",
                    effect: { classmateA: 6, stress: -6, mental: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹é€ä½ äº²æ‰‹åšçš„ç¤¼ç‰©è¡¨ç¤ºæ­‰æ„",
                    effect: { classmateA: 5, stress: -4 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿæ—¥æ—¶ä¸»åŠ¨å’Œå¥½",
                    effect: { classmateA: 7, stress: -7 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 15
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å›°éš¾æ—¶ä¼¸å‡ºæ´æ‰‹ï¼Œå…³ç³»ä¿®å¤",
                    effect: { classmateA: 6, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶çœŸå¿ƒç¥è´ºï¼Œå†°é‡Šå‰å«Œ",
                    effect: { classmateA: 5, stress: -4 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶å®‰æ…°ä½ ï¼Œé‡å½’äºå¥½",
                    effect: { classmateA: 5, stress: -6, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 20
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¯´è¯ï¼Œå…³ç³»ç¼“å’Œ",
                    effect: { classmateA: 4, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å­¤ç«‹æ—¶æ¥è¿‘ä½ ï¼Œå‹è°Šé‡å»º",
                    effect: { classmateA: 6, stress: -5, mental: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 15
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ¬ºè´Ÿæ—¶ä¿æŠ¤ä½ ï¼Œå‹è°ŠåŠ æ·±",
                    effect: { classmateA: 7, stress: -6, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 30
                },


                {
                    text: "æœ‹å‹åœ¨ä½ æœ€éœ€è¦æ—¶å‡ºç°ï¼Œæˆä¸ºçŸ¥å·±",
                    effect: { classmateA: 8, stress: -8, mental: 3 },
                    type: "good",
                    weight: 2,
                    condition: (s) => s.relationships.classmateA >= 55
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶æŒ‡å¼•ä½ ï¼Œæˆä¸ºå¯¼å¸ˆ",
                    effect: { classmateA: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è·Œå€’æ—¶æ‰¶èµ·ä½ ï¼Œæˆä¸ºä¾é ",
                    effect: { classmateA: 7, stress: -7, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 55
                }, {
                    text: "æœ‹å‹çš„åœ°ç†åœ°å›¾å†Œå€Ÿä½ å¤ä¹ ï¼Œç”»æ»¡äº†é‡ç‚¹",
                    effect: { classmateB: 3, geography: 1, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹çš„å†å²æ—¶é—´è½´æ•´ç†å¾—éå¸¸æ¸…æ™°",
                    effect: { classmateB: 2, history: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹çš„è¯­æ–‡é˜…è¯»ç†è§£æŠ€å·§å¾ˆå®ç”¨",
                    effect: { classmateB: 2, chinese: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 15
                },
                {
                    text: "æœ‹å‹çš„è‹±è¯­ä½œæ–‡æ¨¡æ¿å€Ÿä½ å‚è€ƒ",
                    effect: { classmateB: 3, english: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹çš„åŒ–å­¦å®éªŒæŠ¥å‘Šå†™å¾—è¯¦ç»†",
                    effect: { classmateB: 2, chemistry: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chemistry >= 10
                },
                {
                    text: "æœ‹å‹çš„ç”Ÿç‰©ç¬”è®°æœ‰æ‰‹ç»˜å›¾è§£",
                    effect: { classmateB: 2, biology: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹çš„ç‰©ç†é”™é¢˜æœ¬å€Ÿä½ å‚è€ƒ",
                    effect: { classmateB: 2, physics: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.subjects.physics >= 10
                },
                {
                    text: "æœ‹å‹çš„æ•°å­¦ç«èµ›é¢˜è§£æ³•å¾ˆå·§å¦™",
                    effect: { classmateB: 3, math: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.math >= 25
                },
                {
                    text: "æœ‹å‹çš„è‹±è¯­å¬åŠ›æŠ€å·§å¾ˆå®ç”¨",
                    effect: { classmateB: 2, english: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹çš„è¯­æ–‡ä½œæ–‡æ€è·¯å¯å‘äº†ä½ ",
                    effect: { classmateB: 3, chinese: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.subjects.chinese >= 20
                },

                {
                    text: "æœ‹å‹åˆ†äº«äº†å–œæ¬¢çš„ç”µå½±ï¼Œå¾ˆå¥½çœ‹",
                    effect: { classmateB: 2, stress: -3 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çº¦ä½ ä¸€èµ·å»å›¾ä¹¦é¦†è‡ªä¹ ",
                    effect: { classmateB: 2, energy: -2, stress: -1 },
                    type: "good",
                    weight: 9,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹çš„å†·ç¬‘è¯è®©ä½ ç¬‘å‡ºå£°",
                    effect: { classmateB: 2, stress: -5 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹å€Ÿä½ å……ç”µå®ï¼Œæ‰‹æœºæ²¡ç”µäº†",
                    effect: { classmateB: 3, stress: -2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹å¸®ä½ å äº†è‡ªä¹ å®¤åº§ä½",
                    effect: { classmateB: 3, stress: -3 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹çš„é›¨ä¼å€Ÿä½ ç”¨ï¼Œä¸‹é›¨äº†",
                    effect: { classmateB: 3, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„çº¸å·¾å€Ÿä½ ç”¨ï¼Œæ‰“äº†ä¸ªå–·åš",
                    effect: { classmateB: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„åˆ›å¯è´´å€Ÿä½ ç”¨ï¼Œæ“¦ä¼¤äº†",
                    effect: { classmateB: 2, stress: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„æ©¡çš®å€Ÿä½ ç”¨ï¼Œç¬”æ²¡å¢¨äº†",
                    effect: { classmateB: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹çš„ä¿®æ­£å¸¦å€Ÿä½ ç”¨ï¼Œå†™é”™äº†",
                    effect: { classmateB: 2, stress: -1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ä½è½æ—¶å®‰æ…°ä½ ",
                    effect: { classmateB: 4, stress: -8, mental: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.stress > 40
                },
                {
                    text: "æœ‹å‹ä¸ºä½ åº†ç¥ç”Ÿæ—¥ï¼Œé€äº†å°ç¤¼ç‰©",
                    effect: { classmateB: 5, stress: -5, energy: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è€ƒè¯•å¤±åˆ©æ—¶é¼“åŠ±ä½ ",
                    effect: { classmateB: 3, stress: -5, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åˆ†äº«äº†è‡ªå·±çš„çƒ¦æ¼ï¼Œä½ å€¾å¬äº†",
                    effect: { classmateB: 3, stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¾©æŠ¤",
                    effect: { classmateB: 5, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿç—…æ—¶å‘æ¶ˆæ¯å…³å¿ƒ",
                    effect: { classmateB: 3, stress: -2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.health < 80
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç†¬å¤œæ—¶æé†’ä½ æ—©ç‚¹ä¼‘æ¯",
                    effect: { classmateB: 2, stress: -1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.energy < 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å‹åŠ›å¤§æ—¶é™ªä½ æ•£æ­¥",
                    effect: { classmateB: 3, stress: -6, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.stress > 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶ç»™ä½ å»ºè®®",
                    effect: { classmateB: 3, stress: -3, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶çœŸå¿ƒä¸ºä½ é«˜å…´",
                    effect: { classmateB: 4, stress: -3, energy: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹è¯¯ä¼šä½ ï¼Œè¯´äº†æ°”è¯",
                    effect: { classmateB: -5, stress: 8 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "ä½ å’Œæœ‹å‹å› ä¸ºå°äº‹äº‰åµ",
                    effect: { classmateB: -3, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹çš„ç©ç¬‘å¼€è¿‡äº†ï¼Œä½ æ„Ÿåˆ°ä¸èˆ’æœ",
                    effect: { classmateB: -2, stress: 3 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹å¿˜è®°ç­”åº”ä½ çš„äº‹ï¼Œä½ æœ‰ç‚¹å¤±æœ›",
                    effect: { classmateB: -2, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "ä½ å’Œæœ‹å‹ç«äº‰åŒä¸€ä¸ªå¥–é¡¹ï¼Œæ°”æ°›ç´§å¼ ",
                    effect: { classmateB: -3, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨èƒŒåè¯´ä½ åè¯ï¼Œè¢«ä½ å¬åˆ°",
                    effect: { classmateB: -8, stress: 10, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "ä½ å’Œæœ‹å‹å› ä¸ºè§‚ç‚¹ä¸åŒè€Œäº‰è®º",
                    effect: { classmateB: -2, stress: 4 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹å€Ÿä½ é’±å´è¿Ÿè¿Ÿä¸è¿˜",
                    effect: { classmateB: -4, stress: 5, money: -50 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¿™æ—¶æ‰“æ‰°ä½ ï¼Œä½ æœ‰ç‚¹çƒ¦èº",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹çš„æ‰¿è¯ºæ²¡åšåˆ°ï¼Œä½ æ„Ÿåˆ°å¤±æœ›",
                    effect: { classmateB: -3, stress: 4 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹é‚€è¯·ä½ å‚åŠ ç­çº§ç¯®çƒèµ›",
                    effect: { classmateB: 3, energy: -5, stress: 2 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ ç¤¾å›¢æ´»åŠ¨",
                    effect: { classmateB: 3, energy: -3, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ ç»„é˜Ÿå‚åŠ çŸ¥è¯†ç«èµ›",
                    effect: { classmateB: 4, stress: 5, energy: -3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·æ’ç»ƒæ–‡è‰ºæ±‡æ¼”",
                    effect: { classmateB: 3, stress: 3, energy: -4 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·åšå¿—æ„¿è€…æ´»åŠ¨",
                    effect: { classmateB: 4, stress: -3, energy: -2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‡†å¤‡ç­çº§é»‘æ¿æŠ¥",
                    effect: { classmateB: 3, stress: 2, energy: -3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ è¿åŠ¨ä¼š",
                    effect: { classmateB: 3, energy: -8, stress: 2 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‡†å¤‡æ¼”è®²æ¯”èµ›",
                    effect: { classmateB: 4, stress: 5, energy: -4 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·ç­–åˆ’ç­çº§æ´»åŠ¨",
                    effect: { classmateB: 3, stress: 3, energy: -3 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·å‚åŠ è¾©è®ºèµ›",
                    effect: { classmateB: 4, stress: 6, energy: -5 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è½¬å­¦æ—¶é€ä½ çºªå¿µå†Œ",
                    effect: { classmateB: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æ¯•ä¸šæ—¶é€ä½ æ¯•ä¸šç¤¼ç‰©",
                    effect: { classmateB: 5, stress: -3, energy: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.week >= 12
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è·å¥–æ—¶ç¬¬ä¸€ä¸ªç¥è´ºä½ ",
                    effect: { classmateB: 4, stress: -4, energy: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è½é€‰æ—¶å®‰æ…°ä½ ",
                    effect: { classmateB: 4, stress: -6, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿç—…æ—¶å¸®ä½ è¯·å‡",
                    effect: { classmateB: 5, stress: -3 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.health < 70
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¿˜å¸¦ä½œä¸šæ—¶å¸®ä½ è§£é‡Š",
                    effect: { classmateB: 3, stress: -2 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿Ÿåˆ°æ—¶å¸®ä½ æ‰“æ©æŠ¤",
                    effect: { classmateB: 3, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«è€å¸ˆè¯¯ä¼šæ—¶ä¸ºä½ ä½œè¯",
                    effect: { classmateB: 5, stress: -5 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¯´è¯",
                    effect: { classmateB: 4, stress: -4 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å­¤ç«‹æ—¶ä¸»åŠ¨æ¥è¿‘ä½ ",
                    effect: { classmateB: 6, stress: -8, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹å’Œä½ ç«äº‰åŒä¸€ä¸ªæ’åï¼Œå‹åŠ›å¾ˆå¤§",
                    effect: { classmateB: -2, stress: 5 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹çš„æˆç»©è¶…è¿‡ä½ ï¼Œä½ æ„Ÿåˆ°å¤±è½",
                    effect: { classmateB: -1, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹çš„è§£é¢˜é€Ÿåº¦æ¯”ä½ å¿«ï¼Œä½ æœ‰ç‚¹ç€æ€¥",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹çš„ç¬”è®°æ¯”ä½ è¯¦ç»†ï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateB: -1, stress: 2 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ è¿›åº¦æ¯”ä½ å¿«ï¼Œä½ æœ‰ç‚¹ç„¦è™‘",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹çš„é”™é¢˜æœ¬æ¯”ä½ åšï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateB: -1, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ æ—¶é—´æ¯”ä½ é•¿ï¼Œä½ æœ‰ç‚¹ç€æ€¥",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹çš„æ¨¡æ‹Ÿè€ƒåˆ†æ•°æ¯”ä½ é«˜ï¼Œä½ æ„Ÿåˆ°å¤±è½",
                    effect: { classmateB: -2, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹çš„è§£é¢˜æ–¹æ³•æ¯”ä½ å·§å¦™ï¼Œä½ æœ‰ç‚¹æ²®ä¸§",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹çš„å¤ä¹ æ•ˆç‡æ¯”ä½ é«˜ï¼Œä½ æ„Ÿåˆ°å‹åŠ›",
                    effect: { classmateB: -1, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹å’Œä½ åˆ†äº«äº†ç§˜å¯†",
                    effect: { classmateB: 5, stress: -2, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹å’Œä½ èŠåˆ°æ·±å¤œï¼Œå…³ç³»æ›´è¿‘",
                    effect: { classmateB: 4, energy: -5, stress: -3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹å’Œä½ ä¸€èµ·è§„åˆ’æœªæ¥",
                    effect: { classmateB: 4, stress: -2, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹å’Œä½ çº¦å®šè€ƒä¸ŠåŒä¸€æ‰€å¤§å­¦",
                    effect: { classmateB: 6, stress: 5, energy: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 55
                },
                {
                    text: "æœ‹å‹å’Œä½ æˆä¸ºæœ€å¥½çš„æœ‹å‹",
                    effect: { classmateB: 8, stress: -5, mental: 2 },
                    type: "good",
                    weight: 2,
                    condition: (s) => s.relationships.classmateB >= 60
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿæ—¥æ—¶ä¸ºä½ å‡†å¤‡æƒŠå–œ",
                    effect: { classmateB: 6, stress: -8, energy: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é‡è¦æ—¶åˆ»é™ªä¼´ä½ ",
                    effect: { classmateB: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ éœ€è¦æ—¶æ€»æ˜¯å‡ºç°",
                    effect: { classmateB: 4, stress: -4, mental: 1 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹çš„ç†è§£è®©ä½ æ„Ÿåˆ°æ¸©æš–",
                    effect: { classmateB: 3, stress: -3, mental: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹çš„ä¿¡ä»»è®©ä½ æ„Ÿåˆ°è´£ä»»",
                    effect: { classmateB: 3, stress: 2, mental: 1 },
                    type: "neutral",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å›°éš¾æ—¶çŠ¹è±«æ˜¯å¦å¸®å¿™",
                    effect: { classmateB: -3, stress: 4 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æ±‚åŠ©æ—¶æ‰¾å€Ÿå£æ¨è„±",
                    effect: { classmateB: -4, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶è¡¨ç°å‡ºå«‰å¦’",
                    effect: { classmateB: -3, stress: 3, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶è¡¨ç°å‡ºè½»è§†",
                    effect: { classmateB: -4, stress: 5, mental: -1 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰ç‚«è€€æˆç»©",
                    effect: { classmateB: -2, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰è´¬ä½ä½ çš„åŠªåŠ›",
                    effect: { classmateB: -3, stress: 4, mental: -1 },
                    type: "bad",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ é¢å‰ä¼ æ’­ä½ çš„è°£è¨€",
                    effect: { classmateB: -6, stress: 8, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ èƒŒåè¯´ä½ çš„åè¯",
                    effect: { classmateB: -5, stress: 6, mental: -1 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 35
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ä¸çŸ¥æƒ…æ—¶åˆ©ç”¨ä½ ",
                    effect: { classmateB: -7, stress: 7, mental: -2 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ä¿¡ä»»æ—¶èƒŒå›ä½ ",
                    effect: { classmateB: -8, stress: 10, mental: -3 },
                    type: "bad",
                    weight: 2,
                    condition: (s) => s.relationships.classmateB >= 50
                },

                {
                    text: "æœ‹å‹ä¸»åŠ¨æ‰¾ä½ è°ˆå¿ƒï¼ŒåŒ–è§£è¯¯ä¼š",
                    effect: { classmateB: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹å†™ä¿¡å‘ä½ é“æ­‰ï¼Œæƒ…çœŸæ„åˆ‡",
                    effect: { classmateB: 6, stress: -6, mental: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹é€ä½ äº²æ‰‹åšçš„ç¤¼ç‰©è¡¨ç¤ºæ­‰æ„",
                    effect: { classmateB: 5, stress: -4 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 30
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç”Ÿæ—¥æ—¶ä¸»åŠ¨å’Œå¥½",
                    effect: { classmateB: 7, stress: -7 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 15
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å›°éš¾æ—¶ä¼¸å‡ºæ´æ‰‹ï¼Œå…³ç³»ä¿®å¤",
                    effect: { classmateB: 6, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶çœŸå¿ƒç¥è´ºï¼Œå†°é‡Šå‰å«Œ",
                    effect: { classmateB: 5, stress: -4 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶å®‰æ…°ä½ ï¼Œé‡å½’äºå¥½",
                    effect: { classmateB: 5, stress: -6, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 20
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ‰¹è¯„æ—¶ä¸ºä½ è¯´è¯ï¼Œå…³ç³»ç¼“å’Œ",
                    effect: { classmateB: 4, stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateB >= 25
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«å­¤ç«‹æ—¶æ¥è¿‘ä½ ï¼Œå‹è°Šé‡å»º",
                    effect: { classmateB: 6, stress: -5, mental: 1 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 15
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¢«æ¬ºè´Ÿæ—¶ä¿æŠ¤ä½ ï¼Œå‹è°ŠåŠ æ·±",
                    effect: { classmateB: 7, stress: -6, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 30
                },

                {
                    text: "æœ‹å‹åœ¨ä½ æœ€éœ€è¦æ—¶å‡ºç°ï¼Œæˆä¸ºçŸ¥å·±",
                    effect: { classmateB: 8, stress: -8, mental: 3 },
                    type: "good",
                    weight: 2,
                    condition: (s) => s.relationships.classmateB >= 55
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶æŒ‡å¼•ä½ ï¼Œæˆä¸ºå¯¼å¸ˆ",
                    effect: { classmateB: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è·Œå€’æ—¶æ‰¶èµ·ä½ ï¼Œæˆä¸ºä¾é ",
                    effect: { classmateB: 7, stress: -7, mental: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 55
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶ä¸ºä½ éª„å‚²ï¼Œæˆä¸ºè§è¯è€…",
                    effect: { classmateB: 5, stress: -4, energy: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶é™ªä½ æŒ¯ä½œï¼Œæˆä¸ºæ”¯æ’‘",
                    effect: { classmateB: 6, stress: -6, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å­¤ç‹¬æ—¶é™ªä¼´ä½ ï¼Œæˆä¸ºæ¸©æš–",
                    effect: { classmateB: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç„¦è™‘æ—¶å®‰æŠšä½ ï¼Œæˆä¸ºé•‡å®šå‰‚",
                    effect: { classmateB: 5, stress: -7, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ææƒ§æ—¶é¼“åŠ±ä½ ï¼Œæˆä¸ºå‹‡æ°”",
                    effect: { classmateB: 5, stress: -6, mental: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateB >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç»æœ›æ—¶æ‹‰ä½ ä¸€æŠŠï¼Œæˆä¸ºå¸Œæœ›",
                    effect: { classmateB: 7, stress: -8, mental: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateB >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶ç‚¹äº®ç¯å¡”ï¼Œæˆä¸ºæ–¹å‘",
                    effect: { classmateB: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateB >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ æˆåŠŸæ—¶ä¸ºä½ éª„å‚²ï¼Œæˆä¸ºè§è¯è€…",
                    effect: { classmateA: 5, stress: -4, energy: 3 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å¤±è´¥æ—¶é™ªä½ æŒ¯ä½œï¼Œæˆä¸ºæ”¯æ’‘",
                    effect: { classmateA: 6, stress: -6, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ å­¤ç‹¬æ—¶é™ªä¼´ä½ ï¼Œæˆä¸ºæ¸©æš–",
                    effect: { classmateA: 5, stress: -5, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç„¦è™‘æ—¶å®‰æŠšä½ ï¼Œæˆä¸ºé•‡å®šå‰‚",
                    effect: { classmateA: 5, stress: -7, mental: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ææƒ§æ—¶é¼“åŠ±ä½ ï¼Œæˆä¸ºå‹‡æ°”",
                    effect: { classmateA: 5, stress: -6, mental: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "æœ‹å‹åœ¨ä½ ç»æœ›æ—¶æ‹‰ä½ ä¸€æŠŠï¼Œæˆä¸ºå¸Œæœ›",
                    effect: { classmateA: 7, stress: -8, mental: 3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "æœ‹å‹åœ¨ä½ è¿·èŒ«æ—¶ç‚¹äº®ç¯å¡”ï¼Œæˆä¸ºæ–¹å‘",
                    effect: { classmateA: 6, stress: -5, mental: 2 },
                    type: "good",
                    weight: 4,
                    condition: (s) => s.relationships.classmateA >= 45
                },
                {
                    text: "çˆ¶æ¯çœ‹åˆ°ä½ çš„æˆç»©å•ï¼Œå¹äº†å£æ°”æ²¡è¯´è¯",
                    effect: { stress: 5, parents: -3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.relationships.parents >= 30
                },
                {
                    text: "å¦ˆå¦ˆç»™ä½ ç‚–äº†é¸¡æ±¤ï¼Œè¯´'åˆ«å¤ªç´¯äº†'",
                    effect: { energy: 5, stress: -5, parents: 3 },
                    type: "good",
                    weight: 10,
                    condition: (s) => true
                },
                {
                    text: "çˆ¸çˆ¸çªç„¶é—®èµ·OIçš„äº‹ï¼Œä½ æ²‰é»˜äº†",
                    effect: { stress: 8 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.memoryCount >= 1
                },
                {
                    text: "æš—æ‹çš„åŒå­¦é—®ä½ ä¸€é“æ•°å­¦é¢˜ï¼Œä½ è½»æ¾è§£ç­”",
                    effect: { crush: 5, math: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.subjects.math >= 30
                },
                {
                    text: "æš—æ‹çš„è¯·ä½ ä¸€èµ·å‡ºå»ç©ï¼Œä½ åŒæ„äº†ã€‚",
                    effect: { crush: 5, math: 1 },
                    type: "good",
                    weight: 7,
                    condition: (s) => s.relationships.crush >= 25
                },
                {
                    text: "åŒå­¦é‚€è¯·ä½ ä¸€èµ·æ‰“ç¯®çƒï¼Œä½†ä½ æ‹’ç»äº†",
                    effect: { classmateA: -2, stress: 2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 40
                },
                {
                    text: "å’ŒåŒå­¦è®¨è®ºé¢˜ç›®ï¼Œå‘ç°å¤§å®¶éƒ½å¾ˆåŠªåŠ›",
                    effect: { classmateA: 3, stress: -3 },
                    type: "good",
                    weight: 9,
                    condition: (s) => true
                },
                {
                    text: "è€å¸ˆåœ¨åŠå…¬å®¤è¡¨æ‰¬ä½ è¿›æ­¥æ˜æ˜¾",
                    effect: { teacher: 5, stress: -5 },
                    type: "good",
                    weight: 8,
                    condition: (s) => s.week >= 4
                },
                {
                    text: "ç­ä¸»ä»»æ‰¾ä½ è°ˆè¯ï¼Œæé†’ä½ æ³¨æ„åç§‘",
                    effect: { stress: 3, teacher: 2 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "è‹±è¯­è€å¸ˆé€ä½ ä¸€æœ¬å•è¯ä¹¦",
                    effect: { english: 2, englishTeacher: 5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.englishTeacher >= 40
                },
                {
                    text: "æ•°å­¦è€å¸ˆæ‰¹è¯„ä½ ä½œä¸šä¸è®¤çœŸ",
                    effect: { math: -1, mathTeacher: -3, stress: 3 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.subjects.math >= 20
                }
            ],

            health: [
                {
                    text: "è¿ç»­ç†¬å¤œï¼Œä»Šå¤©ä¸Šè¯¾æ‰“çŒç¡è¢«æ‰¹è¯„",
                    effect: { energy: -10, stress: 5, health: -3 },
                    type: "bad",
                    weight: 8,
                    condition: (s) => s.energy < 40
                },
                {
                    text: "åšæŒæ™¨è·‘ï¼Œæ„Ÿè§‰ç²¾ç¥ç„•å‘",
                    effect: { energy: 8, health: 2, stress: -5 },
                    type: "good",
                    weight: 9,
                    condition: (s) => s.health >= 60
                },
                {
                    text: "å‹åŠ›å¤ªå¤§ï¼Œæ™šä¸Šå¤±çœ äº†",
                    effect: { energy: -8, stress: 8 },
                    type: "bad",
                    weight: 7,
                    condition: (s) => s.stress > 50
                },
                {
                    text: "å¬äº†ä¸€é¦–å–œæ¬¢çš„æ­Œï¼Œå¿ƒæƒ…å˜å¥½äº†",
                    effect: { stress: -8 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "æ„Ÿå†’äº†ï¼Œå­¦ä¹ æ•ˆç‡ä¸‹é™",
                    effect: { health: -5, energy: -10, stress: 3 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.health >= 50
                },
                {
                    text: "åšæŒåšçœ¼ä¿å¥æ“ï¼Œè§†åŠ›ä¿æŠ¤",
                    effect: { health: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "é£Ÿå ‚é¥­èœä¸åˆèƒƒå£ï¼Œåªåƒäº†åŠç¢—",
                    effect: { energy: -5, health: -2 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => true
                },
                {
                    text: "å‘¨æœ«ç¡äº†ä¸ªæ‡’è§‰ï¼Œæ„Ÿè§‰æ¢å¤äº†",
                    effect: { energy: 15, stress: -5 },
                    type: "good",
                    weight: 9,
                    condition: (s) => s.dayOfWeek === 6
                },
                {
                    text: "è¿åŠ¨æ—¶æ‰­ä¼¤äº†è„šï¼Œä¼‘æ¯ä¸¤å¤©",
                    effect: { health: -8, energy: -5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.health >= 70
                },
                {
                    text: "å¿ƒç†å’¨è¯¢è€å¸ˆä¸»åŠ¨æ‰¾ä½ èŠå¤©",
                    effect: { mental: 5, stress: -8 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.mental < 60
                }
            ],

            memory: [
                {
                    text: "ç¿»å‡ºä»¥å‰çš„è·å¥–è¯ä¹¦ï¼Œæå¦‚éš”ä¸–",
                    effect: { stress: 5 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => s.memoryCount >= 1
                },
                {
                    text: "æ”¶åˆ°OIç¾¤çš„æ¶ˆæ¯ï¼Œæœ‰äººè¿›äº†çœé˜Ÿ",
                    effect: { stress: 10 },
                    type: "bad",
                    weight: 6,
                    condition: (s) => s.memoryCount >= 2
                },
                {
                    text: "æƒ³èµ·é›†è®­æ—¶çš„æ—¥å­ï¼Œå˜´è§’ä¸Šæ‰¬",
                    effect: { stress: -5, energy: 3 },
                    type: "good",
                    weight: 8,
                    condition: (s) => s.memoryCount >= 1
                },
                {
                    text: "çœ‹åˆ°ç¼–ç¨‹é¢˜ï¼Œæ‰‹ç—’æƒ³å†™ä»£ç ",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.memoryCount >= 1
                },
                {
                    text: "ä»¥å‰é˜Ÿå‹å‘æ¥é—®å€™ï¼Œæ„Ÿæ…¨ä¸‡åƒ",
                    effect: { stress: -3, mental: 2 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.memoryCount >= 2
                },
                {
                    text: "è·¯è¿‡æœºæˆ¿ï¼Œæƒ³èµ·æ›¾ç»çš„æ—¶å…‰",
                    effect: { stress: 5 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.memoryCount >= 1
                },
                {
                    text: "æ¢¦è§è‡ªå·±è¿˜åœ¨æ¯”èµ›ï¼ŒæƒŠé†’",
                    effect: { energy: -5, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.memoryCount >= 3
                },
                {
                    text: "æ•´ç†æ—§ä¹¦ï¼Œå‘ç°ç«èµ›ç¬”è®°",
                    effect: { mental: 3 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => true
                },
                {
                    text: "å¬è¯´ä»¥å‰æ•™ç»ƒé€€ä¼‘äº†",
                    effect: { stress: 2 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => true
                },
                {
                    text: "æƒ³èµ·ç¬¬ä¸€æ¬¡è·å¥–çš„å…´å¥‹",
                    effect: { stress: -5, energy: 5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                }
            ],

            economy: [
                {
                    text: "çˆ¶æ¯ç»™äº†é¢å¤–çš„é›¶èŠ±é’±",
                    effect: { money: 100, parents: 2 },
                    type: "good",
                    weight: 8,
                    condition: (s) => true
                },
                {
                    text: "ä¹°äº†æ–°å‚è€ƒä¹¦ï¼ŒèŠ±æ‰200å…ƒ",
                    effect: { money: -200 },
                    type: "neutral",
                    weight: 7,
                    condition: (s) => s.money >= 200
                },
                {
                    text: "å‘ç°ä¹¦åº—æ‰“æŠ˜ï¼Œä¹°äº†å‡ æœ¬",
                    effect: { money: -150, chinese: 1, math: 1 },
                    type: "good",
                    weight: 5,
                    condition: (s) => s.money >= 150
                },
                {
                    text: "å¸®åŒå­¦è¡¥è¯¾ï¼Œèµšäº†100å…ƒ",
                    effect: { money: 100, stress: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.classmateA >= 50
                },
                {
                    text: "ä¸å°å¿ƒä¸¢äº†100å…ƒ",
                    effect: { money: -100, stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.money >= 100
                },
                {
                    text: "ç½‘ä¸Šä¹°äº†ç½‘è¯¾ï¼ŒèŠ±è´¹300å…ƒ",
                    effect: { money: -300 },
                    type: "neutral",
                    weight: 5,
                    condition: (s) => s.money >= 300
                },
                {
                    text: "çˆ¶æ¯é—®èµ·é’±çš„ç”¨é€”ï¼Œè§£é‡Šæ¸…æ¥š",
                    effect: { parents: 3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => s.relationships.parents >= 40
                },

                { text: "å‘ç°å…è´¹çš„å­¦ä¹ èµ„æºç½‘ç«™", effect: { energy: 5 }, type: "good", weight: 5, condition: (s) => true },
                {
                    text: "åŒå­¦å€Ÿé’±ï¼Œä¸å¥½æ„æ€æ‹’ç»",
                    effect: { money: -50, stress: 2 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.money >= 50
                },
                {
                    text: "è·å¾—å¥–å­¦é‡‘200å…ƒ",
                    effect: { money: 200, teacher: 5 },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.week >= 8
                }
            ],

            special: [
                {
                    text: "å­¦æ ¡ç»„ç»‡åŠ±å¿—è®²åº§ï¼Œå¾ˆå—é¼“èˆ",
                    effect: { stress: -10, energy: 5 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },
                {
                    text: "æœˆè€ƒä¸´è¿‘ï¼Œå›¾ä¹¦é¦†ä¸€åº§éš¾æ±‚",
                    effect: { stress: 5 },
                    type: "neutral",
                    weight: 8,
                    condition: (s) => s.week >= 4
                },
                {
                    text: "é£Ÿå ‚é˜¿å§¨å¤šç»™äº†å—è‚‰,å°ç¡®å¹¸",
                    effect: { stress: -3 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },

                {
                    text: "ä¸‹é›¨å¤©æ²¡å¸¦ä¼,æ·‹æ¹¿äº†",
                    effect: {
                        health: -3,
                        stress: 5
                    },
                    type: "bad",
                    weight: 5,
                    condition: (s) => true
                },

                {
                    text: "æ”¶åˆ°å­¦é•¿å­¦å§çš„é¼“åŠ±ä¿¡",
                    effect: {
                        stress: -8,
                        energy: 5
                    },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },

                {
                    text: "ç­çº§ç¾¤é‡Œæœ‰äººå‘æç¬‘æ®µå­,ç¬‘å‡ºå£°",
                    effect: { stress: -5 },
                    type: "good",
                    weight: 7,
                    condition: (s) => true
                },

                {
                    text: "çªç„¶æ–­ç”µ,è‡ªä¹ ä¸­æ–­",
                    effect: { stress: 3 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => true
                },

                {
                    text: "å‘ç°æ•™å®¤æ–°æ¢äº†æ™ºèƒ½é»‘æ¿",
                    effect: { energy: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => true
                },

                {
                    text: "å­¦æ ¡ç»„ç»‡ä½“æ£€,ä¸€åˆ‡æ­£å¸¸",
                    effect: { health: 2 },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },

                {
                    text: "å¬åˆ°éš”å£ç­åµæ¶,å¿ƒæƒ…çƒ¦èº",
                    effect: { stress: 3 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => true
                },

                {
                    text: "å‘ç°ä¸€ä¸ªå®‰é™çš„å¤©å°,é€‚åˆèƒŒä¹¦",
                    effect: {
                        energy: 3,
                        stress: -2
                    },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },

                {
                    text: "å­¦æ ¡ç»„ç»‡æ˜¥æ¸¸,å¯ä»¥æ”¾æ¾",
                    effect: {
                        stress: -15,
                        energy: 5
                    },
                    type: "good",
                    weight: 3,
                    condition: (s) => s.week <= 13
                },

                {
                    text: "ç­ä¸»ä»»ç”Ÿç—…,ä»£è¯¾è€å¸ˆå¾ˆä¸¥æ ¼",
                    effect: { stress: 5 },
                    type: "bad",
                    weight: 4,
                    condition: (s) => s.relationships.teacher >= 50
                },

                {
                    text: "å‘ç°å­¦æ ¡æ–°å¼€äº†å’–å•¡å…",
                    effect: { stress: -3 },
                    type: "good",
                    weight: 3,
                    condition: (s) => true
                },

                {
                    text: "å¬åˆ°å¹¿æ’­æ”¾å–œæ¬¢çš„æ­Œ",
                    effect: { stress: -5 },
                    type: "good",
                    weight: 6,
                    condition: (s) => true
                },

                {
                    text: "å­¦æ ¡ç”µè·¯è€åŒ–,ç»å¸¸è·³é—¸",
                    effect: { stress: 3 },
                    type: "bad",
                    weight: 3,
                    condition: (s) => true
                },

                {
                    text: "å‘ç°å›¾ä¹¦é¦†æ–°è¿›äº†å¥½ä¹¦",
                    effect: { energy: 5 },
                    type: "good",
                    weight: 4,
                    condition: (s) => true
                },

                {
                    text: "å­¦æ ¡ç»„ç»‡æ¶ˆé˜²æ¼”ç»ƒ,æµªè´¹æ—¶é—´",
                    effect: { stress: 2 },
                    type: "neutral",
                    weight: 4,
                    condition: (s) => true
                },

                {
                    text: "å‘ç°ä¸€ä¸ªè¶…æ£’çš„å­¦ä¹ åšä¸»",
                    effect: {
                        energy: 3,
                        stress: -3
                    },
                    type: "good",
                    weight: 5,
                    condition: (s) => true
                },

                {
                    text: "å­¦æ ¡è¦æ±‚ç»Ÿä¸€ç©¿æ ¡æœ,å¾ˆä¸‘",
                    effect: { stress: 2 },
                    type: "neutral",
                    weight: 3,
                    condition: (s) => true
                },

                {
                    text: "å‘ç°æ•™å®¤ç©ºè°ƒå¯ä»¥è‡ªå·±è°ƒèŠ‚",
                    effect: { energy: 2 },
                    type: "good",
                    weight: 3,
                    condition: (s) => true
                }

            ]
        };

        // æ•…äº‹çº¿äº‹ä»¶ï¼ˆ15+äº‹ä»¶ï¼‰
        const storyEvents = [
            {
                id: 1,
                week: 1,
                day: 0, // å‘¨ä¸€
                title: "AFOç¬¬ä¸€å¤©",
                content: "ä½ ç«™åœ¨æ•™å®¤é—¨å£ï¼Œæ·±å¸ä¸€å£æ°”ã€‚æ›¾ç»çš„OIé˜Ÿå‹åœ¨éš”å£ç­ï¼Œå¬è¯´ä»–è¿˜åœ¨åšæŒç«èµ›ã€‚ä½ æ¡ç´§ä¹¦åŒ…å¸¦ï¼Œèµ°è¿›äº†æ–°ç­çº§ã€‚",
                choices: [
                    { text: "æ‰¾ä¸ªè§’è½åä¸‹ï¼Œä½è°ƒå¼€å§‹", effect: { stress: 5 }, next: 2 },
                    { text: "ä¸»åŠ¨å’ŒåŒæ¡Œæ‰“æ‹›å‘¼", effect: { classmateA: 5, stress: -3 }, next: 2 }
                ]
            },
            {
                id: 2,
                week: 2,
                day: 2,
                title: "ç¬¬ä¸€æ¬¡ä½œä¸š",
                content: "æ•°å­¦è€å¸ˆå¸ƒç½®äº†20é“é¢˜ï¼Œä½ å‘ç°å¤§éƒ¨åˆ†éƒ½æ˜¯ç«èµ›éš¾åº¦ã€‚ä½ ç†¬å¤œåˆ°å‡Œæ™¨ï¼Œç»ˆäºå®Œæˆã€‚",
                choices: [
                    { text: "æŒ‰æ—¶äº¤ä½œä¸šï¼Œå±•ç¤ºå®åŠ›", effect: { math: 2, mathTeacher: 5, energy: -10 }, next: 3 },
                    { text: "åªåšä¸€åŠï¼Œä¿ç•™å®åŠ›", effect: { stress: 3 }, next: 3 }
                ]
            },
            {
                id: 3,
                week: 3,
                day: 4,
                title: "çˆ¶æ¯çš„æœŸæœ›",
                content: "çˆ¶äº²åœ¨é¥­æ¡Œä¸Šè¯´ï¼š'å¬è¯´XXXå®¶çš„å­©å­è¿™æ¬¡è€ƒäº†ç­çº§ç¬¬ä¸€ï¼Œä½ ä»¥å‰æç«èµ›ï¼Œç°åœ¨ä¸èƒ½è½åå•Šã€‚'ä½ æ¡ç€ç­·å­çš„æ‰‹ç´§äº†ç´§ã€‚",
                choices: [
                    { text: "æ²‰é»˜ä¸è¯­ï¼Œé»˜é»˜æ‰¿å—", effect: { stress: 8, parents: -2 }, next: 4 },
                    { text: "è§£é‡Šè¯´éœ€è¦æ—¶é—´é€‚åº”", effect: { parents: 2, stress: -2 }, next: 4 },
                    { text: "å‘è„¾æ°”è¯´'ä½ ä»¬æ‡‚ä»€ä¹ˆï¼'", effect: { parents: -10, stress: 10 }, next: 4 }
                ]
            },
            {
                id: 4,
                week: 4,
                day: 1,
                title: "æ—§å‹é‡é€¢",
                content: "åœ¨èµ°å»Šé‡åˆ°ä»¥å‰é›†è®­çš„é˜Ÿå‹ã€‚ä»–é—®ï¼š'æ€ä¹ˆé€€ç«äº†ï¼Ÿ'ä½ ä¸çŸ¥å¦‚ä½•å›ç­”ã€‚ä»–æ‹æ‹ä½ çš„è‚©ï¼š'æ–‡åŒ–è¯¾ä¹Ÿä¸å®¹æ˜“ï¼ŒåŠ æ²¹ã€‚'",
                choices: [
                    { text: "æ„Ÿåˆ°å¤±è½ï¼Œæ€€ç–‘é€‰æ‹©", effect: { stress: 10 }, next: 5 },
                    { text: "é‡Šç„¶ä¸€ç¬‘ï¼Œå„è‡ªæœ‰è·¯", effect: { stress: -3 }, next: 5 },
                    { text: "æš—ä¸‹å†³å¿ƒï¼Œè¦è¯æ˜è‡ªå·±", effect: { energy: 5, stress: 5 }, next: 5 }
                ]
            },
            {
                id: 5,
                week: 5,
                day: 3,
                title: "æš—æ‹çš„æ‚¸åŠ¨",
                content: "å¥¹è½¬è¿‡å¤´é—®ä½ ç‰©ç†é¢˜ï¼Œå‘æ¢¢çš„é¦™å‘³è®©ä½ å¿ƒè·³åŠ é€Ÿã€‚ä½ å‘ç°å¥¹ä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ ï¼Œç¬”è®°æœ¬ä¸Šå¯†å¯†éº»éº»ã€‚åŸæ¥å¤§å®¶éƒ½åœ¨ä¸ºæœªæ¥æ‹¼å‘½ã€‚",
                choices: [
                    { text: "è®¤çœŸè®²é¢˜ï¼Œå±•ç¤ºå®åŠ›", effect: { crush: 7, physics: 1 }, next: 6 },
                    { text: "ç´§å¼ ç»“å·´ï¼Œå‘æŒ¥å¤±å¸¸", effect: { crush: -5, stress: 3 }, next: 6 },
                    { text: "è®²å®Œåé‚€è¯·ä¸€èµ·å­¦ä¹ ", effect: { crush: 12, stress: -10 }, next: 6 }
                ]
            },
            {
                id: 6,
                week: 8,
                day: 4,
                title: "ç¬¬ä¸€æ¬¡æœˆè€ƒ",
                content: "æˆç»©å‡ºæ¥äº†ï¼Œä½ è¿›æ­¥äº†15åã€‚è€å¸ˆåœ¨å…¨ç­é¢å‰è¡¨æ‰¬ä½ ï¼š'XXXåŒå­¦ä»ç«èµ›è½¬æ–‡åŒ–è¯¾ï¼Œé€‚åº”å¾—å¾ˆå¿«ã€‚'ä½ çœ‹åˆ°çˆ¶æ¯çœ¼ä¸­çš„æ¬£æ…°ã€‚",
                choices: [
                    { text: "ç»§ç»­ä¿æŒï¼Œå†²å‡»å‰10", effect: { energy: 5, stress: -5, teacher: 5 }, next: 7 },
                    { text: "æ¾æ‡ˆä¸‹æ¥ï¼Œæƒ³ä¼‘æ¯å‡ å¤©", effect: { energy: 10, stress: -10 }, next: 7 },
                    { text: "æ„Ÿåˆ°è¿·èŒ«ï¼Œä¸çŸ¥é“æ„ä¹‰ä½•åœ¨", effect: { stress: 8 }, next: 7 }
                ]
            },
            {
                id: 7,
                week: 12,
                day: 6,
                title: "æ·±å¤œçš„å¯¹è¯",
                content: "æ¯äº²æ·±å¤œç«¯æ¥ç‰›å¥¶ï¼š'å…¶å®æˆ‘ä»¬ä¸æ±‚ä½ è€ƒå¤šå¥½ï¼Œåªå¸Œæœ›ä½ åˆ«åæ‚”ã€‚'ä½ ç¬¬ä¸€æ¬¡å’Œçˆ¶æ¯èŠèµ·ç«èµ›çš„æ—¥å­ï¼ŒèŠèµ·é‚£äº›ç†¬å¤œåˆ·é¢˜çš„æ—¶å…‰ã€‚",
                choices: [
                    { text: "æ„ŸåŠ¨è½æ³ªï¼Œå‹åŠ›é‡Šæ”¾", effect: { parents: 10, stress: -15 }, next: 8 },
                    { text: "è¡¨é¢å¹³é™ï¼Œå†…å¿ƒæ¸©æš–", effect: { parents: 5, stress: -8 }, next: 8 },
                    { text: "è§‰å¾—å” å¨ï¼Œä¸è€çƒ¦", effect: { parents: -5, stress: 3 }, next: 8 }
                ]
            },
            {
                id: 8,
                week: 16,
                day: 2,
                title: "å›å“",
                content: "æ”¶åˆ°æ›¾ç»OIæ•™ç»ƒçš„é‚®ä»¶ï¼š'å¬è¯´ä½ è½¬æ–‡åŒ–è¯¾äº†ï¼Œæ— è®ºé€‰æ‹©ä»€ä¹ˆï¼Œéƒ½è¦åƒè§£é¢˜ä¸€æ ·ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£ã€‚'ä½ çªç„¶æ˜ç™½ï¼Œç«èµ›æ•™ä¼šä½ çš„ä¸åªæ˜¯ç®—æ³•ï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼ã€‚",
                choices: [
                    { text: "é‡æ‹¾ä¿¡å¿ƒï¼Œåº”ç”¨ç®—æ³•æ€ç»´", effect: { math: 3, physics: 2, stress: -5 }, next: 9 },
                    { text: "æ„Ÿåˆ°é—æ†¾ï¼Œå›ä¸å»äº†", effect: { stress: 8 }, next: 9 },
                    { text: "é‡Šç„¶ï¼Œæ„Ÿè°¢é‚£æ®µç»å†", effect: { stress: -8, energy: 5 }, next: 9 }
                ]
            },
            {
                id: 9,
                week: 20,
                day: 1,
                title: "å›åº”",
                content: "å¥¹é€’æ¥ä¸€å¼ çº¸æ¡ï¼š'è°¢è°¢ä½ ä¸€ç›´å¸®æˆ‘...ã€‚æˆ‘ä»¬ä¸€èµ·åŠªåŠ›ï¼Œè€ƒåŒä¸€æ‰€å¤§å­¦å§ï¼'",
                choices: [
                    { text: "å¼€å¿ƒæ¥å—ï¼ŒåŠ¨åŠ›æ»¡æ»¡", effect: { crush: 15, stress: -10, energy: 30 }, next: 10 },
                    { text: "ç´§å¼ ä¸çŸ¥æ‰€æª", effect: { stress: 10 }, next: 10 },
                    { text: "æ‹’ç»ï¼Œè¯´è¦ä¸“å¿ƒå­¦ä¹ ", effect: { crush: -10, stress: 5 }, next: 10 }
                ]
            },
            {
                id: 10,
                week: 24,
                day: 3,
                title: "å¯’å‡å‰å¤œ",
                content: "æœŸæœ«è€ƒè¯•ç»“æŸï¼Œä½ è€ƒè¿›äº†ç­çº§å‰10ã€‚å¯’å‡æ¥ä¸´ï¼Œä½†ä½ çŸ¥é“ï¼ŒçœŸæ­£çš„å†²åˆºæ‰åˆšåˆšå¼€å§‹ã€‚",
                choices: [
                    { text: "åˆ¶å®šå¯’å‡è®¡åˆ’ï¼Œå…¨åŠ›å†²åˆº", effect: { energy: 5, stress: -5 }, next: 11 },
                    { text: "å…ˆæ”¾æ¾å‡ å¤©ï¼Œå†å­¦ä¹ ", effect: { energy: 10, stress: -10 }, next: 11 },
                    { text: "æ„Ÿåˆ°ç–²æƒ«ï¼Œæƒ³æ”¾å¼ƒ", effect: { stress: 10 }, next: 11 }
                ]
            },
            {
                id: 11,
                week: 30,
                day: 5,
                title: "æ˜¥èŠ‚çš„æ„Ÿæ‚Ÿ",
                content: "äº²æˆšä»¬é—®èµ·ä½ çš„æˆç»©ï¼Œçˆ¶æ¯éª„å‚²åœ°è¯´ï¼š'è¿›æ­¥å¾ˆå¤§ï¼'ä½ çªç„¶æ„è¯†åˆ°ï¼Œè‡ªå·±çš„åŠªåŠ›ä¸ä»…æ˜¯ä¸ºäº†è‡ªå·±ï¼Œä¹Ÿä¸ºäº†ä¸è¾œè´Ÿä»–ä»¬çš„æœŸæœ›ã€‚",
                choices: [
                    { text: "æ„Ÿåˆ°è´£ä»»é‡å¤§", effect: { parents: 5, stress: 5 }, next: 12 },
                    { text: "æ„Ÿåˆ°æ¸©æš–å’Œæ”¯æŒ", effect: { parents: 8, stress: -5 }, next: 12 },
                    { text: "æ„Ÿåˆ°å‹åŠ›å€å¢", effect: { stress: 10 }, next: 12 }
                ]
            },
            {
                id: 12,
                week: 35,
                day: 2,
                title: "å€’è®¡æ—¶100å¤©",
                content: "é»‘æ¿ä¸Šçš„æ•°å­—å˜æˆ100ã€‚æ•™å®¤é‡Œå¼¥æ¼«ç€ç´§å¼ çš„æ°”æ°›ï¼Œä½†ä½ æ„Ÿåˆ°ä¸€ç§å¥‡æ€ªçš„å¹³é™ã€‚ä¸¤å¹´ç«èµ›ï¼Œä¸€å¹´WHKï¼Œä½ å·²ç»å‡†å¤‡å¥½äº†ã€‚",
                choices: [
                    { text: "å……æ»¡ä¿¡å¿ƒï¼Œè¿æ¥æŒ‘æˆ˜", effect: { stress: 10, energy: 20 }, next: 13 },
                    { text: "æŒ‰éƒ¨å°±ç­ï¼Œä¿æŒèŠ‚å¥", effect: { stress: 5 }, next: 13 },
                    { text: "ç´§å¼ ä¸å®‰ï¼Œéš¾ä»¥å…¥çœ ", effect: { stress: 10, energy: -5 }, next: 13 }
                ]
            },
            {
                id: 13,
                week: 40,
                day: 4,
                title: "æœ€åçš„å†²åˆº",
                content: "äº”ä¸€å‡æœŸï¼Œä½ æ‹’ç»äº†æ‰€æœ‰é‚€çº¦ï¼Œæ¯å¤©å­¦ä¹ 12å°æ—¶ã€‚è™½ç„¶è¾›è‹¦ï¼Œä½†ä½ çŸ¥é“ï¼Œè¿™æ˜¯æœ€åçš„å†²åˆºã€‚",
                choices: [
                    { text: "åšæŒåˆ°åº•ï¼Œä¸æ”¾å¼ƒ", effect: { energy: -10, stress: 5, subjects: { all: 2 } }, next: 14 },
                    { text: "é€‚å½“ä¼‘æ¯ï¼ŒåŠ³é€¸ç»“åˆ", effect: { energy: 5, stress: -5 }, next: 14 },
                    { text: "æ„Ÿåˆ°å´©æºƒï¼Œæƒ³æ”¾å¼ƒ", effect: { stress: 15, energy: -15 }, next: 14 }
                ]
            },
            {
                id: 14,
                week: 45,
                day: 1,
                title: "æœ€åçš„å‘Šåˆ«",
                content: "é«˜è€ƒå‰60å¤©ï¼Œä½ æ•´ç†ä¹¦æ¡Œï¼Œç¿»å‡ºé‚£å¼ åˆå½±ã€‚ç…§ç‰‡èƒŒé¢å†™ç€ï¼š'To be continued...'ä½ ç¬‘äº†ç¬‘ï¼ŒæŠŠå®ƒæ”¶è¿›æŠ½å±‰ã€‚æ˜¯çš„ï¼Œæ•…äº‹è¿˜åœ¨ç»§ç»­ã€‚",
                choices: [
                    { text: "å……æ»¡æœŸå¾…ï¼Œè¿æ¥æŒ‘æˆ˜", effect: { stress: -10, energy: 10 }, next: 15 },
                    { text: "å¹³é™æ¥å—ï¼Œé¡ºå…¶è‡ªç„¶", effect: { stress: -5 }, next: 15 },
                    { text: "ç´§å¼ ä¸å®‰ï¼Œéš¾ä»¥å…¥çœ ", effect: { stress: 10, energy: -5 }, next: 15 }
                ]
            },
            {
                id: 15,
                week: 50,
                day: 6,
                title: "é«˜è€ƒå‰å¤œ",
                content: "ä½ èººåœ¨åºŠä¸Šï¼Œå›æƒ³è¿™ä¸€å¹´ã€‚ä»è¿·èŒ«åˆ°åšå®šï¼Œä»å¤±è½åˆ°å¸Œæœ›ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œä½ éƒ½å·²ç»æˆé•¿ã€‚é©¬ä¸Šå°±æ˜¯æ£€éªŒçš„æ—¶åˆ»ã€‚",
                choices: [
                    { text: "å……æ»¡ä¿¡å¿ƒï¼Œå®‰ç„¶å…¥ç¡", effect: { stress: -10, energy: 5 }, next: 16 },
                    { text: "å¹³é™æ¥å—ï¼Œé¡ºå…¶è‡ªç„¶", effect: { stress: -5 }, next: 16 },
                    { text: "ç´§å¼ å¤ä¹ ï¼Œæœ€åå†²åˆº", effect: { energy: -10, stress: 10 }, next: 16 }
                ]
            },
            {
                id: 16,
                week: 51,
                day: 6,
                title: "æ‰¿è¯º",
                content: "å¥¹æ‰¾åˆ°ä½ :'é«˜è€ƒåŠ æ²¹ï¼æˆ‘ä»¬......'",
                choices: [
                    { text: "ç›¸çº¦è€ƒåï¼Œå…±èµ´å±±æµ·", effect: { stress: 5, energy: 5, crush: 10 }, next: null },
                    { text: "é»˜é»˜ç‚¹å¤´ï¼Œè½¬èº«ç¦»å»", effect: { stress: 10, energy: 5, crush: 5 }, next: null },
                    { text: "å¿ƒä¹±å¦‚éº»ï¼Œæ— è¨€ä»¥å¯¹", effect: { energy: -10, stress: 10, crush: -2 }, next: null }
                ]
            },
        ];

        //const storyEvents = [
        //    {
        //        id: 1,
        //        week: 1,
        //        day: 0,
        //        title: "AFOç¬¬ä¸€å¤©",
        //        content: "ä½ ç«™åœ¨æ•™å®¤é—¨å£ï¼Œæ·±å¸ä¸€å£æ°”ã€‚æ›¾ç»çš„OIé˜Ÿå‹åœ¨éš”å£ç­ï¼Œå¬è¯´ä»–è¿˜åœ¨åšæŒç«èµ›ã€‚ä½ æ¡ç´§ä¹¦åŒ…å¸¦ï¼Œèµ°è¿›äº†æ–°ç­çº§ã€‚",
        //        choices: [
        //            { text: "æ‰¾ä¸ªè§’è½åä¸‹ï¼Œä½è°ƒå¼€å§‹", effect: { stress: 5 }, next: 2 },
        //            { text: "ä¸»åŠ¨å’ŒåŒæ¡Œæ‰“æ‹›å‘¼", effect: { classmateA: 5, stress: -3 }, next: 2 }
        //        ]
        //    },
        //    {
        //        id: 2,
        //        week: 2,
        //        day: 2,
        //        title: "ä½œä¸š",
        //        content:
        //            "æ•°å­¦è€å¸ˆå¸ƒç½®äº†20é“é¢˜ï¼Œä½ å‘ç°å¤§éƒ¨åˆ†éƒ½æ˜¯ç«èµ›éš¾åº¦ã€‚ä½ ç†¬å¤œåˆ°å‡Œæ™¨ï¼Œç»ˆäºå®Œæˆã€‚",
        //        choices: [
        //            { text: "æŒ‰æ—¶äº¤ä½œä¸šï¼Œå±•ç¤ºå®åŠ›", effect: { math: 2, mathTeacher: 5, energy: -10 }, next: 3 },
        //            { text: "åªåšä¸€åŠï¼Œä¿ç•™å®åŠ›", effect: { stress: 3, mathTeacher: -5 }, next: 3 }
        //        ]
        //    },
        //    {
        //        id: 3,
        //        week: 3,
        //        day: 2,
        //        title: "åŒ–å­¦è¯¾",
        //        content: "åŒ–å­¦è€å¸ˆèµ°è¿›æ•™å®¤ï¼Œä½ æƒŠè®¶åœ°å‘ç°ä»–ç«Ÿæ˜¯æ›¾ç»å¸¦è¿‡ç«èµ›é›†è®­çš„åŠ©æ•™ã€‚ä»–çœ‹åˆ°ä½ æ—¶çœ¼ç¥å¾®å¾®ä¸€äº®ï¼Œå´æ²¡æœ‰ç‰¹åˆ«è¡¨ç¤ºã€‚ä¸‹è¯¾æ—¶ï¼Œä»–åœ¨ä½ æ¡Œè¾¹åœé¡¿äº†ä¸€ä¸‹ã€‚",
        //        choices: [
        //            { text: "ä¸»åŠ¨ä¸Šå‰ç›¸è®¤", effect: { chemistryTeacher: 5, stress: -3 }, next: 4 },
        //            { text: "ä½å¤´è£…ä½œæ²¡çœ‹è§", effect: { stress: 2, chemistryTeacher: -5 }, next: 4 },
        //            { text: "è¯¾åå»åŠå…¬å®¤æ‰¾ä»–", effect: { chemistryTeacher: 5, stress: 5 }, next: 4 }
        //        ]
        //    },
        //    {
        //        id: 4,
        //        week: 3,
        //        day: 4,
        //        title: "çˆ¶æ¯çš„æœŸæœ›",
        //        content: "çˆ¶äº²åœ¨é¥­æ¡Œä¸Šè¯´ï¼š'å¬è¯´XXXå®¶çš„å­©å­è¿™æ¬¡è€ƒäº†ç­çº§ç¬¬ä¸€ï¼Œä½ ä»¥å‰æç«èµ›ï¼Œç°åœ¨ä¸èƒ½è½åå•Šã€‚'ä½ æ¡ç€ç­·å­çš„æ‰‹ç´§äº†ç´§ã€‚",
        //        choices: [
        //            { text: "æ²‰é»˜ä¸è¯­ï¼Œé»˜é»˜æ‰¿å—", effect: { stress: 8, parents: -2 }, next: 5 },
        //            { text: "è§£é‡Šè¯´éœ€è¦æ—¶é—´é€‚åº”", effect: { parents: 2, stress: 2 }, next: 5 },
        //            { text: "å‘è„¾æ°”è¯´'ä½ ä»¬æ‡‚ä»€ä¹ˆï¼'", effect: { parents: -10, stress: 10, health: -5 }, next: 5 }
        //        ]
        //    },
        //    {
        //        id: 5,
        //        week: 4,
        //        day: 1,
        //        title: "æ—§å‹é‡é€¢",
        //        content: "åœ¨èµ°å»Šé‡åˆ°ä»¥å‰é›†è®­çš„é˜Ÿå‹ã€‚ä»–é—®ï¼š'æ€ä¹ˆé€€ç«äº†ï¼Ÿ'ä½ ä¸çŸ¥å¦‚ä½•å›ç­”ã€‚ä»–æ‹æ‹ä½ çš„è‚©ï¼š'æ–‡åŒ–è¯¾ä¹Ÿä¸å®¹æ˜“ï¼ŒåŠ æ²¹ã€‚'",
        //        choices: [
        //            { text: "æ„Ÿåˆ°å¤±è½ï¼Œæ€€ç–‘é€‰æ‹©", effect: { stress: 10 }, next: 6 },
        //            { text: "é‡Šç„¶ä¸€ç¬‘ï¼Œå„è‡ªæœ‰è·¯", effect: { stress: -3 }, next: 6 },
        //            { text: "æš—ä¸‹å†³å¿ƒï¼Œè¦è¯æ˜è‡ªå·±", effect: { energy: 5, stress: 5 }, next: 6 }
        //        ]
        //    },
        //    {
        //        id: 6,
        //        week: 5,
        //        day: 3,
        //        title: "æš—æ‹çš„æ‚¸åŠ¨",
        //        content: "å¥¹è½¬è¿‡å¤´é—®ä½ ç‰©ç†é¢˜ï¼Œå‘æ¢¢çš„é¦™å‘³è®©ä½ å¿ƒè·³åŠ é€Ÿã€‚ä½ å‘ç°å¥¹ä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ ï¼Œç¬”è®°æœ¬ä¸Šå¯†å¯†éº»éº»ã€‚åŸæ¥å¤§å®¶éƒ½åœ¨ä¸ºæœªæ¥æ‹¼å‘½ã€‚",
        //        choices: [
        //            { text: "è®¤çœŸè®²é¢˜ï¼Œå±•ç¤ºå®åŠ›", effect: { crush: 7, physics: 1 }, next: 7 },
        //            { text: "ç´§å¼ ç»“å·´ï¼Œå‘æŒ¥å¤±å¸¸", effect: { crush: -5, stress: 3 }, next: 7 },
        //            { text: "è®²å®Œåé‚€è¯·ä¸€èµ·å­¦ä¹ ", effect: { crush: 12, stress: -10, subjects: { all: 2 } }, next: 7 }
        //        ]
        //    },
        //    {
        //        id: 7,
        //        week: 6,
        //        day: 3,
        //        title: "æ¨¡å¼çš„ç¢°æ’",
        //        content: "ç‰©ç†è¯¾è®²åˆ°ä¸€ä¸ªå¤æ‚æ¨¡å‹ï¼Œä½ ä¸‹æ„è¯†åœ°ç”¨ç«èµ›çš„æ€ç»´å»æ‹†è§£ï¼Œå¾ˆå¿«æ‰¾åˆ°äº†å…³é”®ã€‚ä½†è§£é¢˜æ­¥éª¤å´å’Œæ ‡å‡†ç­”æ¡ˆå¤§ç›¸å¾„åº­ã€‚è€å¸ˆçœ‹ç€ä½ çš„è‰ç¨¿çº¸ï¼Œè‹¥æœ‰æ‰€æ€ã€‚",
        //        choices: [
        //            { text: "å‘è€å¸ˆè§£é‡Šä½ çš„æ€è·¯", effect: { physicsTeacher: 5, stress: -2, physics: 1 }, next: 8 },
        //            { text: "é»˜é»˜æ“¦æ‰ï¼ŒæŒ‰è¯¾æœ¬æ–¹æ³•é‡åš", effect: { stress: 3 }, next: 8 },
        //            { text: "è¯¾åå’ŒåŒå­¦è®¨è®ºä½ çš„æ–¹æ³•", effect: { classmateA: 3, physics: 2 }, next: 8 }
        //        ]
        //    },
        //    {
        //        id: 8,
        //        week: 7,
        //        day: 5,
        //        title: "å‘¨æœ«çš„å›¾ä¹¦é¦†",
        //        content: "ä½ é€‰æ‹©å»å›¾ä¹¦é¦†è‡ªä¹ ï¼Œå´å¶é‡äº†ä¹Ÿåœ¨é‚£é‡Œçš„å¥¹ã€‚ä½ ä»¬é»˜å¥‘åœ°ååˆ°äº†è§’è½çš„åŒä¸€å¼ æ¡Œå­ï¼Œæ•´æ•´ä¸€ä¸ªä¸‹åˆï¼Œåªæœ‰ç¿»ä¹¦å£°å’Œå¶å°”ä½å£°çš„è®¨è®ºã€‚",
        //        choices: [
        //            { text: "ä¸“æ³¨å­¦ä¹ ï¼Œå¶å°”äº¤æµ", effect: { crush: 3, subjects: { all: 1 }, stress: 5 }, next: 9 },
        //            { text: "åˆ†å¿ƒå…³æ³¨å¥¹ï¼Œæ•ˆç‡é™ä½", effect: { crush: 5, energy: -5 }, next: 9 },
        //            { text: "æå‰ç¦»å¼€ï¼Œé¿å…ç´§å¼ ", effect: { stress: -3, crush: -5 }, next: 9 }
        //        ]
        //    },
        //    {
        //        id: 9,
        //        week: 8,
        //        day: 4,
        //        title: "ç¬¬ä¸€æ¬¡æœˆè€ƒ",
        //        content: "æˆç»©å‡ºæ¥äº†ï¼Œä½ è¿›æ­¥äº†è®¸å¤šã€‚è€å¸ˆåœ¨å…¨ç­é¢å‰è¡¨æ‰¬ä½ ï¼š'XXXåŒå­¦ä»ç«èµ›è½¬æ–‡åŒ–è¯¾ï¼Œé€‚åº”å¾—å¾ˆå¿«ã€‚'ä½ çœ‹åˆ°çˆ¶æ¯çœ¼ä¸­çš„æ¬£æ…°ã€‚",
        //        choices: [
        //            { text: "ç»§ç»­ä¿æŒï¼Œå†²å‡»æ›´é«˜åˆ†æ•°", effect: { energy: 5, stress: -5, teacher: 5 }, next: 10 },
        //            { text: "æ¾æ‡ˆä¸‹æ¥ï¼Œæƒ³ä¼‘æ¯å‡ å¤©", effect: { energy: 10, stress: -10 }, next: 10 },
        //            { text: "æ„Ÿåˆ°è¿·èŒ«ï¼Œä¸çŸ¥é“æ„ä¹‰ä½•åœ¨", effect: { stress: 8 }, next: 10 }
        //        ]
        //    },
        //    {
        //        id: 10,
        //        week: 9,
        //        day: 1,
        //        title: "ç­å§”ç«é€‰",
        //        content: "ç­ä¸»ä»»å»ºè®®ä½ ç«é€‰å­¦ä¹ å§”å‘˜ï¼Œè¯´ä½ çš„ç«èµ›ç»å†èƒ½å¸®åŠ©åŒå­¦ã€‚ä½ çŠ¹è±«äº†ï¼Œè¿™ä¼šä¸ä¼šå ç”¨å¤ªå¤šå­¦ä¹ æ—¶é—´ï¼Ÿ",
        //        choices: [
        //            { text: "æ¥å—æŒ‘æˆ˜ï¼Œå‚åŠ ç«é€‰", effect: { teacher: 5, classmateA: 3, classmateB: 3ï¼Œ stress: 5, energy: -10 }, next: 11 },
        //            { text: "å©‰æ‹’ï¼Œè¯´æ˜è¦ä¸“æ³¨å­¦ä¹ ", effect: { stress: -3, teacher: -2 }, next: 11 },
        //            { text: "æŠ˜ä¸­ï¼Œåªåšç§‘ä»£è¡¨", effect: { teacher: 2, stress: 2 }, next: 11 }
        //        ]
        //    },
        //    {
        //        id: 11,
        //        week: 10,
        //        day: 5,
        //        title: "æ„å¤–çš„ç›Ÿå‹",
        //        content: "æ”¾å­¦æ—¶ä¸‹é›¨äº†ï¼Œä½ æ²¡å¸¦ä¼ã€‚é‚£ä¸ªæ€»åœ¨åŸ‹å¤´åˆ·é¢˜çš„'å·ç‹'åŒæ¡Œé»˜é»˜æŠŠä¼å¾€ä½ è¿™è¾¹æŒªäº†æŒªã€‚'ä¸€èµ·èµ°å§ï¼Œé¡ºä¾¿é—®ä½ ä¸Šåˆé‚£é“é¢˜çš„å¦ä¸€ç§è§£æ³•ã€‚'",
        //        choices: [
        //            { text: "æ„Ÿæ¿€æ¥å—ï¼Œè·¯ä¸Šçƒ­çƒˆè®¨è®º", effect: { classmateA: 8, stress: -5, math: 1 }, next: 12 },
        //            { text: "å©‰æ‹’ï¼Œè¯´æƒ³è‡ªå·±é™é™", effect: { stress: 2, energy: 5, health: -5 }, next: 12 },
        //            { text: "æ¥å—ï¼Œä½†ä¸€è·¯æ²‰é»˜", effect: { classmateA: -2, stress: 5 }, next: 12 }
        //        ]
        //    },
        //    {
        //        id: 12,
        //        week: 11,
        //        day: 4,
        //        title: "ç‰©ç†ç«èµ›é¢˜",
        //        content: "ç‰©ç†è€å¸ˆä¸Šè¯¾æ—¶è®²åˆ°äº†ä¸€é“æ”¹ç¼–è‡ªç«èµ›çš„é¢˜ç›®ï¼Œå…¨ç­åªæœ‰ä½ å’Œå¦ä¸€ååŒå­¦ä¸¾æ‰‹è¡¨ç¤ºä¼šåšã€‚è€å¸ˆè®©ä½ ä»¬å„è‡ªä¸Šå°è®²è§£ã€‚",
        //        choices: [
        //            { text: "ç”¨ç®€æ´çš„ç«èµ›æ€è·¯è®²è§£", effect: { teacher: 1, physics: 2, stress: -3 }, next: 13 },
        //            { text: "æŒ‰å¸¸è§„è¯¾æœ¬æ–¹æ³•è®²è§£", effect: { stress: -2 }, next: 13 },
        //            { text: "è°¦è®©ï¼Œè®©åŒå­¦å…ˆè®²", effect: { classmateA: 3, teacher: 1 }, next: 13 }
        //        ]
        //    },
        //    {
        //        id: 13,
        //        week: 12,
        //        day: 6,
        //        title: "æ·±å¤œçš„å¯¹è¯",
        //        content: "æ¯äº²æ·±å¤œç«¯æ¥ç‰›å¥¶ï¼š'å…¶å®æˆ‘ä»¬ä¸æ±‚ä½ è€ƒå¤šå¥½ï¼Œåªå¸Œæœ›ä½ åˆ«åæ‚”ã€‚'ä½ ç¬¬ä¸€æ¬¡å’Œçˆ¶æ¯èŠèµ·ç«èµ›çš„æ—¥å­ï¼ŒèŠèµ·é‚£äº›ç†¬å¤œåˆ·é¢˜çš„æ—¶å…‰ã€‚",
        //        choices: [
        //            { text: "æ„ŸåŠ¨è½æ³ªï¼Œå‹åŠ›é‡Šæ”¾", effect: { parents: 10, stress: -15 }, next: 14 },
        //            { text: "è¡¨é¢å¹³é™ï¼Œå†…å¿ƒæ¸©æš–", effect: { parents: 5, stress: -8 }, next: 14 },
        //            { text: "è§‰å¾—å” å¨ï¼Œä¸è€çƒ¦", effect: { parents: -5, stress: 3 }, next: 14 }
        //        ]
        //    },
        //    {
        //        id: 14,
        //        week: 13,
        //        day: 0,
        //        title: "æ¯äº²çš„æ—©é¤",
        //        content: "è¿ç»­ä¸€å‘¨ï¼Œä½ å‘ç°æ—©é¤ç›’é‡Œå¤šäº†å¼ ä¾¿ç­¾ã€‚ä»Šå¤©å†™ç€ï¼š'è®°å¾—åƒé¸¡è›‹ï¼Œè¡¥å……è›‹ç™½è´¨ã€‚åˆ«å¤ªæ‹¼ï¼Œèº«ä½“è¦ç´§ã€‚'å­—è¿¹æ˜¯æ¯äº²çš„ã€‚",
        //        choices: [
        //            { text: "ç»™æ¯äº²å‘çŸ­ä¿¡æ„Ÿè°¢", effect: { parents: 5, stress: -5 }, next: 15 },
        //            { text: "æŠŠä¾¿ç­¾å°å¿ƒæ”¶èµ·æ¥", effect: { parents: 3, stress: -3 }, next: 15 },
        //            { text: "è§‰å¾—éš¾ä¸ºæƒ…ï¼Œæ‰”æ‰ä¾¿ç­¾", effect: { stress: 2 }, next: 15 }
        //        ]
        //    },
        //    {
        //        id: 15,
        //        week: 14,
        //        day: 0,
        //        title: "ç“¶é¢ˆæœŸ",
        //        content: "æœ€è¿‘å‡ æ¬¡å‘¨æµ‹æˆç»©åƒå¡ä½äº†ä¸€æ ·ï¼Œä¸è¿›ä¸é€€ã€‚ä½ çœ‹ç€é‚£äº›åå¤å‡ºé”™çš„é¢˜å‹ï¼Œç¬¬ä¸€æ¬¡å¯¹'åŠªåŠ›å°±æœ‰å›æŠ¥'äº§ç”Ÿäº†æ€€ç–‘ã€‚æ·±å¤œï¼Œå°ç¯çš„å…‰æ˜¾å¾—æ ¼å¤–åˆºçœ¼ã€‚",
        //        choices: [
        //            { text: "æ›´ç–¯ç‹‚åˆ·é¢˜ï¼Œçªç ´ç“¶é¢ˆ", effect: { energy: -15, stress: 10, math: 1 }, next: 16 },
        //            { text: "åœä¸‹æ¥ï¼Œé‡æ–°åˆ†æé”™é¢˜æœ¬", effect: { stress: -3, subjects: { all: 1 } }, next: 16 },
        //            { text: "æš‚æ—¶æ”¾ä¸‹ï¼Œå»æ“åœºè·‘æ­¥", effect: { energy: 10, stress: -8 }, next: 16 }
        //        ]
        //    },
        //    {
        //        id: 16,
        //        week: 15,
        //        day: 3,
        //        title: "åŒæ¡Œçš„æ±‚åŠ©",
        //        content: "'å·ç‹'åŒæ¡Œç½•è§åœ°æ‰¾ä½ æ±‚åŠ©ï¼š'è¿™é“æ•°å­¦å‹è½´é¢˜ï¼Œä½ çš„è§£æ³•æ¯”æˆ‘ç®€æ´å¤šäº†ï¼Œèƒ½æ•™æˆ‘å—ï¼Ÿ'ä½ ä»¬èŠ±äº†æ•´ä¸ªåˆä¼‘æ—¶é—´ä¸€èµ·é’»ç ”ã€‚",
        //        choices: [
        //            { text: "è€å¿ƒè®²è§£ï¼Œåˆ†äº«æ€è·¯", effect: { classmateA: 8, math: 1, stress: -3 }, next: 17 },
        //            { text: "åŒ†åŒ†è®²å®Œï¼Œç»§ç»­åˆ·é¢˜", effect: { classmateA: 2 }, next: 17 },
        //            { text: "å€Ÿæ­¤æœºä¼šè®¨è®ºæ›´å¤šéš¾é¢˜", effect: { classmateA: 5, math: 2, energy: -5 }, next: 17 }
        //        ]
        //    },
        //    {
        //        id: 17,
        //        week: 16,
        //        day: 2,
        //        title: "å›å“",
        //        content: "æ”¶åˆ°æ›¾ç»OIæ•™ç»ƒçš„é‚®ä»¶ï¼š'å¬è¯´ä½ è½¬æ–‡åŒ–è¯¾äº†ï¼Œæ— è®ºé€‰æ‹©ä»€ä¹ˆï¼Œéƒ½è¦åƒè§£é¢˜ä¸€æ ·ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£ã€‚'ä½ çªç„¶æ˜ç™½ï¼Œç«èµ›æ•™ä¼šä½ çš„ä¸åªæ˜¯ç®—æ³•ï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼ã€‚",
        //        choices: [
        //            { text: "é‡æ‹¾ä¿¡å¿ƒï¼Œåº”ç”¨ç®—æ³•æ€ç»´", effect: { math: 3, physics: 2, stress: -5 }, next: 18 },
        //            { text: "æ„Ÿåˆ°é—æ†¾ï¼Œå›ä¸å»äº†", effect: { stress: 8 }, next: 18 },
        //            { text: "é‡Šç„¶ï¼Œæ„Ÿè°¢é‚£æ®µç»å†", effect: { stress: -8, energy: 5 }, next: 18 }
        //        ]
        //    },
        //    {
        //        id: 18,
        //        week: 17,
        //        day: 6,
        //        title: "å‘¨æ—¥çš„ç¯®çƒåœº",
        //        content: "çˆ¶äº²éš¾å¾—ä¼‘æ¯ï¼Œé—®ä½ è¦ä¸è¦å»æ‰“çƒã€‚ä½ å·²ç»å¾ˆä¹…æ²¡æ‘¸ç¯®çƒäº†ï¼Œä¸Šä¸€æ¬¡è¿˜æ˜¯ç«èµ›é›†è®­å‰ã€‚",
        //        choices: [
        //            { text: "æ”¾ä¸‹ä¹¦æœ¬ï¼Œå»æ‰“ä¸€åœº", effect: { parents: 5, energy: 10, stress: -8 }, next: 19 },
        //            { text: "æ‹’ç»ï¼Œè¯´ä½œä¸šå¤ªå¤š", effect: { parents: -2, stress: 3 }, next: 19 },
        //            { text: "æŠ˜ä¸­ï¼Œåªæ‰“åŠå°æ—¶", effect: { parents: 3, energy: 5, stress: -3 }, next: 19 }
        //        ]
        //    },
        //    {
        //        id: 19,
        //        week: 18,
        //        day: 4,
        //        title: "çˆ¶äº²çš„ä¹¦æˆ¿",
        //        content: "ä½ æ‰¾èµ„æ–™æ—¶ï¼Œæ— æ„çœ‹åˆ°çˆ¶äº²æŠ½å±‰é‡Œä¸€ä¸ªæ—§ç¬”è®°æœ¬ã€‚é‡Œé¢ç«Ÿè®°å½•ç€ä»–å¹´è½»æ—¶è‡ªå­¦æ— çº¿ç”µçš„ç”µè·¯å›¾ï¼Œè¿˜æœ‰ä¸€è¡Œå°å­—ï¼š'ç»™æœªæ¥çš„å„¿å­ï¼šæ‰¾åˆ°ä½ çš„é¢‘ç‡ã€‚'",
        //        choices: [
        //            { text: "æ·±å—è§¦åŠ¨ï¼Œä¸çˆ¶äº²æ·±å¤œé•¿è°ˆ", effect: { parents: 5, stress: -10, energy: 5 }, next: 20 },
        //            { text: "é»˜é»˜æ”¾å›ï¼Œä½†å†…å¿ƒæ³›èµ·æ³¢æ¾œ", effect: { parents: 2, stress: -5 }, next: 20 },
        //            { text: "è§‰å¾—æ— å…³ï¼Œç»§ç»­è‡ªå·±çš„ç„¦è™‘", effect: { stress: 10 }, next: 20 }
        //        ]
        //    },
        //    {
        //        id: 20,
        //        week: 19,
        //        day: 2,
        //        title: "è‹±è¯­æ¼”è®²",
        //        content: "è‹±è¯­è¯¾è¦æ±‚æ¯äººåšä¸‰åˆ†é’Ÿæ¼”è®²ã€‚ä½ é€‰æ‹©äº†'ç®—æ³•ä¸äººç”Ÿ'è¿™ä¸ªé¢˜ç›®ï¼Œç”¨è®¡ç®—æœºæœ¯è¯­æ¯”å–»å­¦ä¹ è¿‡ç¨‹ã€‚è®²å®Œåï¼ŒåŒå­¦ä»¬è‹¥æœ‰æ‰€æ€ã€‚",
        //        choices: [
        //            { text: "æ„Ÿåˆ°è‡ªä¿¡ï¼Œæ”¶è·æŒå£°", effect: { english: 2, stress: -5, teacher: 3 }, next: 21 },
        //            { text: "ç´§å¼ è¿‡åº¦ï¼Œå‘æŒ¥ä¸ä½³", effect: { stress: 5 }, next: 21 },
        //            { text: "å¹³æ·¡å®Œæˆï¼Œä½†å†…å¿ƒæ»¡è¶³", effect: { stress: -3 }, next: 21 }
        //        ]
        //    },
        //    {
        //        id: 21,
        //        week: 20,
        //        day: 1,
        //        title: "å›åº”",
        //        content: "å¥¹é€’æ¥ä¸€å¼ çº¸æ¡ï¼š'è°¢è°¢ä½ ä¸€ç›´å¸®æˆ‘...ã€‚æˆ‘ä»¬ä¸€èµ·åŠªåŠ›ï¼Œè€ƒåŒä¸€æ‰€å¤§å­¦å§ï¼'",
        //        choices: [
        //            { text: "å¼€å¿ƒæ¥å—ï¼ŒåŠ¨åŠ›æ»¡æ»¡", effect: { crush: 15, stress: -10, energy: 30 }, next: 22 },
        //            { text: "ç´§å¼ ä¸çŸ¥æ‰€æª", effect: { stress: 10 }, next: 22 },
        //            { text: "æ‹’ç»ï¼Œè¯´è¦ä¸“å¿ƒå­¦ä¹ ", effect: { crush: -20, stress: 5 }, next: 22 }
        //        ]
        //    },
        //    {
        //        id: 22,
        //        week: 21,
        //        day: 5,
        //        title: "æ™šè‡ªä¹ çš„åœç”µ",
        //        content: "æ™šè‡ªä¹ æ—¶çªç„¶åœç”µï¼Œæ•™å®¤é™·å…¥é»‘æš—å’ŒçŸ­æš‚çš„éªšåŠ¨ã€‚æœ‰äººæ‰“å¼€äº†æ‰‹æœºæ‰‹ç”µç­’ï¼Œå¾®å…‰ä¸­ï¼Œä½ çœ‹åˆ°å¥¹æ­£å°±ç€å…‰ç»§ç»­çœ‹ä¹¦ã€‚",
        //        choices: [
        //            { text: "ä¹Ÿæ‰“å¼€æ‰‹æœºï¼Œç»§ç»­å­¦ä¹ ", effect: { crush: 1, stress: -2 }, next: 23 },
        //            { text: "æè®®å¤§å®¶ä¼‘æ¯èŠå¤©", effect: { classmateA: 5, stress: -8 }, next: 23 },
        //            { text: "é»˜é»˜çœ‹ç€çª—å¤–ï¼Œæ€è€ƒ", effect: { stress: -5 }, next: 23 }
        //        ]
        //    },
        //    {
        //        id: 23,
        //        week: 22,
        //        day: 2,
        //        title: "å¥¹çš„ç”Ÿæ—¥",
        //        content: "ä½ å¬è¯´ä»Šå¤©æ˜¯å¥¹çš„ç”Ÿæ—¥ã€‚çŠ¹è±«å†ä¸‰ï¼Œä½ åœ¨å¥¹å¸¸é—®é—®é¢˜çš„é‚£æœ¬ç‰©ç†ä¹ é¢˜é›†æ‰‰é¡µï¼Œç”¨é“…ç¬”è½»è½»å†™ä¸‹'Happy Birthday'ã€‚",
        //        choices: [
        //            { text: "é¼“èµ·å‹‡æ°”ï¼Œå½“é¢é€ç»™å¥¹å¹¶ç¥å¥¹ç”Ÿæ—¥å¿«ä¹", effect: { crush: 5, stress: 5 }, next: 24 },
        //            { text: "è¶å¥¹ä¸æ³¨æ„ï¼Œæ‚„æ‚„æ”¾å›å¥¹ä¹¦æ¡Œ", effect: { crush: 2, stress: -2 }, next: 24 },
        //            { text: "æœ€ç»ˆæ“¦æ‰ï¼Œæ²¡æœ‰è¡ŒåŠ¨", effect: { stress: 3, crush: -5 }, next: 24 }
        //        ]
        //    },
        //    {
        //        id: 24,
        //        week: 23,
        //        day: 1,
        //        title: "æ¨¡æ‹Ÿå¿—æ„¿å¡«æŠ¥",
        //        content: "å­¦æ ¡ç»„ç»‡æ¨¡æ‹Ÿå¡«æŠ¥å¿—æ„¿ã€‚ä½ çœ‹ç€é‚£äº›æ›¾ç»æ¢¦æƒ³çš„è®¡ç®—æœºå¼ºæ ¡ï¼Œåˆçœ‹äº†çœ‹è‡ªå·±ç°åœ¨çš„æˆç»©ï¼Œåœ¨ç†æƒ³ä¸ç°å®é—´çŠ¹è±«ã€‚",
        //        choices: [
        //            { text: "åšæŒæ¢¦æƒ³ï¼Œå¡«æŠ¥å¼ºæ ¡", effect: { energy: 10, stress: 8 }, next: 25 },
        //            { text: "åŠ¡å®é€‰æ‹©ï¼Œä¿è¯å½•å–", effect: { stress: -5 }, next: 25 },
        //            { text: "å¾æ±‚è€å¸ˆå’Œçˆ¶æ¯æ„è§", effect: { parents: 3, teacher: 3, stress: -3 }, next: 25 }
        //        ]
        //    },
        //    {
        //        id: 25,
        //        week: 24,
        //        day: 3,
        //        title: "å¯’å‡å‰å¤œ",
        //        content: "æœŸæœ«è€ƒè¯•ç»“æŸï¼Œä½ è€ƒè¿›äº†ç­çº§å‰10ã€‚å¯’å‡æ¥ä¸´ï¼Œä½†ä½ çŸ¥é“ï¼ŒçœŸæ­£çš„å†²åˆºæ‰åˆšåˆšå¼€å§‹ã€‚",
        //        choices: [
        //            { text: "åˆ¶å®šå¯’å‡è®¡åˆ’ï¼Œå…¨åŠ›å†²åˆº", effect: { energy: 5, stress: -5 }, next: 26 },
        //            { text: "å…ˆæ”¾æ¾å‡ å¤©ï¼Œå†å­¦ä¹ ", effect: { energy: 10, stress: -10 }, next: 26 },
        //            { text: "æ„Ÿåˆ°ç–²æƒ«ï¼Œæƒ³æ”¾å¼ƒ", effect: { stress: 10 }, next: 26 }
        //        ]
        //    },
        //    {
        //        id: 26,
        //        week: 26,
        //        day: 6,
        //        title: "å¯’å‡è‡ªä¹ å®¤",
        //        content: "ä½ å‘ç°'å·ç‹'åŒæ¡Œå’Œå‡ ä¸ªåŒå­¦ç»„äº†ä¸ªçº¿ä¸Šè‡ªä¹ å®¤ï¼Œäº’ç›¸ç›‘ç£ã€‚å¥¹ä¹Ÿåœ¨é‡Œé¢ã€‚çŠ¹è±«äº†ä¸€ä¸‹ï¼Œä½ å‘é€äº†åŠ å…¥ç”³è¯·ã€‚",
        //        choices: [
        //            { text: "æ‰“å¼€æ‘„åƒå¤´ï¼Œæ²‰æµ¸å­¦ä¹ ", effect: { energy: 5, crush: 3, classmateA: 5 }, next: 27 },
        //            { text: "åªå¼€éº¦ï¼Œå¶å°”è®¨è®ºé—®é¢˜", effect: { stress: -3, subjects: { all: 1 } }, next: 27 },
        //            { text: "æ½œæ°´ä¸­ï¼Œæ„Ÿå—æ°›å›´", effect: { stress: -5 }, next: 27 }
        //        ]
        //    },
        //    {
        //        id: 27,
        //        week: 30,
        //        day: 5,
        //        title: "æ„Ÿæ‚Ÿ",
        //        content: "äº²æˆšä»¬é—®èµ·ä½ çš„æˆç»©ï¼Œçˆ¶æ¯éª„å‚²åœ°è¯´ï¼š'è¿›æ­¥å¾ˆå¤§ï¼'ä½ çªç„¶æ„è¯†åˆ°ï¼Œè‡ªå·±çš„åŠªåŠ›ä¸ä»…æ˜¯ä¸ºäº†è‡ªå·±ï¼Œä¹Ÿä¸ºäº†ä¸è¾œè´Ÿä»–ä»¬çš„æœŸæœ›ã€‚",
        //        choices: [
        //            { text: "æ„Ÿåˆ°è´£ä»»é‡å¤§", effect: { parents: 5, stress: 5 }, next: 28 },
        //            { text: "æ„Ÿåˆ°æ¸©æš–å’Œæ”¯æŒ", effect: { parents: 8, stress: -5 }, next: 28 },
        //            { text: "æ„Ÿåˆ°å‹åŠ›å€å¢", effect: { stress: 10 }, next: 28 }
        //        ]
        //    },
        //    {
        //        id: 28,
        //        week: 32,
        //        day: 1,
        //        title: "äºŒæ¨¡ä¹‹å",
        //        content: "ç¬¬äºŒæ¬¡æ¨¡æ‹Ÿè€ƒæ’åç¨³ä¸­æœ‰è¿›ï¼Œä½†ç¦»æ¢¦æƒ³å­¦æ ¡è¿˜æœ‰è·ç¦»ã€‚è€å¸ˆåœ¨åˆ†æè¯•å·æ—¶è¯´ï¼š'æœ‰äº›äººçš„æ½œåŠ›ï¼Œä¼šåœ¨æœ€åä¸¤ä¸ªæœˆæ‰çœŸæ­£çˆ†å‘ã€‚'ä½ æ„Ÿè§‰ä»–åœ¨çœ‹ä½ ã€‚",
        //        choices: [
        //            { text: "å¤‡å—é¼“èˆï¼Œç»†åŒ–æ¯æ—¥è®¡åˆ’", effect: { energy: 10, teacher: 5, stress: 3 }, next: 29 },
        //            { text: "å‹åŠ›å€å¢ï¼Œå®³æ€•è¾œè´ŸæœŸæœ›", effect: { stress: 10 }, next: 29 },
        //            { text: "å¹³é™åˆ†æï¼ŒæŸ¥æ¼è¡¥ç¼º", effect: { stress: -2, subjects: { all: 1 } }, next: 29 }
        //        ]
        //    },
        //    {
        //        id: 29,
        //        week: 35,
        //        day: 2,
        //        title: "å€’è®¡æ—¶100å¤©",
        //        content: "é»‘æ¿ä¸Šçš„æ•°å­—å˜æˆ100ã€‚æ•™å®¤é‡Œå¼¥æ¼«ç€ç´§å¼ çš„æ°”æ°›ï¼Œä½†ä½ æ„Ÿåˆ°ä¸€ç§å¥‡æ€ªçš„å¹³é™ã€‚ä¸¤å¹´ç«èµ›ï¼Œä¸€å¹´WHKï¼Œä½ å·²ç»å‡†å¤‡å¥½äº†ã€‚",
        //        choices: [
        //            { text: "å……æ»¡ä¿¡å¿ƒï¼Œè¿æ¥æŒ‘æˆ˜", effect: { stress: 10, energy: 20 }, next: 30 },
        //            { text: "æŒ‰éƒ¨å°±ç­ï¼Œä¿æŒèŠ‚å¥", effect: { stress: 5 }, next: 30 },
        //            { text: "ç´§å¼ ä¸å®‰ï¼Œéš¾ä»¥å…¥çœ ", effect: { stress: 10, energy: -5 }, next: 30 }
        //        ]
        //    },
        //    {
        //        id: 30,
        //        week: 38,
        //        day: 5,
        //        title: "æˆ˜å‹çš„çº¦å®š",
        //        content: "'å·ç‹'åŒæ¡Œåœ¨æ”¾å­¦åå«ä½ä½ ï¼š'æœ€åå‡ åå¤©äº†ï¼Œæ¯”æ¯”çœ‹è°ä¸‹æ¬¡å‘¨è€ƒæ•°å­¦é«˜ï¼Ÿè¾“äº†è¯·å–å¥¶èŒ¶ã€‚'ä½ çœ‹åˆ°ä»–çœ¼é‡Œçš„è®¤çœŸï¼Œä¸åªæ˜¯ç©ç¬‘ã€‚",
        //        choices: [
        //            { text: "æ¬£ç„¶åº”æˆ˜ï¼Œå‡»æŒä¸ºèª“", effect: { classmateA: 10, energy: 8, stress: -3 }, next: 31 },
        //            { text: "è‹¦ç¬‘è¯´å‹åŠ›å¥½å¤§ï¼Œä½†æ¥å—", effect: { stress: 5, classmateA: 5 }, next: 31 },
        //            { text: "æ‹’ç»ï¼Œè¯´ä¸æƒ³åˆ†å¿ƒ", effect: { stress: -2, classmateA: -3 }, next: 31 }
        //        ]
        //    },
        //    {
        //        id: 31,
        //        week: 40,
        //        day: 4,
        //        title: "æœ€åçš„å†²åˆº",
        //        content: "å°å‡æœŸï¼Œä½ æ‹’ç»äº†æ‰€æœ‰é‚€çº¦ï¼Œæ¯å¤©å­¦ä¹ 16å°æ—¶ã€‚è™½ç„¶è¾›è‹¦ï¼Œä½†ä½ çŸ¥é“ï¼Œè¿™æ˜¯æœ€åçš„å†²åˆºã€‚",
        //        choices: [
        //            { text: "åšæŒåˆ°åº•ï¼Œä¸æ”¾å¼ƒ", effect: { energy: -10, stress: 5, subjects: { all: 2 }, health: -5 }, next: 32 },
        //            { text: "é€‚å½“ä¼‘æ¯ï¼ŒåŠ³é€¸ç»“åˆ", effect: { energy: 5, stress: -5 }, next: 32 },
        //            { text: "æ„Ÿåˆ°å´©æºƒï¼Œæƒ³æ”¾å¼ƒ", effect: { stress: 15, energy: -15 }, next: 32 }
        //        ]
        //    },
        //    {
        //        id: 32,
        //        week: 42,
        //        day: 0,
        //        title: "ä¸€åœºé‡æ„Ÿå†’",
        //        content: "è¿æ—¥çš„ç–²åŠ³ç§¯ç´¯ï¼Œä½ ç»ˆäºç—…å€’äº†ã€‚é«˜çƒ§æ—¶è¿·è¿·ç³Šç³Šï¼Œæƒ³èµ·ä»¥å‰ç«èµ›å‰ä¹Ÿæ€»è¿™æ ·ã€‚æ¯äº²å®ˆåœ¨åºŠè¾¹ï¼Œç”¨æ¹¿æ¯›å·¾ç»™ä½ æ•·é¢å¤´ï¼Œå°±åƒå°æ—¶å€™ä¸€æ ·ã€‚",
        //        choices: [
        //            { text: "æ„§ç–šåˆæ¸©æš–ï¼Œä¹–ä¹–ä¼‘æ¯", effect: { parents: 8, energy: 15, stress: -10 }, next: 33 },
        //            { text: "å¿ƒæ€¥å¦‚ç„šï¼Œæƒ³çˆ¬èµ·æ¥çœ‹ä¹¦", effect: { energy: -10, stress: 10, parents: -2, health: -30 }, next: 33 },
        //            { text: "æ˜æ˜æ²‰æ²‰ï¼Œåªæƒ³ç¡è§‰", effect: { energy: 20, stress: -5 }, next: 33 }
        //        ]
        //    },
        //    {
        //        id: 33,
        //        week: 45,
        //        day: 1,
        //        title: "æœ€åçš„å‘Šåˆ«",
        //        content: "é«˜è€ƒå‰60å¤©ï¼Œä½ æ•´ç†ä¹¦æ¡Œï¼Œç¿»å‡ºé‚£å¼ åˆå½±ã€‚ç…§ç‰‡èƒŒé¢å†™ç€ï¼š'To be continued...'ä½ ç¬‘äº†ç¬‘ï¼ŒæŠŠå®ƒæ”¶è¿›æŠ½å±‰ã€‚æ˜¯çš„ï¼Œæ•…äº‹è¿˜åœ¨ç»§ç»­ã€‚",
        //        choices: [
        //            { text: "å……æ»¡æœŸå¾…ï¼Œè¿æ¥æŒ‘æˆ˜", effect: { stress: -10, energy: 10 }, next: 34 },
        //            { text: "å¹³é™æ¥å—ï¼Œé¡ºå…¶è‡ªç„¶", effect: { stress: -5 }, next: 34 },
        //            { text: "ç´§å¼ ä¸å®‰ï¼Œéš¾ä»¥å…¥çœ ", effect: { stress: 10, energy: -5, health: -10 }, next: 34 }
        //        ]
        //    },
        //    {
        //        id: 34,
        //        week: 48,
        //        day: 3,
        //        title: "æœ€åçš„ç­”ç–‘",
        //        content: "æ”¾å­¦åï¼Œä½ é¼“èµ·å‹‡æ°”å‘æš—æ‹çš„å¥¹é—®äº†é“ä¸€ç›´æ²¡å¼„æ‡‚çš„è¯­æ–‡å¤è¯—é‰´èµé¢˜ã€‚å¥¹è®²å¾—å¾ˆä»”ç»†ï¼Œå¤•é˜³æŠŠä¸¤ä¸ªäººçš„å½±å­æ‹‰å¾—å¾ˆé•¿ã€‚è®²å®Œåï¼Œä¸¤äººéƒ½æ²‰é»˜äº†ä¸€ä¼šå„¿ã€‚",
        //        choices: [
        //            { text: "è½»å£°è¯´'è°¢è°¢ï¼Œä¸€èµ·åŠ æ²¹'", effect: { crush: 5, stress: -8, energy: 5 }, next: 35 },
        //            { text: "å¼€ç©ç¬‘ç¼“è§£æ°”æ°›'è€ƒå®Œå†è°¢ä½ '", effect: { crush: 3, stress: -5 }, next: 35 },
        //            { text: "ç‚¹ç‚¹å¤´ï¼ŒåŒ†å¿™æ”¶æ‹¾ä¹¦åŒ…ç¦»å¼€", effect: { stress: 3, crush: -3 }, next: 35 }
        //        ]
        //    },
        //    {
        //        id: 35,
        //        week: 50,
        //        day: 6,
        //        title: "é«˜è€ƒå‰å¤œ",
        //        content: "ä½ èººåœ¨åºŠä¸Šï¼Œå›æƒ³è¿™ä¸€å¹´ã€‚ä»è¿·èŒ«åˆ°åšå®šï¼Œä»å¤±è½åˆ°å¸Œæœ›ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œä½ éƒ½å·²ç»æˆé•¿ã€‚é©¬ä¸Šå°±æ˜¯æ£€éªŒçš„æ—¶åˆ»ã€‚",
        //        choices: [
        //            { text: "å……æ»¡ä¿¡å¿ƒï¼Œå®‰ç„¶å…¥ç¡", effect: { stress: -10, energy: 5 }, next: 36 },
        //            { text: "å¹³é™æ¥å—ï¼Œé¡ºå…¶è‡ªç„¶", effect: { stress: -5 }, next: 36 },
        //            { text: "ç´§å¼ å¤ä¹ ï¼Œæœ€åå†²åˆº", effect: { energy: -10, stress: 10 }, next: 36 }
        //        ]
        //    },
        //    {
        //        id: 36,
        //        week: 51,
        //        day: 6,
        //        title: "æ‰¿è¯º",
        //        content: "å¥¹æ‰¾åˆ°ä½ :'é«˜è€ƒåŠ æ²¹ï¼æˆ‘ä»¬......'",
        //        choices: [
        //            { text: "ç›¸çº¦è€ƒåï¼Œå…±èµ´å±±æµ·", effect: { stress: 5, energy: 5, crush: 10 }, next: null },
        //            { text: "é»˜é»˜ç‚¹å¤´ï¼Œè½¬èº«ç¦»å»", effect: { stress: 10, energy: 5, crush: 5 }, next: null },
        //            { text: "å¿ƒä¹±å¦‚éº»ï¼Œæ— è¨€ä»¥å¯¹", effect: { energy: -10, stress: 10, crush: -2 }, next: null }
        //        ]
        //    },
        //];





        // éšè—å‰§æƒ…ï¼ˆç‰¹æ®Šæ¡ä»¶è§¦å‘ï¼‰
        const hiddenEvents = [
            {
                id: 'h1',
                condition: (state) => state.relationships.crush >= 60 && state.week >= 20,
                title: "ç§˜å¯†åŸºåœ°",
                content: "å¥¹å¸¦ä½ æ¥åˆ°å­¦æ ¡å¤©å°ï¼Œè¯´è¿™æ˜¯å¥¹çš„ç§˜å¯†åŸºåœ°ã€‚ä½ ä»¬é åœ¨ä¸€èµ·ä¸€èµ·çœ‹å¤•é˜³ï¼ŒèŠæœªæ¥ã€‚è¿™æ˜¯ä½ AFOåæœ€æ”¾æ¾çš„æ—¶åˆ»ã€‚",
                effect: { crush: 5, stress: -15, energy: 5 }
            },
            {
                id: 'h2',
                condition: (state) => state.memoryCount >= 5 && state.week >= 15,
                title: "æ•™ç»ƒçš„ç”µè¯",
                content: "OIæ•™ç»ƒæ‰“æ¥ç”µè¯ï¼š'æ— è®ºé€‰æ‹©ä»€ä¹ˆï¼Œéƒ½è¦åšåˆ°æœ€å¥½ï¼ŒåŠ æ²¹ï¼'",
                effect: { stress: -10, energy: 5, mental: 5 }
            },
            {
                id: 'h3',
                condition: (state) => state.relationships.parents >= 80 && state.week >= 10,
                title: "çˆ¶æ¯çš„ä¿¡",
                content: "ä½ åœ¨ä¹¦åŒ…é‡Œå‘ç°çˆ¶æ¯å†™çš„ä¸€å°ä¿¡ï¼š'å­©å­ï¼Œæˆ‘ä»¬ä¸ºä½ éª„å‚²ã€‚ä¸æ˜¯å› ä¸ºæˆç»©ï¼Œè€Œæ˜¯å› ä¸ºä½ çš„åšæŒã€‚'",
                effect: { parents: 10, stress: -15, mental: 10 }
            },
            {
                id: 'h4',
                condition: (state) => state.subjects.math >= 90 && state.subjects.physics >= 90,
                title: "æ•°å­¦ç«èµ›é‚€è¯·",
                content: "æ•°å­¦è€å¸ˆé‚€è¯·ä½ å‚åŠ ä¸€ä¸ªæ•°å­¦ç«èµ›ï¼Œè¯´ï¼š'è™½ç„¶ä½ AFOäº†ï¼Œä½†ä½ çš„å¤©èµ‹ä¸è¯¥æµªè´¹ã€‚'",
                choices: [
                    { text: "å‚åŠ æ¯”èµ›ï¼Œè¯æ˜è‡ªå·±", effect: { stress: 10, math: 3, teacher: 5 } },
                    { text: "æ‹’ç»ï¼Œä¸“å¿ƒé«˜è€ƒ", effect: { stress: -5, teacher: -2 } }
                ]
            },
            {
                id: 'h5',
                condition: (state) => state.week === 26 && state.season === 3,
                title: "æ˜¥èŠ‚çš„ç¤¼ç‰©",
                content: "æ˜¥èŠ‚ï¼Œçˆ·çˆ·ç»™ä½ ä¸€ä¸ªçº¢åŒ…ï¼Œè¯´ï¼š'è¿™æ˜¯æˆ‘è¿™å‡ ä¸ªæœˆæ”’ä¸‹çš„ï¼Œç»™ä½ ä¹°å¤ä¹ èµ„æ–™ã€‚'ä½ æ„ŸåŠ¨å¾—è¯´ä¸å‡ºè¯ã€‚",
                effect: { money: 1000, parents: 5, stress: -10 }
            },
            {
                id: 'h6',
                condition: (state) => state.week === 45 && state.subject.math >= 90 && state.subject.physics >= 90 && state.subject.biology >= 90 && state.subject.chemistry >= 90 && state.subject.english <= 20 && state.subject.chinese <= 20,
                title: "å¼€å°ç¶",
                content: "é«˜è€ƒåœ¨å³ï¼Œä½†æ˜¯ä½ çš„è¯­æ–‡å’Œè‹±è¯­ä¸¥é‡æ‹–ç´¯äº†ä½ çš„æ€»åˆ†ï¼Œå­¦æ ¡å†³å®šç»™ä½ çš„è¯­æ–‡å’Œè‹±è¯­å¼€å°ç¶",
                effect: { chinese: 20, english: 20 }
            }
        ];

        // æˆå°±ç³»ç»Ÿï¼ˆ60ä¸ªæˆå°±ï¼‰
        const achievements = {
            // åŸºç¡€æˆå°±
            'first-week': { name: 'ç¬¬ä¸€å‘¨', desc: 'å®Œæˆç¬¬ä¸€å‘¨', hidden: false },
            'first-month': { name: 'ç¬¬ä¸€ä¸ªæœˆ', desc: 'å®Œæˆç¬¬ä¸€ä¸ªæœˆ', hidden: false },
            'study-100': { name: 'ä¹¦å±±æœ‰è·¯', desc: 'ç´¯è®¡å­¦ä¹ 100å°æ—¶', hidden: false },
            'rest-50': { name: 'åŠ³é€¸ç»“åˆ', desc: 'ç´¯è®¡ä¼‘æ¯50å°æ—¶', hidden: false },
            'exercise-30': { name: 'å¼ºèº«å¥ä½“', desc: 'ç´¯è®¡é”»ç‚¼30å°æ—¶', hidden: false },
            'social-20': { name: 'ç¤¾äº¤è¾¾äºº', desc: 'ç´¯è®¡ç¤¾äº¤20å°æ—¶', hidden: false },

            // çŠ¶æ€æˆå°±
            'energy-100': { name: 'ç²¾åŠ›å……æ²›', desc: 'ç²¾åŠ›è¾¾åˆ°100', hidden: false },
            'stress-0': { name: 'é›¶å‹åŠ›', desc: 'å‹åŠ›é™ä¸º0', hidden: false },
            'health-100': { name: 'èº«ä½“å¥åº·', desc: 'å¥åº·è¾¾åˆ°100', hidden: false },
            'mental-100': { name: 'å¿ƒç†å¼ºå¤§', desc: 'å¿ƒç†è¾¾åˆ°100', hidden: false },
            'money-1000': { name: 'å°æœ‰ç§¯è“„', desc: 'å­˜æ¬¾è¾¾åˆ°1000å…ƒ', hidden: false },
            'money-0': { name: 'æœˆå…‰æ—', desc: 'å­˜æ¬¾ä¸º0', hidden: false },

            // å­¦ç§‘æˆå°±
            'chinese-80': { name: 'æ–‡é‡‡é£æ‰¬', desc: 'è¯­æ–‡è¾¾åˆ°80', hidden: false },
            'math-90': { name: 'æ•°å­¦å¤§å¸ˆ', desc: 'æ•°å­¦è¾¾åˆ°90', hidden: false },
            'english-80': { name: 'è‹±è¯­æµåˆ©', desc: 'è‹±è¯­è¾¾åˆ°80', hidden: false },
            'physics-90': { name: 'ç‰©ç†ä¹‹ç¥', desc: 'ç‰©ç†è¾¾åˆ°90', hidden: false },
            'chemistry-80': { name: 'åŒ–å­¦ä¸“å®¶', desc: 'åŒ–å­¦è¾¾åˆ°80', hidden: false },
            'biology-80': { name: 'ç”Ÿç‰©è¾¾äºº', desc: 'ç”Ÿç‰©è¾¾åˆ°80', hidden: false },
            'all-85': { name: 'å…¨ç§‘é«˜æ‰‹', desc: 'å…¨ç§‘è¾¾åˆ°85', hidden: false },
            'all-95': { name: 'å…­è¾¹å½¢æˆ˜å£«', desc: 'å…¨ç§‘è¾¾åˆ°95', hidden: true },

            // å…³ç³»æˆå°±
            'teacher-90': { name: 'ç­ä¸»ä»»å® å„¿', desc: 'ç­ä¸»ä»»å…³ç³»90', hidden: false },
            'math-teacher-90': { name: 'æ•°å­¦è€å¸ˆå–œçˆ±', desc: 'æ•°å­¦è€å¸ˆå…³ç³»90', hidden: false },
            'parents-90': { name: 'å®¶åº­å’Œç¦', desc: 'çˆ¶æ¯å…³ç³»90', hidden: false },
            'crush-60': { name: 'æš—æ‹æˆåŠŸ', desc: 'æš—æ‹å¯¹è±¡å…³ç³»60', hidden: false },
            'classmate-90': { name: 'åŒå­¦é¢†è¢–', desc: 'åŒå­¦å…³ç³»90', hidden: false },

            // æ´»åŠ¨æˆå°±
            'exam-5': { name: 'è€ƒè¯•æˆ˜å£«', desc: 'å‚åŠ 5æ¬¡æ¨¡è€ƒ', hidden: false },
            'homework-100': { name: 'ä½œä¸šè¾¾äºº', desc: 'å®Œæˆ100æ¬¡ä½œä¸š', hidden: false },
            'activity-20': { name: 'æ´»åŠ¨å®¶', desc: 'å‚åŠ 20æ¬¡æ´»åŠ¨', hidden: false },
            'memory-10': { name: 'å›å¿†å¤§å¸ˆ', desc: 'å›å¿†10æ¬¡', hidden: false },

            // ç‰¹æ®Šæˆå°±
            'perfect-week': { name: 'å®Œç¾ä¸€å‘¨', desc: 'ä¸€å‘¨æ— è´Ÿé¢äº‹ä»¶', hidden: false },
            'stress-management': { name: 'å‹åŠ›ç®¡ç†', desc: 'å‹åŠ›ä½äº10æŒç»­10å‘¨', hidden: false },
            'early-bird': { name: 'æ—©èµ·é¸Ÿ', desc: 'ç²¾åŠ›ä¿æŒ90+æŒç»­5å‘¨', hidden: false },
            'night-owl': { name: 'å¤œçŒ«å­', desc: 'ç²¾åŠ›ä½äº10', hidden: false },
            'money-maker': { name: 'èµšé’±èƒ½æ‰‹', desc: 'é€šè¿‡å…¼èŒèµš500å…ƒ', hidden: false },
            'specialization': { name: 'ä¸“ç²¾ä¹‹è·¯', desc: 'é€‰æ‹©ä¸“ç²¾æ–¹å‘', hidden: false },

            // æ•…äº‹æˆå°±
            'story-5': { name: 'æ•…äº‹å¼€å§‹', desc: 'å®Œæˆ5ä¸ªæ•…äº‹äº‹ä»¶', hidden: false },
            'story-10': { name: 'æ•…äº‹å¤§å¸ˆ', desc: 'å®Œæˆ10ä¸ªæ•…äº‹äº‹ä»¶', hidden: false },
            'story-15': { name: 'å²è¯—æ—…ç¨‹', desc: 'å®Œæˆæ‰€æœ‰æ•…äº‹äº‹ä»¶', hidden: false },
            'hidden-1': { name: 'éšè—å‰§æƒ…1', desc: 'è§¦å‘éšè—å‰§æƒ…', hidden: true },
            'hidden-2': { name: 'éšè—å‰§æƒ…2', desc: 'è§¦å‘éšè—å‰§æƒ…', hidden: true },
            'hidden-3': { name: 'éšè—å‰§æƒ…3', desc: 'è§¦å‘éšè—å‰§æƒ…', hidden: true },

            // ç»“å±€æˆå°±ï¼ˆ12ä¸ªï¼‰
            'ending-1': { name: 'ç»“å±€ï¼šé¡¶å°–å¤§å­¦', desc: 'è€ƒå…¥é¡¶å°–å¤§å­¦', hidden: false },
            'ending-2': { name: 'ç»“å±€ï¼šé‡ç‚¹å¤§å­¦', desc: 'è€ƒå…¥é‡ç‚¹å¤§å­¦', hidden: false },
            'ending-3': { name: 'ç»“å±€ï¼šä¸€æœ¬å¤§å­¦', desc: 'è€ƒå…¥ä¸€æœ¬å¤§å­¦', hidden: false },
            'ending-4': { name: 'ç»“å±€ï¼šäºŒæœ¬å¤§å­¦', desc: 'è€ƒå…¥äºŒæœ¬å¤§å­¦', hidden: false },
            'ending-5': { name: 'ç»“å±€ï¼šæœªèƒ½å¦‚æ„¿', desc: 'é«˜è€ƒå¤±åˆ©', hidden: false },
            'ending-6': { name: 'ç»“å±€ï¼šç«èµ›å›å½’', desc: 'é‡è¿”ä¿¡æ¯å­¦', hidden: false },
            'ending-7': { name: 'ç»“å±€ï¼šåˆ›ä¸šä¹‹è·¯', desc: 'é€‰æ‹©åˆ›ä¸š', hidden: false },
            'ending-8': { name: 'ç»“å±€ï¼šè‰ºæœ¯ç‰¹é•¿', desc: 'è‰ºæœ¯å‘å±•', hidden: false },
            'ending-9': { name: 'ç»“å±€ï¼šä½“è‚²ç‰¹æ‹›', desc: 'ä½“è‚²å‘å±•', hidden: false },
            'ending-10': { name: 'ç»“å±€ï¼šå‡ºå›½æ·±é€ ', desc: 'å‡ºå›½ç•™å­¦', hidden: false },
            'ending-11': { name: 'ç»“å±€ï¼šé—´éš”å¹´', desc: 'é€‰æ‹©é—´éš”å¹´', hidden: false },
            'ending-12': { name: 'ç»“å±€ï¼šå¹³å‡¡ä¹‹è·¯', desc: 'å¹³å‡¡ç”Ÿæ´»', hidden: false },

            // éšè—ç»“å±€
            'ending-hidden-1': { name: 'ç»“å±€ï¼šçˆ±æƒ…ä¸å­¦ä¸š', desc: 'å’Œæš—æ‹å¯¹è±¡ä¸€èµ·æˆåŠŸ', hidden: true },
            'ending-hidden-2': { name: 'ç»“å±€ï¼šå®¶åº­å’Œè§£', desc: 'ä¸çˆ¶æ¯è¾¾æˆç†è§£', hidden: true },
            'ending-hidden-3': { name: 'ç»“å±€ï¼šè‡ªæˆ‘æ•‘èµ', desc: 'æ‰¾åˆ°äººç”Ÿæ„ä¹‰', hidden: true }
        };

        // ==================== æ¸¸æˆé€»è¾‘ ====================

        // DOM å…ƒç´ ç¼“å­˜
        const elements = {
            week: document.getElementById('week'),
            day: document.getElementById('day'),
            period: document.getElementById('period'),
            season: document.getElementById('season'),
            daysLeft: document.getElementById('days-left'),
            vacationDays: document.getElementById('vacation-days'),

            energyBar: document.getElementById('energy-bar'),
            energyValue: document.getElementById('energy-value'),
            stressBar: document.getElementById('stress-bar'),
            stressValue: document.getElementById('stress-value'),
            healthBar: document.getElementById('health-bar'),
            healthValue: document.getElementById('health-value'),
            mentalBar: document.getElementById('mental-bar'),
            mentalValue: document.getElementById('mental-value'),
            moneyBar: document.getElementById('money-bar'),
            moneyValue: document.getElementById('money-value'),

            chineseBar: document.getElementById('chinese-bar'),
            chineseValue: document.getElementById('chinese-value'),
            mathBar: document.getElementById('math-bar'),
            mathValue: document.getElementById('math-value'),
            englishBar: document.getElementById('english-bar'),
            englishValue: document.getElementById('english-value'),
            physicsBar: document.getElementById('physics-bar'),
            physicsValue: document.getElementById('physics-value'),
            chemistryBar: document.getElementById('chemistry-bar'),
            chemistryValue: document.getElementById('chemistry-value'),
            biologyBar: document.getElementById('biology-bar'),
            biologyValue: document.getElementById('biology-value'),

            teacherBar: document.getElementById('teacher-bar'),
            teacherValue: document.getElementById('teacher-value'),
            mathTeacherBar: document.getElementById('math-teacher-bar'),
            mathTeacherValue: document.getElementById('math-teacher-value'),
            chineseTeacherBar: document.getElementById('chinese-teacher-bar'),
            chineseTeacherValue: document.getElementById('chinese-teacher-value'),
            englishTeacherBar: document.getElementById('english-teacher-bar'),
            englishTeacherValue: document.getElementById('english-teacher-value'),
            classmateABar: document.getElementById('classmate-a-bar'),
            classmateAValue: document.getElementById('classmate-a-value'),
            classmateBBar: document.getElementById('classmate-b-bar'),
            classmateBValue: document.getElementById('classmate-b-value'),
            parentsBar: document.getElementById('parents-bar'),
            parentsValue: document.getElementById('parents-value'),
            crushBar: document.getElementById('crush-bar'),
            crushValue: document.getElementById('crush-value'),

            eventLog: document.getElementById('event-log'),
            currentStatus: document.getElementById('current-status'),
            randomEvent: document.getElementById('random-event'),
            relationshipStatus: document.getElementById('relationship-status'),
            economyStatus: document.getElementById('economy-status'),
            mentalStatus: document.getElementById('mental-status'),
            currentGoal: document.getElementById('current-goal'),
            goalProgress: document.getElementById('goal-progress'),

            scheduleList: document.getElementById('schedule-list'),
            homeworkCount: document.getElementById('homework-count'),
            weekActivities: document.getElementById('week-activities'),

            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notification-text'),

            gameStatus: document.getElementById('game-status'),

            actionCounter: document.getElementById('actionCounter'),
            hotkeyHint: document.getElementById('hotkeyHint'),

            achievementCount: document.getElementById('achievement-count'),
            achievementList: document.getElementById('achievement-list'),

            currentMoney: document.getElementById('current-money'),
            homeworkList: document.getElementById('homework-list'),
            storyTitle: document.getElementById('story-title'),
            storyContent: document.getElementById('story-content'),
            storyChoices: document.getElementById('story-choices'),
            goalContent: document.getElementById('goal-content'),
            achievementDetailContent: document.getElementById('achievement-detail-content')
        };

        // ==================== æ ¸å¿ƒæ¸¸æˆå‡½æ•° ====================

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // æ˜¾ç¤ºå¯åŠ¨å¼¹çª—ï¼ˆæåŠ©+ä»‹ç»ï¼‰
            document.getElementById('welcome-modal').style.display = 'flex';

            // ç”Ÿæˆç¬¬ä¸€å‘¨è¯¾ç¨‹è¡¨
            generateSchedule();
            addToLog("æ¸¸æˆå¼€å§‹ï¼ä½ ä»ä¿¡æ¯å­¦ç«èµ›ä¸­é€€å½¹ï¼Œå¼€å§‹äº†æ–‡åŒ–è¯¾çš„å¤‡æˆ˜ã€‚", "story");
            addToLog("ç­ä¸»ä»»æ‰¾ä½ è°ˆè¯ï¼š'ç«èµ›çš„æ€ç»´æ˜¯ä¼˜åŠ¿ï¼Œä½†è¦é€‚åº”æ–°çš„èŠ‚å¥ã€‚'", "neutral");

            // éšæœºåˆå§‹å¤©æ°”
            changeWeather();

            // æ£€æŸ¥ç‰¹æ®Šæ—¥æœŸ
            checkSpecialDay();

            // æ›´æ–°UI
            updateUI();
        }

        // ç”Ÿæˆè¯¾ç¨‹è¡¨
        function generateSchedule() {
            const subjects = ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­', 'ç‰©ç†', 'åŒ–å­¦', 'ç”Ÿç‰©'];
            const times = ['8:00', '9:00', '10:00', '11:00', '14:00', '15:00', '16:00'];

            gameState.schedule = [];

            // æ¯å‘¨6å¤©è¯¾ç¨‹ï¼ˆå‘¨ä¸€åˆ°å‘¨å…­ï¼‰
            for (let day = 0; day < 6; day++) {
                const dayName = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'][day];
                const numClasses = 3 + Math.floor(Math.random() * 3); // 3-5èŠ‚è¯¾

                for (let i = 0; i < numClasses; i++) {
                    const subject = subjects[Math.floor(Math.random() * subjects.length)];
                    const time = times[i];

                    gameState.schedule.push({
                        day: day,
                        dayName: dayName,
                        time: time,
                        subject: subject,
                        completed: false
                    });
                }
            }

            // å‘¨æ—¥ä¼‘æ¯
            updateScheduleUI();
        }

        // æ›´æ–°è¯¾ç¨‹è¡¨UI
        function updateScheduleUI() {
            elements.scheduleList.innerHTML = '';

            if (gameState.schedule.length === 0) {
                elements.scheduleList.innerHTML = '<div style="opacity:0.6;font-size:0.85rem;">æœ¬å‘¨æ— è¯¾ç¨‹å®‰æ’</div>';
                return;
            }

            // åªæ˜¾ç¤ºæœ¬å‘¨æœªå®Œæˆçš„è¯¾ç¨‹
            const upcoming = gameState.schedule.filter(s => !s.completed).slice(0, 8);

            upcoming.forEach(item => {
                const div = document.createElement('div');
                div.className = 'schedule-item';
                if (item.completed) div.classList.add('completed');

                div.innerHTML = `
                                                                                                                                                                                                                                                                                                                <span>${item.dayName} ${item.time}</span>
                                                                                                                                                                                                                                                                                                                <span class="time">${item.subject}</span>
                                                                                                                                                                                                                                                                                                            `;

                elements.scheduleList.appendChild(div);
            });

            if (upcoming.length === 0) {
                elements.scheduleList.innerHTML = '<div style="opacity:0.6;font-size:0.85rem;">æœ¬å‘¨è¯¾ç¨‹å·²å®Œæˆï¼</div>';
            }
        }

        // æ›´æ–°UI
        function updateUI() {
            // æ—¶é—´æ˜¾ç¤º
            elements.week.textContent = gameState.week;
            elements.day.textContent = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][gameState.dayOfWeek];
            elements.period.textContent = ['æ—©æ™¨', 'ä¸Šåˆ', 'ä¸‹åˆ', 'æ™šä¸Š'][gameState.period];
            elements.season.textContent = `${seasons[gameState.season].emoji} ${seasons[gameState.season].name}`;
            elements.daysLeft.textContent = gameState.daysLeft;
            elements.vacationDays.textContent = gameState.vacationDays;

            // æ ¸å¿ƒçŠ¶æ€
            elements.energyBar.style.width = `${gameState.energy}%`;
            elements.energyValue.textContent = `${Math.round(gameState.energy)}/100`;

            elements.stressBar.style.width = `${gameState.stress}%`;
            elements.stressValue.textContent = `${Math.round(gameState.stress)}/100`;

            elements.healthBar.style.width = `${gameState.health}%`;
            elements.healthValue.textContent = `${Math.round(gameState.health)}/100`;

            elements.mentalBar.style.width = `${gameState.mental}%`;
            elements.mentalValue.textContent = `${Math.round(gameState.mental)}/100`;

            elements.moneyBar.style.width = `${Math.min(100, gameState.money / 10)}%`;
            elements.moneyValue.textContent = `${gameState.money}å…ƒ`;

            // å­¦ç§‘è¿›åº¦
            for (const subject in gameState.subjects) {
                const bar = document.getElementById(`${subject}-bar`);
                const value = document.getElementById(`${subject}-value`);
                if (bar && value) {
                    bar.style.width = `${gameState.subjects[subject]}%`;
                    value.textContent = `${Math.round(gameState.subjects[subject])}/100`;
                }
            }

            // äººé™…å…³ç³»
            const relMap = {
                teacher: { bar: elements.teacherBar, value: elements.teacherValue },
                mathTeacher: { bar: elements.mathTeacherBar, value: elements.mathTeacherValue },
                chineseTeacher: { bar: elements.chineseTeacherBar, value: elements.chineseTeacherValue },
                englishTeacher: { bar: elements.englishTeacherBar, value: elements.englishTeacherValue },
                classmateA: { bar: elements.classmateABar, value: elements.classmateAValue },
                classmateB: { bar: elements.classmateBBar, value: elements.classmateBValue },
                parents: { bar: elements.parentsBar, value: elements.parentsValue },
                crush: { bar: elements.crushBar, value: elements.crushValue }
            };

            for (const key in relMap) {
                const val = gameState.relationships[key];
                relMap[key].bar.style.width = `${val}%`;
                relMap[key].value.textContent = Math.round(val);
            }

            // ä½œä¸šè®¡æ•°
            const homeworkCount = Object.values(gameState.homework).filter(v => !v).length;
            elements.homeworkCount.textContent = homeworkCount;

            // æ´»åŠ¨è®¡æ•°
            elements.weekActivities.textContent = gameState.weekActivities;

            // æ“ä½œè®¡æ•°å™¨
            updateActionCounter();

            // æ›´æ–°çŠ¶æ€æ–‡æœ¬
            updateStatusText();
            updateRelationshipText();
            updateEconomyText();
            updateMentalText();
            updateGoalText();

            // æ›´æ–°è¯¾ç¨‹è¡¨
            if (gameState.schedule.length > 0) {
                updateScheduleUI();
            }
        }

        // æ›´æ–°æ“ä½œè®¡æ•°å™¨
        function updateActionCounter() {
            const counter = elements.actionCounter;
            const used = gameState.actionsThisWeek;
            const max = gameState.maxActionsPerWeek;
            const remaining = max - used;

            counter.textContent = `æœ¬å‘¨æ“ä½œ: ${used}/${max} | å‰©ä½™: ${remaining}`;

            // æ ¹æ®å‰©ä½™æ“ä½œæ•°æ”¹å˜é¢œè‰²
            counter.className = 'action-counter';
            if (remaining === 1) counter.classList.add('warning');
            if (remaining === 0) counter.classList.add('danger');
        }

        // æ›´æ–°çŠ¶æ€æ–‡æœ¬
        function updateStatusText() {
            let status = "";
            const energy = gameState.energy;
            const stress = gameState.stress;
            const health = gameState.health;
            const mental = gameState.mental;

            if (health < 40) {
                status = "âš ï¸ èº«ä½“ä¸é€‚ï¼å¥åº·çŠ¶å†µå ªå¿§ï¼Œéœ€è¦ç«‹å³ä¼‘æ¯ã€‚";
            } else if (stress > 80) {
                status = "ğŸ”¥ å‹åŠ›çˆ†è¡¨ï¼æ¿’ä¸´å´©æºƒï¼Œæ€¥éœ€é‡Šæ”¾ï¼";
            } else if (energy < 20) {
                status = "ğŸ˜´ ç²¾åŠ›æ¯ç«­ï¼Œå­¦ä¹ æ•ˆç‡æä½ã€‚";
            } else if (mental < 40) {
                status = "ğŸ’­ å¿ƒç†çŠ¶æ€ä¸ä½³ï¼Œéœ€è¦å…³æ³¨æƒ…ç»ªã€‚";
            } else if (energy > 80 && stress < 30 && health > 80 && mental > 80) {
                status = "âœ¨ çŠ¶æ€å·…å³°ï¼æ­£æ˜¯å­¦ä¹ çš„å¥½æ—¶æœºï¼";
            } else if (energy > 60 && stress < 50) {
                status = "ğŸ“š çŠ¶æ€è‰¯å¥½ï¼Œä¿æŒèŠ‚å¥ã€‚";
            } else {
                status = "ğŸ”„ éœ€è¦å¹³è¡¡å­¦ä¹ ä¸ä¼‘æ¯ã€‚";
            }

            elements.currentStatus.textContent = status;
        }

        // æ›´æ–°å…³ç³»æ–‡æœ¬
        function updateRelationshipText() {
            const t = gameState.relationships.teacher;
            const mt = gameState.relationships.mathTeacher;
            const ct = gameState.relationships.chineseTeacher;
            const et = gameState.relationships.englishTeacher;
            const ca = gameState.relationships.classmateA;
            const cb = gameState.relationships.classmateB;
            const p = gameState.relationships.parents;
            const cr = gameState.relationships.crush;

            let text = "";

            if (t > 70) text += "è€å¸ˆå¾ˆå™¨é‡ä½ ã€‚";
            else if (t < 30) text += "è€å¸ˆå¯¹ä½ æœ‰äº›å¤±æœ›ã€‚";
            else text += "ä¸è€å¸ˆå…³ç³»æ­£å¸¸ã€‚";

            if (ca > 70 || cb > 70) text += " åŒå­¦ä»¬å¾ˆè®¤å¯ä½ ã€‚";
            else if (ca < 30 && cb < 30) text += " ä¸åŒå­¦æœ‰äº›ç–è¿œã€‚";
            else text += " åŒå­¦å…³ç³»ä¸€èˆ¬ã€‚";

            if (p > 70) text += " çˆ¶æ¯å¾ˆæ”¯æŒã€‚";
            else if (p < 30) text += " çˆ¶æ¯ä¸å¤ªç†è§£ã€‚";
            else text += " çˆ¶æ¯å…³ç³»æ­£å¸¸ã€‚";

            if (cr > 50) text += " æš—æ‹å¯¹è±¡å¯¹ä½ æœ‰å¥½æ„Ÿï¼";
            else if (cr > 20) text += " æš—æ‹å¯¹è±¡æ³¨æ„åˆ°ä½ äº†ã€‚";

            elements.relationshipStatus.textContent = text;
        }

        // æ›´æ–°ç»æµæ–‡æœ¬
        function updateEconomyText() {
            const money = gameState.money;
            let text = "";

            if (money > 800) text = "ç»æµå®½è£•ï¼Œå¯ä»¥è´­ä¹°ä»»ä½•èµ„æ–™ã€‚";
            else if (money > 400) text = "ç»æµçŠ¶å†µè‰¯å¥½ï¼Œè¶³å¤Ÿæ—¥å¸¸å¼€é”€ã€‚";
            else if (money > 100) text = "ç»æµä¸€èˆ¬ï¼Œéœ€è¦ç²¾æ‰“ç»†ç®—ã€‚";
            else text = "ç»æµç´§å¼ ï¼Œå¯èƒ½éœ€è¦å‘çˆ¶æ¯æ±‚åŠ©ã€‚";

            elements.economyStatus.textContent = text;
        }

        // æ›´æ–°å¿ƒç†æ–‡æœ¬
        function updateMentalText() {
            const mental = gameState.mental;
            const stress = gameState.stress;
            let text = "";

            if (mental > 80 && stress < 30) text = "å¿ƒç†çŠ¶æ€éå¸¸å¥åº·ï¼Œæƒ…ç»ªç¨³å®šã€‚";
            else if (mental > 60) text = "å¿ƒç†çŠ¶æ€è‰¯å¥½ï¼Œèƒ½å¤Ÿåº”å¯¹å‹åŠ›ã€‚";
            else if (mental > 40) text = "å¿ƒç†çŠ¶æ€ä¸€èˆ¬ï¼Œéœ€è¦å¤šå…³æ³¨è‡ªå·±ã€‚";
            else text = "å¿ƒç†çŠ¶æ€ä¸ä½³ï¼Œå»ºè®®å¯»æ±‚å¸®åŠ©ã€‚";

            elements.mentalStatus.textContent = text;
        }

        // æ›´æ–°ç›®æ ‡æ–‡æœ¬
        function updateGoalText() {
            if (!gameState.currentGoal) {
                elements.currentGoal.textContent = "æš‚æ— ç›®æ ‡";
                elements.goalProgress.style.width = '0%';
                return;
            }

            const goal = gameState.currentGoal;
            elements.currentGoal.textContent = goal.desc;

            // è®¡ç®—è¿›åº¦ï¼ˆ0-100ï¼‰
            let progress = 0;
            if (goal.check(gameState)) {
                progress = 100;
                elements.goalProgress.style.background = 'var(--secondary)';
            } else {
                // æ ¹æ®æ¥è¿‘ç¨‹åº¦è®¡ç®—è¿›åº¦
                const avg = Object.values(gameState.subjects).reduce((a, b) => a + b, 0) / 6;
                const targetAvg = goal.desc.includes('20åˆ†') ? 20 : goal.desc.includes('40åˆ†') ? 40 : goal.desc.includes('50åˆ†') ? 50 : goal.desc.includes('65åˆ†') ? 65 : goal.desc.includes('75åˆ†') ? 75 : 85;
                const avgProgress = Math.min(100, (avg / targetAvg) * 50);

                let otherProgress = 0;
                if (goal.desc.includes('å‹åŠ›')) {
                    const targetStress = goal.desc.includes('ä½äº40') ? 40 : goal.desc.includes('ä½äº30') ? 30 : 20;
                    otherProgress += Math.max(0, 100 - (gameState.stress / targetStress) * 50);
                }
                if (goal.desc.includes('å¥åº·')) {
                    otherProgress += Math.min(50, (gameState.health / 80) * 50);
                }
                if (goal.desc.includes('ä½œä¸š')) {
                    const homeworkCount = Object.values(gameState.homework).filter(v => v).length;
                    otherProgress += Math.min(50, (homeworkCount / 5) * 50);
                }
                if (goal.desc.includes('æ¨¡è€ƒ')) {
                    otherProgress += Math.min(50, (gameState.examCount / 3) * 50);
                }

                progress = Math.min(100, avgProgress + otherProgress);
                elements.goalProgress.style.background = 'var(--warning)';
            }

            elements.goalProgress.style.width = `${progress}%`;
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(text, type = "neutral") {
            elements.notificationText.textContent = text;
            elements.notification.className = `notification ${type} show`;

            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 4000);
        }

        // æ·»åŠ äº‹ä»¶åˆ°æ—¥å¿—
        function addToLog(text, type = "neutral") {
            const eventItem = document.createElement('div');
            eventItem.className = `event-item ${type}`;

            const timestamp = document.createElement('span');
            timestamp.className = 'timestamp';
            timestamp.textContent = `W${gameState.week} ${['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'][gameState.dayOfWeek]}`;
            eventItem.appendChild(timestamp);

            const content = document.createTextNode(text);
            eventItem.appendChild(content);

            elements.eventLog.insertBefore(eventItem, elements.eventLog.firstChild);

            // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡
            while (elements.eventLog.children.length > 20) {
                elements.eventLog.removeChild(elements.eventLog.lastChild);
            }

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            elements.eventLog.scrollTop = 0;
        }

        // ==================== æ“ä½œå‡½æ•° ====================

        // æ£€æŸ¥æ“ä½œé™åˆ¶
        function checkActionLimit() {
            if (gameState.actionsThisWeek >= gameState.maxActionsPerWeek) {
                showNotification("æœ¬å‘¨æ“ä½œæ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·ç»“æŸæœ¬å‘¨ï¼", "bad");
                return false;
            }
            return true;
        }

        // è®°å½•æ“ä½œ
        function recordAction() {
            gameState.actionsThisWeek++;
            updateActionCounter();
        }

        // è®¡ç®—å­¦ä¹ æ•ˆç‡ï¼ˆå—å¿ƒç†ã€å…³ç³»ã€çŠ¶æ€å½±å“ï¼‰
        function calculateStudyEfficiency() {
            let efficiency = 1.0;

            // å¿ƒç†çŠ¶æ€å½±å“ï¼ˆ30%ï¼‰
            const mentalFactor = gameState.mental / 100;
            efficiency *= (0.7 + mentalFactor * 0.3);

            // å‹åŠ›å½±å“ï¼ˆ20%ï¼‰
            const stressFactor = Math.max(0.5, 1 - gameState.stress / 100);
            efficiency *= stressFactor;

            // å¥åº·å½±å“ï¼ˆ15%ï¼‰
            const healthFactor = gameState.health / 100;
            efficiency *= (0.85 + healthFactor * 0.15);

            // ç²¾åŠ›å½±å“ï¼ˆ15%ï¼‰
            const energyFactor = gameState.energy / 100;
            efficiency *= (0.85 + energyFactor * 0.15);

            // å…³ç³»å½±å“ï¼ˆ10%ï¼‰
            const relFactor = (gameState.relationships.teacher + gameState.relationships.mathTeacher + gameState.relationships.chineseTeacher + gameState.relationships.englishTeacher) / 400;
            efficiency *= (0.9 + relFactor * 0.1);

            // å¤©æ°”å½±å“ï¼ˆ10%ï¼‰
            efficiency *= gameState.currentWeather.efficiency;

            return efficiency;
        }

        // å­¦ä¹ åŠŸèƒ½
        function study(subject) {
            if (!checkActionLimit()) return;
            if (gameState.energy < 15) {
                showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å­¦ä¹ ï¼", "bad");
                return;
            }
            if (gameState.health < 30) {
                showNotification("èº«ä½“ä¸é€‚ï¼Œå…ˆä¼‘æ¯å§ï¼", "bad");
                return;
            }

            const config = {
                chinese: { cost: 15, baseGain: [2, 4], name: "è¯­æ–‡" },
                math: { cost: 20, baseGain: [3, 6], name: "æ•°å­¦" },
                english: { cost: 15, baseGain: [2, 4], name: "è‹±è¯­" },
                physics: { cost: 20, baseGain: [3, 5], name: "ç‰©ç†" },
                chemistry: { cost: 15, baseGain: [2, 4], name: "åŒ–å­¦" },
                biology: { cost: 15, baseGain: [2, 4], name: "ç”Ÿç‰©" }
            };

            const cfg = config[subject];

            // æ¶ˆè€—èµ„æº
            gameState.energy -= cfg.cost;
            gameState.stress += 2;
            gameState.health -= 1;
            gameState.totalStudyHours++;

            // è®¡ç®—å¢ç›Š
            let gain = Math.random() * (cfg.baseGain[1] - cfg.baseGain[0]) + cfg.baseGain[0];

            // ç«èµ›èƒŒæ™¯åŠ æˆ
            if (subject === 'math' || subject === 'physics') {
                gain *= 1.3; // 30%åŠ æˆ
            }

            // å½“å‰æ°´å¹³å½±å“ï¼ˆè¶Šé«˜è¶Šéš¾æå‡ï¼‰
            const currentLevel = gameState.subjects[subject];
            gain *= (1 - currentLevel / 200);

            // ç»¼åˆæ•ˆç‡è®¡ç®—
            const efficiency = calculateStudyEfficiency();
            gain *= efficiency;

            // éšæœºæ³¢åŠ¨
            gain *= (0.8 + Math.random() * 0.4);

            // åº”ç”¨å¢ç›Š
            gameState.subjects[subject] = Math.min(100, currentLevel + gain);

            // æ·»åŠ æ—¥å¿—
            addToLog(`å­¦ä¹ äº†${cfg.name}ï¼Œèƒ½åŠ›æå‡äº†${gain.toFixed(1)}ç‚¹`, "good");

            // éšæœºäº‹ä»¶
            if (Math.random() < 0.35) {
                triggerRandomEvent();
            }

            closeModal('study-modal');
            recordAction();
            advanceTime();
            updateUI();

            // æ£€æŸ¥ç²¾åŠ›è€—å°½
            if (gameState.energy <= 0) {
                addToLog("ç²¾åŠ›è€—å°½ï¼Œè¢«è¿«ä¼‘æ¯ï¼", "bad");
                gameState.energy = 0;
                gameState.health -= 5;
            }
        }

        // ä¼‘æ¯åŠŸèƒ½
        function rest(type) {
            if (!checkActionLimit()) return;

            let energyGain = 0;
            let stressReduction = 0;
            let mentalGain = 0;
            let healthChange = 0;
            let moneyCost = 0;
            let text = "";

            switch (type) {
                case 'sleep':
                    energyGain = 30;
                    stressReduction = 10;
                    healthChange = 2;
                    text = "æ·±åº¦ç¡çœ æ¢å¤äº†ç²¾åŠ›";
                    break;
                case 'nap':
                    energyGain = 15;
                    stressReduction = 5;
                    healthChange = 1;
                    text = "åˆç¡å¸®åŠ©æ¢å¤äº†éƒ¨åˆ†ç²¾åŠ›";
                    break;
                case 'relax':
                    energyGain = 10;
                    stressReduction = 15;
                    text = "æ”¾æ¾å¨±ä¹å‡è½»äº†å‹åŠ›";
                    break;
                case 'music':
                    energyGain = 5;
                    stressReduction = 8;
                    text = "å¬éŸ³ä¹æ”¾æ¾äº†å¿ƒæƒ…";
                    break;
                case 'counseling':
                    if (gameState.money < 100) {
                        showNotification("å¿ƒç†å’¨è¯¢éœ€è¦100å…ƒï¼Œé’±ä¸å¤Ÿï¼", "bad");
                        return;
                    }
                    moneyCost = 100;
                    mentalGain = 20;
                    stressReduction = 15;
                    text = "å¿ƒç†å’¨è¯¢å¸®åŠ©å¾ˆå¤§ï¼Œå¿ƒç†çŠ¶æ€æ”¹å–„";
                    break;
            }

            gameState.energy = Math.min(100, gameState.energy + energyGain);
            gameState.stress = Math.max(0, gameState.stress - stressReduction);
            gameState.health = Math.min(100, gameState.health + healthChange);
            gameState.mental = Math.min(100, gameState.mental + mentalGain);
            gameState.money -= moneyCost;
            gameState.totalRestHours++;

            addToLog(text, "good");
            showNotification(`${text}ï¼Œç²¾åŠ›+${energyGain}ï¼Œå‹åŠ›-${stressReduction}`, "good");

            closeModal('rest-modal');
            recordAction();
            advanceTime();
            updateUI();
        }

        // é”»ç‚¼åŠŸèƒ½
        function exercise() {
            if (!checkActionLimit()) return;
            if (gameState.energy < 25) {
                showNotification("å¤ªç´¯äº†ï¼Œæ— æ³•é”»ç‚¼ï¼", "bad");
                return;
            }
            if (gameState.health < 40) {
                showNotification("èº«ä½“ä¸é€‚ï¼Œä¸å®œå‰§çƒˆè¿åŠ¨ï¼", "bad");
                return;
            }

            gameState.energy -= 25;
            gameState.stress = Math.max(0, gameState.stress - 18);
            gameState.health = Math.min(100, gameState.health + 3);
            gameState.energy = Math.min(100, gameState.energy + 12);
            gameState.totalExerciseHours++;

            addToLog("ä½“è‚²é”»ç‚¼é‡Šæ”¾äº†å‹åŠ›ï¼Œèº«ä½“æ›´å¥åº·äº†", "good");
            showNotification("é”»ç‚¼æ•ˆæœæ˜¾è‘—ï¼å‹åŠ›-18ï¼Œå¥åº·+3", "good");

            if (Math.random() < 0.25) {
                addToLog("é”»ç‚¼æ—¶é‡åˆ°äº†åŒå­¦ï¼Œäº¤æµäº†å­¦ä¹ å¿ƒå¾—", "neutral");
                gameState.relationships.classmateA += 3;
            }

            if (Math.random() < 0.15) {
                addToLog("è¿åŠ¨è¿‡åº¦ï¼Œè‚Œè‚‰é…¸ç—›", "bad");
                gameState.health -= 2;
            }

            recordAction();
            advanceTime();
            updateUI();
        }

        // ç¤¾äº¤åŠŸèƒ½
        function social() {
            if (!checkActionLimit()) return;
            if (gameState.energy < 15) {
                showNotification("å¤ªç´¯äº†ï¼Œæ— æ³•ç¤¾äº¤ï¼", "bad");
                return;
            }
            if (gameState.health < 50) {
                showNotification("èº«ä½“çŠ¶æ€ä¸ä½³ï¼Œæ”¹å¤©å§ï¼", "bad");
                return;
            }

            gameState.energy -= 15;
            gameState.stress = Math.max(0, gameState.stress - 10);
            gameState.relationships.classmateA = Math.min(100, gameState.relationships.classmateA + 5);
            gameState.totalSocialHours++;

            // éšæœºç¤¾äº¤äº‹ä»¶
            const socialEvents = [
                { text: "ä¸åŒå­¦äº¤æµå­¦ä¹ æ–¹æ³•ï¼Œäº’ç›¸é¼“åŠ±", effect: { classmates: 5, stress: -5 } },
                { text: "å¬åŒå­¦å€¾è¯‰çƒ¦æ¼ï¼Œæˆä¸ºçŸ¥å¿ƒæœ‹å‹", effect: { classmates: 8, stress: -3 } },
                { text: "è®¨è®ºç«èµ›å¾€äº‹ï¼Œæ„Ÿæ…¨ä¸‡åƒ", effect: { stress: 5, classmates: 3 } },
                { text: "ä¸€èµ·åæ§½ä½œä¸šå¤ªå¤šï¼Œç¬‘å‡ºçœ¼æ³ª", effect: { stress: -8, classmates: 4 } }
            ];

            const event = socialEvents[Math.floor(Math.random() * socialEvents.length)];
            addToLog(event.text, "good");

            // åº”ç”¨æ•ˆæœ
            if (event.effect.classmates) gameState.relationships.classmateA += event.effect.classmates;
            if (event.effect.stress) gameState.stress = Math.max(0, Math.min(100, gameState.stress + event.effect.stress));

            showNotification("ç¤¾äº¤æ´»åŠ¨æ„‰å¿«ï¼", "good");
            recordAction();
            advanceTime();
            updateUI();
        }

        // å›å¿†åŠŸèƒ½
        function memory() {
            if (!checkActionLimit()) return;
            if (gameState.memoryCount >= 3) {
                showNotification("å›å¿†å¤ªå¤šä¼šæ²‰æººè¿‡å»ï¼Œå‘å‰çœ‹å§ï¼", "neutral");
                return;
            }
            if (gameState.energy < 10) {
                showNotification("å¤ªç´¯äº†ï¼Œæ— æ³•å›å¿†å¾€äº‹", "bad");
                return;
            }

            gameState.memoryCount++;
            gameState.energy -= 10;

            // éšæœºå›å¿†
            const memories = [
                {
                    title: "ç¬¬ä¸€æ¬¡è·å¥–",
                    content: "ä½ æƒ³èµ·è‡ªå·±å°å­¦ç¬¬ä¸€æ¬¡æ‹¿åˆ°CSP-Jä¸€ç­‰æ—¶çš„åœºæ™¯ã€‚é‚£æ—¶ä½ æ„æ°”é£å‘ï¼Œä»¥ä¸ºæœªæ¥å°½åœ¨æŒæ¡ã€‚ç°åœ¨æƒ³æ¥ï¼Œé‚£æ—¶çš„è‡ªä¿¡æ—¢çè´µåˆå¤©çœŸã€‚",
                    choices: [
                        { text: "æ€€å¿µé‚£æ—¶çš„è‡ªå·±", effect: { stress: 5, energy: 3 } },
                        { text: "æ„Ÿæ…¨æ—¶å…‰é£é€", effect: { stress: 3 } },
                        { text: "è§‰å¾—ç°åœ¨ä¹Ÿä¸é”™", effect: { stress: -3, energy: 5 } }
                    ]
                },
                {
                    title: "é›†è®­çš„æ—¥å­",
                    content: "æš‘å‡é›†è®­ï¼Œæ¯å¤©åˆ·é¢˜åˆ°å‡Œæ™¨ã€‚è™½ç„¶è¾›è‹¦ï¼Œä½†å’Œé˜Ÿå‹ä»¬ä¸€èµ·å¥‹æ–—çš„æ—¥å­çœŸçš„å¾ˆå¼€å¿ƒã€‚ç°åœ¨ï¼Œå¤§å®¶å„å¥”ä¸œè¥¿ã€‚",
                    choices: [
                        { text: "æ„Ÿåˆ°å­¤ç‹¬", effect: { stress: 8 } },
                        { text: "å……æ»¡åŠ¨åŠ›", effect: { energy: 5, stress: -5 } },
                        { text: "é‡Šç„¶ä¸€ç¬‘", effect: { stress: -3 } }
                    ]
                },
                {
                    title: "æ”¾å¼ƒçš„ç¬é—´",
                    content: "ä½ æƒ³èµ·å†³å®šé€€å½¹çš„é‚£ä¸€åˆ»ã€‚æ˜¯æˆç»©ä¸‹æ»‘ï¼Ÿæ˜¯çˆ¶æ¯çš„æœŸæœ›ï¼Ÿè¿˜æ˜¯è‡ªå·±çš„è¿·èŒ«ï¼Ÿé‚£ä¸ªå†³å®šï¼Œæ”¹å˜äº†ä½ çš„äººç”Ÿè½¨è¿¹ã€‚",
                    choices: [
                        { text: "ä¸åæ‚”", effect: { stress: -5 } },
                        { text: "æœ‰äº›é—æ†¾", effect: { stress: 5 } },
                        { text: "å¿…é¡»è¯æ˜é€‰æ‹©æ²¡é”™", effect: { energy: 5, stress: 5 } }
                    ]
                },
                {
                    title: "é˜Ÿå‹çš„å‘Šåˆ«",
                    content: "æœ€åä¸€ä½é˜Ÿå‹å‘æ¥æ¶ˆæ¯ï¼š'æˆ‘æ‹¿åˆ°å›½é›†äº†ï¼Œä½ å‘¢ï¼Ÿ'ä½ ç›¯ç€å±å¹•å¾ˆä¹…ï¼Œå›å¤ï¼š'æˆ‘AFOäº†ï¼Œç¥ä½ é¡ºåˆ©ã€‚'",
                    choices: [
                        { text: "æ„Ÿåˆ°å¤±è½", effect: { stress: 10 } },
                        { text: "çœŸå¿ƒç¥ç¦", effect: { stress: -5 } },
                        { text: "æš—ä¸‹å†³å¿ƒ", effect: { energy: 5 } }
                    ]
                }
            ];

            const memory = memories[Math.floor(Math.random() * memories.length)];

            // æ˜¾ç¤ºå›å¿†æ¨¡æ€æ¡†
            const modal = document.getElementById('story-modal');
            elements.storyTitle.textContent = `å›å¿†ï¼š${memory.title}`;
            elements.storyContent.innerHTML = memory.content;
            elements.storyChoices.innerHTML = '';

            memory.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'story-choice-btn';
                btn.textContent = choice.text;
                btn.onclick = () => {
                    // åº”ç”¨æ•ˆæœ
                    for (const key in choice.effect) {
                        if (key === 'stress') gameState.stress = Math.max(0, Math.min(100, gameState.stress + choice.effect[key]));
                        else if (key === 'energy') gameState.energy = Math.max(0, Math.min(100, gameState.energy + choice.effect[key]));
                    }

                    addToLog(`å›å¿†ï¼š${memory.title} - ${choice.text}`, "neutral");
                    closeModal('story-modal');
                    recordAction();
                    advanceTime();
                    updateUI();
                };
                elements.storyChoices.appendChild(btn);
            });

            modal.style.display = 'flex';
            showNotification("å›å¿†å¾€äº‹ï¼Œå¿ƒæƒ…å¤æ‚...", "neutral");
        }

        // å‚åŠ æ¨¡è€ƒ
        function takeExam() {
            if (!checkActionLimit()) return;
            if (gameState.examCount >= 5) {
                showNotification("å·²ç»å‚åŠ å¤ªå¤šæ¨¡è€ƒäº†ï¼Œä¸“æ³¨å­¦ä¹ å§ï¼", "neutral");
                return;
            }
            if (gameState.energy < 40) {
                showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å‚åŠ è€ƒè¯•ï¼", "bad");
                return;
            }
            if (gameState.health < 60) {
                showNotification("èº«ä½“çŠ¶æ€ä¸ä½³ï¼Œå»ºè®®ä¼‘æ¯åå†è€ƒ", "bad");
                return;
            }

            gameState.energy -= 40;
            gameState.stress += 8;
            gameState.examCount++;

            // è®¡ç®—æ€»åˆ†ï¼ˆåŠ å…¥å½“å‰èƒ½åŠ›å€¼æƒé‡ï¼Œé¿å…ä½åˆ†é«˜æ’åï¼‰
            let totalScore = 0;
            let subjectScores = {};
            const avgAbility = Object.values(gameState.subjects).reduce((a, b) => a + b, 0) / 6;

            for (const subject in gameState.subjects) {
                // åŸºç¡€åˆ† = å½“å‰èƒ½åŠ›å€¼ * éšæœºç³»æ•°ï¼ˆ0.85-1.15ï¼‰
                const randomFactor = 0.85 + Math.random() * 0.3;
                let score = gameState.subjects[subject] * randomFactor;

                // å¿ƒç†çŠ¶æ€å½±å“ï¼ˆå¿ƒç†å·®å¯èƒ½å‘æŒ¥å¤±å¸¸ï¼‰
                if (gameState.mental < 50 && Math.random() < 0.3) {
                    score *= 0.7; // å‘æŒ¥å¤±å¸¸
                    addToLog("å¿ƒç†ç´§å¼ ï¼Œè€ƒè¯•å‘æŒ¥å¤±å¸¸", "bad");
                }

                // å…³ç³»å½±å“ï¼ˆè€å¸ˆå…³ç³»å¥½å¯èƒ½æœ‰é¢å¤–åŠ åˆ†ï¼‰
                if (gameState.relationships.teacher > 70 && Math.random() < 0.2) {
                    score += 5;
                    addToLog("è€å¸ˆé¼“åŠ±ä¸‹ï¼Œè€ƒè¯•è¶…å¸¸å‘æŒ¥", "good");
                }

                subjectScores[subject] = Math.round(score);
                totalScore += score;
            }
            totalScore = Math.round(totalScore / 6);

            // æ ¹æ®è¡¨ç°ç»™å‡ºåé¦ˆ
            let result = "";
            let type = "neutral";
            let effect = {};

            if (totalScore >= 90) {
                result = "å¤ªæ£’äº†ï¼æˆç»©ä¼˜å¼‚ï¼Œç­çº§å‰5åï¼";
                type = "good";
                effect = { stress: -15, teacher: 10, parents: 10, classmates: 5 };
            } else if (totalScore >= 80) {
                result = "ä¸é”™ï¼Œæœ‰è¿›æ­¥ï¼Œä¿æŒä½ï¼";
                type = "good";
                effect = { stress: -5, teacher: 5, parents: 5 };
            } else if (totalScore >= 70) {
                result = "æˆç»©ç¨³å®šï¼Œè¿˜éœ€åŠªåŠ›ã€‚";
                type = "neutral";
                effect = { stress: 3, teacher: 2 };
            } else if (totalScore >= 60) {
                result = "æˆç»©ä¸€èˆ¬ï¼Œæ‰¾å‡ºè–„å¼±ç¯èŠ‚ã€‚";
                type = "neutral";
                effect = { stress: 8 };
            } else {
                result = "æˆç»©ä¸ç†æƒ³ï¼Œéœ€è¦åŠ å¼ºå­¦ä¹ äº†ã€‚";
                type = "bad";
                effect = { stress: 15, teacher: -5, parents: -5 };
            }

            // åº”ç”¨æ•ˆæœ
            for (const key in effect) {
                if (key === 'stress') {
                    gameState.stress = Math.max(0, Math.min(100, gameState.stress + effect[key]));
                } else if (key === 'teacher') {
                    gameState.relationships.teacher = Math.max(0, Math.min(100, gameState.relationships.teacher + effect[key]));
                } else if (key === 'parents') {
                    gameState.relationships.parents = Math.max(0, Math.min(100, gameState.relationships.parents + effect[key]));
                } else if (key === 'classmates') {
                    gameState.relationships.classmateA = Math.max(0, Math.min(100, gameState.relationships.classmateA + effect[key]));
                }
            }

            // æ˜¾ç¤ºè¯¦ç»†æˆç»©
            let scoreText = `æ¨¡è€ƒæˆç»©ï¼šå¹³å‡åˆ†${totalScore}åˆ†\n`;
            for (const subject in subjectScores) {
                const name = { chinese: 'è¯­æ–‡', math: 'æ•°å­¦', english: 'è‹±è¯­', physics: 'ç‰©ç†', chemistry: 'åŒ–å­¦', biology: 'ç”Ÿç‰©' }[subject];
                scoreText += `${name}: ${subjectScores[subject]}åˆ† `;
            }

            addToLog(scoreText + `\n${result}`, type);
            showNotification(`è€ƒè¯•ç»“æœï¼š${result}`, type);

            // æ£€æŸ¥æˆå°±
            if (totalScore >= 90) {
                unlockAchievement('exam-perfect');
                showNotification("ğŸ‰ æˆå°±è§£é”ï¼šæ¨¡è€ƒæ»¡åˆ†ï¼", "good");
            }

            // æ£€æŸ¥æ¸¸æˆç»“æŸ
            if (gameState.week >= 52) {
                endGame();
                return;
            }

            recordAction();
            advanceTime();
            updateUI();
        }

        // ä½œä¸šåŠŸèƒ½
        function homework(action) {
            if (!checkActionLimit()) return;

            const homeworkList = Object.entries(gameState.homework).filter(([sub, done]) => !done);

            if (action === 'complete-all') {
                if (homeworkList.length === 0) {
                    showNotification("æœ¬å‘¨ä½œä¸šå·²å®Œæˆï¼", "neutral");
                    return;
                }
                if (gameState.energy < 30) {
                    showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å®Œæˆæ‰€æœ‰ä½œä¸šï¼", "bad");
                    return;
                }

                gameState.energy -= 30;
                gameState.relationships.teacher += 3;
                gameState.relationships.mathTeacher += 2;
                gameState.relationships.chineseTeacher += 2;
                gameState.relationships.englishTeacher += 2;

                // å…¨ç§‘æå‡
                for (let sub in gameState.subjects) {
                    gameState.subjects[sub] = Math.min(100, gameState.subjects[sub] + 0.5);
                }

                // å®Œæˆæ‰€æœ‰ä½œä¸š
                for (let sub in gameState.homework) {
                    gameState.homework[sub] = true;
                }

                addToLog("å®Œæˆäº†æ‰€æœ‰ä½œä¸šï¼Œè€å¸ˆå¾ˆæ»¡æ„", "good");
                showNotification("ä½œä¸šå®Œæˆï¼å…¨ç§‘+0.5ï¼Œè€å¸ˆå…³ç³»+3", "good");
            } else if (action === 'complete-one') {
                if (homeworkList.length === 0) {
                    showNotification("æœ¬å‘¨ä½œä¸šå·²å®Œæˆï¼", "neutral");
                    return;
                }
                if (gameState.energy < 10) {
                    showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å®Œæˆä½œä¸šï¼", "bad");
                    return;
                }

                const [subject, _] = homeworkList[Math.floor(Math.random() * homeworkList.length)];
                gameState.energy -= 10;
                gameState.subjects[subject] = Math.min(100, gameState.subjects[subject] + 0.3);
                gameState.relationships.teacher += 1;
                gameState.homework[subject] = true;

                const name = { chinese: 'è¯­æ–‡', math: 'æ•°å­¦', english: 'è‹±è¯­', physics: 'ç‰©ç†', chemistry: 'åŒ–å­¦', biology: 'ç”Ÿç‰©' }[subject];
                addToLog(`å®Œæˆäº†${name}ä½œä¸š`, "good");
                showNotification(`${name}ä½œä¸šå®Œæˆï¼+0.3ç‚¹`, "good");
            } else if (action === 'skip') {
                if (homeworkList.length === 0) {
                    showNotification("æœ¬å‘¨ä½œä¸šå·²å®Œæˆï¼", "neutral");
                    return;
                }

                gameState.relationships.teacher -= 5;
                gameState.relationships.mathTeacher -= 3;
                gameState.relationships.chineseTeacher -= 3;
                gameState.relationships.englishTeacher -= 3;
                gameState.stress += 5;

                addToLog("æ‹–æ¬ ä½œä¸šï¼Œè€å¸ˆå¾ˆå¤±æœ›", "bad");
                showNotification("æ‹–æ¬ ä½œä¸šï¼è€å¸ˆå…³ç³»-5ï¼Œå‹åŠ›+5", "bad");
            }

            closeModal('homework-modal');
            recordAction();
            advanceTime();
            updateUI();
        }

        // æ´»åŠ¨åŠŸèƒ½
        function activity(type) {
            if (!checkActionLimit()) return;
            if (gameState.energy < 20) {
                showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å‚åŠ æ´»åŠ¨ï¼", "bad");
                return;
            }

            let energyCost = 0;
            let stressChange = 0;
            let mentalChange = 0;
            let relChange = 0;
            let subjectChange = 0;
            let text = "";
            let typeLog = "neutral";

            switch (type) {
                case 'club':
                    energyCost = 15;
                    stressChange = -5;
                    relChange = 5;
                    text = "ç¤¾å›¢æ´»åŠ¨å¾ˆæœ‰è¶£ï¼ŒåŒå­¦å…³ç³»æ›´å¥½äº†";
                    break;
                case 'volunteer':
                    energyCost = 25;
                    mentalChange = 3;
                    text = "å¿—æ„¿è€…æ´»åŠ¨å¾ˆæœ‰æ„ä¹‰ï¼Œå¿ƒç†çŠ¶æ€æ”¹å–„";
                    break;
                case 'lecture':
                    energyCost = 10;
                    subjectChange = 1;
                    stressChange = -3;
                    text = "å¬è®²åº§æ”¶è·é¢‡ä¸°ï¼Œéšæœºç§‘ç›®+1";
                    break;
                case 'competition':
                    energyCost = 35;
                    stressChange = 10;
                    if (Math.random() < 0.3) {
                        text = "çŸ¥è¯†ç«èµ›è·å¥–äº†ï¼è·å¾—å¥–é‡‘100å…ƒ";
                        gameState.money += 100;
                        typeLog = "good";
                    } else {
                        text = "çŸ¥è¯†ç«èµ›æœªè·å¥–ï¼Œä½†ç§¯ç´¯äº†ç»éªŒ";
                    }
                    break;
                case 'oi-meetup':
                    energyCost = 20;
                    stressChange = -10;
                    gameState.memoryCount++;
                    text = "èšä¼šï¼Œä¸è€å‹é‡é€¢ï¼Œå‹åŠ›å¤§å‡";
                    break;
            }

            gameState.energy -= energyCost;
            gameState.stress = Math.max(0, Math.min(100, gameState.stress + stressChange));
            gameState.mental = Math.max(0, Math.min(100, gameState.mental + mentalChange));
            gameState.relationships.classmateA = Math.min(100, gameState.relationships.classmateA + relChange);

            if (subjectChange > 0) {
                const subjects = ['chinese', 'math', 'english', 'physics', 'chemistry', 'biology'];
                const randomSubject = subjects[Math.floor(Math.random() * subjects.length)];
                gameState.subjects[randomSubject] = Math.min(100, gameState.subjects[randomSubject] + subjectChange);
            }

            gameState.weekActivities++;
            gameState.totalActivities++;

            addToLog(text, typeLog);
            showNotification(text, typeLog);

            closeModal('activity-modal');
            recordAction();
            advanceTime();
            updateUI();
        }

        // ç»æµåŠŸèƒ½
        function economy(action) {
            if (!checkActionLimit()) return;

            switch (action) {
                case 'part-time':
                    if (gameState.energy < 30) {
                        showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å…¼èŒï¼", "bad");
                        return;
                    }
                    gameState.energy -= 30;
                    gameState.stress += 5;
                    gameState.money += 200;
                    addToLog("åšå®¶æ•™èµšäº†200å…ƒï¼Œä½†å¾ˆç´¯", "good");
                    showNotification("å…¼èŒæˆåŠŸï¼è·å¾—200å…ƒï¼Œå‹åŠ›+5", "good");
                    break;
                case 'buy-books':
                    if (gameState.money < 100) {
                        showNotification("é’±ä¸å¤Ÿï¼", "bad");
                        return;
                    }
                    gameState.money -= 100;
                    for (let sub in gameState.subjects) {
                        gameState.subjects[sub] = Math.min(100, gameState.subjects[sub] + 1);
                    }
                    addToLog("è´­ä¹°æ–°èµ„æ–™ï¼Œå…¨ç§‘+1", "good");
                    showNotification("è´­ä¹°èµ„æ–™æˆåŠŸï¼å…¨ç§‘+1", "good");
                    break;
                case 'buy-course':
                    if (gameState.money < 300) {
                        showNotification("é’±ä¸å¤Ÿï¼", "bad");
                        return;
                    }
                    if (gameState.energy < 20) {
                        showNotification("ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•ä¸Šç½‘è¯¾ï¼", "bad");
                        return;
                    }
                    gameState.money -= 300;
                    gameState.energy -= 20;
                    // éšæœºæå‡ä¸€ä¸ªç§‘ç›®3ç‚¹
                    const subjects = ['chinese', 'math', 'english', 'physics', 'chemistry', 'biology'];
                    const randomSubject = subjects[Math.floor(Math.random() * subjects.length)];
                    gameState.subjects[randomSubject] = Math.min(100, gameState.subjects[randomSubject] + 3);
                    const name = { chinese: 'è¯­æ–‡', math: 'æ•°å­¦', english: 'è‹±è¯­', physics: 'ç‰©ç†', chemistry: 'åŒ–å­¦', biology: 'ç”Ÿç‰©' }[randomSubject];
                    addToLog(`è´­ä¹°${name}ç½‘è¯¾ï¼Œ${name}+3`, "good");
                    showNotification(`ç½‘è¯¾å­¦ä¹ å®Œæˆï¼${name}+3`, "good");
                    break;
                // case 'save':
                //     addToLog("å­˜é’±ä»¥å¤‡ä¸æ—¶ä¹‹éœ€", "neutral");
                //     showNotification("å·²å­˜é’±ï¼Œå½“å‰å­˜æ¬¾ï¼š" + gameState.money + "å…ƒ", "neutral");
                //     break;
                case 'parents':
                    if (gameState.relationships.parents < 30) {
                        showNotification("çˆ¶æ¯å…³ç³»ä¸å¥½ï¼Œä¸å¥½æ„æ€è¦é’±ï¼", "bad");
                        return;
                    }
                    gameState.money += 150;
                    gameState.relationships.parents -= 5;
                    gameState.stress += 3;
                    addToLog("å‘çˆ¶æ¯è¦äº†150å…ƒé›¶èŠ±é’±", "neutral");
                    showNotification("è·å¾—150å…ƒï¼Œä½†çˆ¶æ¯å…³ç³»-5ï¼Œå‹åŠ›+3", "neutral");
                    break;
            }

            closeModal('economy-modal');
            recordAction();
            advanceTime();
            updateUI();
        }

        // ç»“æŸæœ¬å‘¨
        function endWeek() {
            if (gameState.gameOver) return;

            // æ£€æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„æ“ä½œ
            if (gameState.actionsThisWeek < gameState.maxActionsPerWeek) {
                if (!confirm(`æœ¬å‘¨è¿˜æœ‰${gameState.maxActionsPerWeek - gameState.actionsThisWeek}æ¬¡æ“ä½œæœºä¼šï¼Œç¡®å®šè¦ç»“æŸæœ¬å‘¨å—ï¼Ÿ`)) {
                    return;
                }
            }

            // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æœªå®Œæˆçš„æ•…äº‹
            const currentStory = storyEvents.find(s => s.week === gameState.week && !gameState.events.includes(s.id));
            if (currentStory) {
                showNotification("æœ¬å‘¨æœ‰é‡è¦äº‹ä»¶å‘ç”Ÿï¼", "neutral");
                triggerStoryEvent(currentStory);
                return;
            }

            // æ£€æŸ¥éšè—å‰§æƒ…
            checkHiddenEvents();

            // è‡ªç„¶æ¢å¤å’Œæ¶ˆè€—
            gameState.energy = Math.min(100, gameState.energy + 5);
            gameState.stress = Math.max(0, gameState.stress - 5);
            gameState.health = Math.min(100, gameState.health + 2);
            gameState.mental = Math.min(100, gameState.mental + 2);

            // ä½œä¸šç³»ç»Ÿï¼šæ–°ä¸€å‘¨ç”Ÿæˆæ–°ä½œä¸š
            if (gameState.week < 52) {
                for (let sub in gameState.homework) {
                    gameState.homework[sub] = false; // é‡ç½®ä½œä¸š
                }
                addToLog("æ–°ä¸€å‘¨å¼€å§‹ï¼Œä½œä¸šé‡æ–°å¸ƒç½®", "neutral");
            }

            // éšæœºäº‹ä»¶
            if (Math.random() < 0.6) {
                triggerRandomEvent();
            }

            // æ£€æŸ¥å®Œç¾ä¸€å‘¨
            const hasNegativeEvent = gameState.lastAction === 'bad' || gameState.stress > 50;
            if (!hasNegativeEvent && gameState.actionsThisWeek > 0) {
                gameState.perfectWeeks++;
                if (gameState.perfectWeeks >= 2) {
                    unlockAchievement('perfect-week');
                    showNotification("ğŸ‰ æˆå°±è§£é”ï¼šå®Œç¾ä¸€å‘¨ï¼", "good");
                }
            }

            // æ—¶é—´æ¨è¿›
            gameState.week++;
            gameState.dayOfWeek = 0;
            gameState.period = 0;
            gameState.daysLeft -= 7;
            gameState.actionsThisWeek = 0; // é‡ç½®æ“ä½œè®¡æ•°

            // å­£èŠ‚å˜åŒ–
            if (gameState.week <= 13) gameState.season = 0; // æ˜¥
            else if (gameState.week <= 26) gameState.season = 1; // å¤
            else if (gameState.week <= 39) gameState.season = 2; // ç§‹
            else gameState.season = 3; // å†¬

            // æ£€æŸ¥å‡æœŸ
            checkHolidays();

            // æ£€æŸ¥ç‰¹æ®Šæ—¥å­
            checkSpecialDay();

            // æ£€æŸ¥é˜¶æ®µç›®æ ‡
            checkStageGoals();

            // æ£€æŸ¥æˆå°±
            checkAchievements();

            // æ£€æŸ¥æ¸¸æˆç»“æŸ
            if (gameState.week > 52 || gameState.daysLeft <= 0) {
                endGame();
                return;
            }

            // ç”Ÿæˆæ–°è¯¾ç¨‹è¡¨
            generateSchedule();

            // å¤©æ°”å˜åŒ–
            changeWeather();

            addToLog(`ç¬¬${gameState.week}å‘¨å¼€å§‹ï¼Œè·ç¦»é«˜è€ƒè¿˜æœ‰${gameState.daysLeft}å¤©`, "neutral");
            showNotification(`æ–°çš„ä¸€å‘¨ï¼š${gameState.weather} ${getWeatherName()} | å­£èŠ‚ï¼š${seasons[gameState.season].name}`, "neutral");

            updateUI();
        }

        // æ¨è¿›æ—¶é—´ï¼ˆç”¨äºå•æ¬¡æ´»åŠ¨ï¼‰
        function advanceTime() {
            gameState.period++;
            if (gameState.period >= 4) {
                gameState.period = 0;
                gameState.dayOfWeek++;
                gameState.daysLeft--;

                if (gameState.dayOfWeek >= 7) {
                    gameState.dayOfWeek = 0;
                    // å‘¨ç»“æŸè‡ªåŠ¨æ¢å¤
                    gameState.energy = Math.min(100, gameState.energy + 3);
                    gameState.stress = Math.max(0, gameState.stress - 3);
                }
            }
        }

        // æ”¹å˜å¤©æ°”
        function changeWeather() {
            const weather = weathers[Math.floor(Math.random() * weathers.length)];
            gameState.weather = weather.type;
            gameState.currentWeather = weather;

            // å¤©æ°”å½±å“å¿ƒæƒ…
            if (weather.mood > 0) {
                gameState.stress = Math.max(0, gameState.stress - 2);
            } else if (weather.mood < 0) {
                gameState.stress = Math.min(100, gameState.stress + 2);
            }
        }

        // è·å–å¤©æ°”åç§°
        function getWeatherName() {
            return gameState.currentWeather ? gameState.currentWeather.name : 'æ™´å¤©';
        }

        // æ£€æŸ¥å‡æœŸ
        function checkHolidays() {
            for (const key in holidays) {
                const holiday = holidays[key];
                if (gameState.week === holiday.week) {
                    gameState.vacationDays = holiday.days;
                    addToLog(`å‡æœŸï¼š${holiday.name}ï¼Œå…±${holiday.days}å¤©`, "important");
                    showNotification(`å‡æœŸåˆ°æ¥ï¼š${holiday.name}ï¼`, "important");

                    // åº”ç”¨å‡æœŸæ•ˆæœ
                    if (holiday.effect.stress) gameState.stress = Math.max(0, gameState.stress + holiday.effect.stress);
                    if (holiday.effect.health) gameState.health = Math.min(100, gameState.health + holiday.effect.health);
                    if (holiday.effect.parents) gameState.relationships.parents = Math.min(100, gameState.relationships.parents + holiday.effect.parents);
                    if (holiday.effect.mental) gameState.mental = Math.min(100, gameState.mental + holiday.effect.mental);
                }
            }
        }

        // è§¦å‘éšæœºäº‹ä»¶
        function triggerRandomEvent() {
            // åˆå¹¶æ‰€æœ‰äº‹ä»¶
            const allEvents = [
                ...randomEvents.study,
                ...randomEvents.relationship,
                ...randomEvents.health,
                ...randomEvents.memory,
                ...randomEvents.economy,
                ...randomEvents.special
            ];

            // è¿‡æ»¤å¯ç”¨äº‹ä»¶ï¼ˆåŠ å…¥æ¡ä»¶æ£€æŸ¥ï¼‰
            let availableEvents = allEvents.filter(e => {
                if (!e.condition || !e.condition(gameState)) return false;

                // å­£èŠ‚å’Œå‘¨æ•°è¿‡æ»¤
                if (gameState.season === 3 && e.text.includes('æ˜¥')) return false;
                if (gameState.season === 0 && e.text.includes('å†¬')) return false;
                if (gameState.week < 10 && e.text.includes('æœˆè€ƒ')) return false;
                if (gameState.week > 40 && e.text.includes('è®²åº§')) return false;

                return true;
            });

            if (availableEvents.length === 0) return;

            // åŠ æƒéšæœºé€‰æ‹©
            const totalWeight = availableEvents.reduce((sum, e) => sum + e.weight, 0);
            let random = Math.random() * totalWeight;
            let selectedEvent = null;

            for (const event of availableEvents) {
                random -= event.weight;
                if (random <= 0) {
                    selectedEvent = event;
                    break;
                }
            }

            if (!selectedEvent) selectedEvent = availableEvents[0];

            addToLog(selectedEvent.text, selectedEvent.type);
            elements.randomEvent.textContent = selectedEvent.text;
            gameState.lastAction = selectedEvent.type;

            // åº”ç”¨æ•ˆæœ
            applyEffect(selectedEvent.effect);

            // æ˜¾ç¤ºé€šçŸ¥
            let notificationText = selectedEvent.text;
            if (selectedEvent.type === 'good') {
                notificationText += " (æ•ˆæœï¼šæ­£é¢)";
            } else if (selectedEvent.type === 'bad') {
                notificationText += " (æ•ˆæœï¼šè´Ÿé¢)";
            }
            showNotification(notificationText, selectedEvent.type);
        }

        // è§¦å‘æ•…äº‹äº‹ä»¶
        function triggerStoryEvent(story) {
            if (gameState.events.includes(story.id)) return;

            const modal = document.getElementById('story-modal');
            elements.storyTitle.textContent = story.title;
            elements.storyContent.innerHTML = story.content;
            elements.storyChoices.innerHTML = '';

            story.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'story-choice-btn';
                btn.textContent = choice.text;

                // æ˜¾ç¤ºå½±å“é¢„è§ˆ
                const preview = document.createElement('div');
                preview.className = 'choice-preview';
                let previewText = "å½±å“ï¼š";
                for (const key in choice.effect) {
                    const val = choice.effect[key];
                    const sign = val > 0 ? '+' : '';
                    previewText += `${key}${sign}${val} `;
                }
                preview.textContent = previewText;
                btn.appendChild(preview);

                btn.onclick = () => {
                    // åº”ç”¨æ•ˆæœ
                    applyEffect(choice.effect);

                    addToLog(`æ•…äº‹ï¼š${story.title} - ${choice.text}`, "story");
                    gameState.events.push(story.id);
                    gameState.storyProgress++;

                    // æ£€æŸ¥æ•…äº‹å®Œæˆ
                    if (gameState.storyProgress >= 5) {
                        unlockAchievement('story-5');
                        showNotification("ğŸ‰ æˆå°±è§£é”ï¼šæ•…äº‹å¼€å§‹ï¼", "good");
                    }
                    if (gameState.storyProgress >= 10) {
                        unlockAchievement('story-10');
                        showNotification("ğŸ‰ æˆå°±è§£é”ï¼šæ•…äº‹å¤§å¸ˆï¼", "good");
                    }
                    if (gameState.storyProgress >= 15) {
                        unlockAchievement('story-15');
                        showNotification("ğŸ‰ æˆå°±è§£é”ï¼šå²è¯—æ—…ç¨‹ï¼", "good");
                    }

                    // ä¸‹ä¸€ä¸ªäº‹ä»¶
                    if (choice.next) {
                        const nextStory = storyEvents.find(s => s.id === choice.next);
                        if (nextStory && gameState.week >= nextStory.week) {
                            setTimeout(() => triggerStoryEvent(nextStory), 500);
                        }
                    }

                    closeModal('story-modal');
                    advanceTime();
                    updateUI();
                };

                elements.storyChoices.appendChild(btn);
            });

            modal.style.display = 'flex';
            showNotification("æ•…äº‹äº‹ä»¶è§¦å‘", "story");
        }

        // æ£€æŸ¥éšè—å‰§æƒ…
        function checkHiddenEvents() {
            let triggered = 0;
            hiddenEvents.forEach(event => {
                if (!gameState.events.includes(event.id) && event.condition(gameState)) {
                    // æ˜¾ç¤ºéšè—å‰§æƒ…
                    const modal = document.getElementById('story-modal');
                    elements.storyTitle.textContent = `éšè—å‰§æƒ…ï¼š${event.title}`;
                    elements.storyContent.innerHTML = event.content;
                    elements.storyChoices.innerHTML = '';

                    if (event.choices) {
                        event.choices.forEach(choice => {
                            const btn = document.createElement('button');
                            btn.className = 'story-choice-btn';
                            btn.textContent = choice.text;
                            btn.onclick = () => {
                                applyEffect(choice.effect);
                                gameState.events.push(event.id);
                                closeModal('story-modal');
                                advanceTime();
                                updateUI();
                                recordAction();
                            };
                            elements.storyChoices.appendChild(btn);
                        });
                    } else {
                        const btn = document.createElement('button');
                        btn.className = 'story-choice-btn';
                        btn.textContent = "ç»§ç»­";
                        btn.onclick = () => {
                            applyEffect(event.effect);
                            gameState.events.push(event.id);
                            closeModal('story-modal');
                            advanceTime();
                            updateUI();
                            recordAction();
                        };
                        elements.storyChoices.appendChild(btn);
                    }

                    modal.style.display = 'flex';
                    showNotification(`éšè—å‰§æƒ…è§¦å‘ï¼š${event.title}`, "important");
                    triggered++;
                }
            });

            if (triggered > 0) {
                if (triggered >= 1) {
                    unlockAchievement('hidden-1');
                    showNotification("ğŸ‰ æˆå°±è§£é”ï¼šéšè—å‰§æƒ…1ï¼", "good");
                }
                if (triggered >= 2) {
                    unlockAchievement('hidden-2');
                    showNotification("ğŸ‰ æˆå°±è§£é”ï¼šéšè—å‰§æƒ…2ï¼", "good");
                }
                if (triggered >= 3) {
                    unlockAchievement('hidden-3');
                    showNotification("ğŸ‰ æˆå°±è§£é”ï¼šéšè—å‰§æƒ…3ï¼", "good");
                }
            }
        }

        // åº”ç”¨æ•ˆæœ
        function applyEffect(effect) {
            for (const key in effect) {
                if (key === 'stress') {
                    gameState.stress = Math.max(0, Math.min(100, gameState.stress + effect[key]));
                } else if (key === 'energy') {
                    gameState.energy = Math.max(0, Math.min(100, gameState.energy + effect[key]));
                } else if (key === 'health') {
                    gameState.health = Math.max(0, Math.min(100, gameState.health + effect[key]));
                } else if (key === 'mental') {
                    gameState.mental = Math.max(0, Math.min(100, gameState.mental + effect[key]));
                } else if (key === 'money') {
                    gameState.money = Math.max(0, gameState.money + effect[key]);
                } else if (gameState.relationships.hasOwnProperty(key)) {
                    gameState.relationships[key] = Math.max(0, Math.min(100, gameState.relationships[key] + effect[key]));
                } else if (gameState.subjects.hasOwnProperty(key)) {
                    gameState.subjects[key] = Math.max(0, Math.min(100, gameState.subjects[key] + effect[key]));
                } else if (key === 'subjects' && typeof effect[key] === 'object') {
                    // æ‰¹é‡ç§‘ç›®æå‡
                    for (const sub in effect[key]) {
                        if (sub === 'all') {
                            for (const s in gameState.subjects) {
                                gameState.subjects[s] = Math.min(100, gameState.subjects[s] + effect[key][sub]);
                            }
                        }
                    }
                }
            }
        }

        // æ£€æŸ¥é˜¶æ®µç›®æ ‡
        function checkStageGoals() {
            // æ£€æŸ¥å½“å‰å‘¨æ•°æ˜¯å¦æœ‰ç›®æ ‡
            for (const week in stageGoals) {
                const goal = stageGoals[week];
                // å¦‚æœå½“å‰å‘¨æ•°è¾¾åˆ°ç›®æ ‡å‘¨æ•°ï¼Œä¸”è¿˜æ²¡æ£€æŸ¥è¿‡
                if (gameState.week === parseInt(week) && !gameState.currentGoal) {
                    gameState.currentGoal = goal;
                    gameState.goalProgress = 0;

                    // æ˜¾ç¤ºç›®æ ‡æ›´æ–°å¼¹çª—
                    showGoalModal(goal);
                    return;
                }
            }

            // æ£€æŸ¥å½“å‰ç›®æ ‡æ˜¯å¦å®Œæˆ
            if (gameState.currentGoal && gameState.week > parseInt(gameState.currentGoal.desc.match(/\d+/))) {
                const achieved = gameState.currentGoal.check(gameState);

                // æ˜¾ç¤ºç›®æ ‡å®Œæˆ/å¤±è´¥å¼¹çª—
                showGoalResultModal(gameState.currentGoal, achieved);

                // åº”ç”¨å¥–åŠ±
                if (achieved && gameState.currentGoal.reward) {
                    for (const key in gameState.currentGoal.reward) {
                        if (key === 'stress') {
                            gameState.stress = Math.max(0, gameState.stress + gameState.currentGoal.reward[key]);
                        } else if (key === 'energy') {
                            gameState.energy = Math.min(100, gameState.energy + gameState.currentGoal.reward[key]);
                        } else if (key === 'health') {
                            gameState.health = Math.min(100, gameState.health + gameState.currentGoal.reward[key]);
                        } else if (key === 'mental') {
                            gameState.mental = Math.min(100, gameState.mental + gameState.currentGoal.reward[key]);
                        } else if (key === 'money') {
                            gameState.money += gameState.currentGoal.reward[key];
                        }
                    }
                    showNotification("é˜¶æ®µç›®æ ‡è¾¾æˆï¼è·å¾—å¥–åŠ±ï¼", "good");
                } else {
                    showNotification("é˜¶æ®µç›®æ ‡æœªè¾¾æˆï¼Œç»§ç»­åŠªåŠ›ï¼", "bad");
                }

                // æ¸…ç©ºå½“å‰ç›®æ ‡
                gameState.currentGoal = null;
                gameState.goalProgress = 0;
            }
        }

        // æ˜¾ç¤ºç›®æ ‡æ›´æ–°å¼¹çª—
        function showGoalModal(goal) {
            const modal = document.getElementById('goal-modal');
            elements.goalContent.innerHTML = `
                                                                                                                                                                                                                                                                                                            <div class="goal-item">
                                                                                                                                                                                                                                                                                                                <h4>${goal.title}</h4>
                                                                                                                                                                                                                                                                                                                <p>${goal.desc}</p>
                                                                                                                                                                                                                                                                                                                <p style="color: var(--warning); margin-top: 5px;">âš ï¸ è¯·åœ¨ä¸‹ä¸ªé˜¶æ®µæ£€æŸ¥ç‚¹å‰åŠªåŠ›è¾¾æˆï¼</p>
                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                        `;
            modal.style.display = 'flex';
        }

        // æ˜¾ç¤ºç›®æ ‡ç»“æœå¼¹çª—
        function showGoalResultModal(goal, achieved) {
            const modal = document.getElementById('goal-modal');
            const className = achieved ? 'achieved' : 'failed';
            const statusText = achieved ? 'âœ… å·²è¾¾æˆ' : 'âŒ æœªè¾¾æˆ';
            const rewardText = achieved && goal.reward ?
                `<p style="color: var(--secondary); margin-top: 8px;">å¥–åŠ±ï¼š${Object.entries(goal.reward).map(([k, v]) => `${k}+${v}`).join('ã€')}</p>` :
                '';

            elements.goalContent.innerHTML = `
                                                                                                                                                                                                                                                                                                            <div class="goal-item ${className}">
                                                                                                                                                                                                                                                                                                                <h4>${goal.title} ${statusText}</h4>
                                                                                                                                                                                                                                                                                                                <p>${goal.desc}</p>
                                                                                                                                                                                                                                                                                                                ${rewardText}
                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                        `;
            modal.style.display = 'flex';
        }

        // æ£€æŸ¥ç‰¹æ®Šæ—¥å­
        function checkSpecialDay() {
            const week = gameState.week;

            if (week === 1) {
                addToLog("AFOç¬¬ä¸€å¤©ï¼Œä¸€åˆ‡éƒ½æ˜¯æ–°çš„å¼€å§‹ã€‚", "story");
            } else if (week === 4) {
                addToLog("ä¸€ä¸ªæœˆè¿‡å»äº†ï¼Œä½ å·²ç»é€‚åº”äº†æ–‡åŒ–è¯¾ç”Ÿæ´»ã€‚", "neutral");
            } else if (week === 10) {
                addToLog("ç™¾æ—¥çºªå¿µï¼ä½ å·²ç»åšæŒäº†100å¤©ï¼", "good");
                showNotification("ç™¾æ—¥çºªå¿µï¼ç»§ç»­åŠ æ²¹ï¼", "good");
            } else if (week === 18) {
                addToLog("é«˜è€ƒå€’è®¡æ—¶180å¤©èª“å¸ˆå¤§ä¼šï¼", "neutral");
                showNotification("é‡è¦é‡Œç¨‹ç¢‘ï¼šè·ç¦»é«˜è€ƒè¿˜æœ‰180å¤©ï¼", "neutral");
            } else if (week === 24) {
                addToLog("è¿›å…¥ç¬¬äºŒå­¦æœŸï¼Œå†²åˆºé˜¶æ®µå¼€å§‹ã€‚", "neutral");
            } else if (week === 36) {
                addToLog("æœ€åå†²åˆºé˜¶æ®µï¼65å¤©å€’è®¡æ—¶ï¼", "neutral");
                showNotification("å†²åˆºé˜¶æ®µå¼€å§‹ï¼ä¿æŒçŠ¶æ€ï¼", "neutral");
            } else if (week === 48) {
                addToLog("æœ€å4å‘¨ï¼Œè°ƒæ•´å¿ƒæ€ï¼Œå‡†å¤‡è¿æ¥æŒ‘æˆ˜ã€‚", "neutral");
            } else if (week === 51) {
                addToLog("é«˜è€ƒå‰å¤œï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ", "story");
            }

            // æ¯æœˆ1å·æ£€æŸ¥
            if (week % 4 === 0) {
                addToLog(`ç¬¬${Math.floor(week / 4) + 1}ä¸ªæœˆå¼€å§‹ï¼Œæ€»ç»“ä¸€ä¸‹è¿™ä¸ªæœˆçš„è¿›æ­¥å§ã€‚`, "neutral");
            }
        }

        // æˆå°±ç³»ç»Ÿ
        function unlockAchievement(achievementId) {
            if (gameState.achievements.has(achievementId)) return;

            gameState.achievements.add(achievementId);
            const achievement = achievements[achievementId];

            if (achievement) {
                // æ˜¾ç¤ºæˆå°±è¯¦æƒ…å¼¹çª—ï¼ˆåªæ˜¾ç¤ºæ–°è§£é”çš„ï¼‰
                showAchievementUnlockModal(achievement);
            }
        }

        // æ˜¾ç¤ºæˆå°±è§£é”å¼¹çª—
        function showAchievementUnlockModal(achievement) {
            const modal = document.getElementById('achievement-modal');
            elements.achievementDetailContent.innerHTML = `
                                                                                                                                                                                                                                                                                                            <div class="achievement-detail-item">
                                                                                                                                                                                                                                                                                                                <div class="name">ğŸ† ${achievement.name}</div>
                                                                                                                                                                                                                                                                                                                <div class="desc">${achievement.desc}</div>
                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                        `;
            modal.style.display = 'flex';
        }

        // æ˜¾ç¤ºæˆå°±è¯¦æƒ…ï¼ˆç‚¹å‡»æŒ‰é’®ï¼‰
        function showAchievementDetail() {
            const modal = document.getElementById('achievement-modal');
            let html = '';

            // æ˜¾ç¤ºæ‰€æœ‰å·²è§£é”æˆå°±
            const unlocked = Array.from(gameState.achievements).map(id => ({ id, ...achievements[id] }));
            const hidden = Object.entries(achievements).filter(([id, a]) => a.hidden && !gameState.achievements.has(id));

            if (unlocked.length === 0) {
                html = '<div style="text-align:center;opacity:0.7;">æš‚æ— æˆå°±</div>';
            } else {
                html += '<div style="margin-bottom:10px;font-weight:bold;color:var(--secondary);">å·²è§£é”æˆå°±ï¼š</div>';
                unlocked.forEach(a => {
                    html += `
                                                                                                                                                                                                                                                                                                                    <div class="achievement-detail-item">
                                                                                                                                                                                                                                                                                                                        <div class="name">ğŸ† ${a.name}</div>
                                                                                                                                                                                                                                                                                                                        <div class="desc">${a.desc}</div>
                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                `;
                });
            }

            if (hidden.length > 0) {
                html += '<div style="margin:15px 0 10px 0;font-weight:bold;color:var(--purple);">æœªè§£é”éšè—æˆå°±ï¼š</div>';
                hidden.forEach(([id, a]) => {
                    html += `
                                                                                                                                                                                                                                                                                                                    <div class="achievement-detail-item hidden">
                                                                                                                                                                                                                                                                                                                        <div class="name">ğŸ”’ ???</div>
                                                                                                                                                                                                                                                                                                                        <div class="desc">éšè—æˆå°±ï¼Œéœ€è¦ç‰¹æ®Šæ¡ä»¶è§£é”</div>
                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                `;
                });
            }

            elements.achievementDetailContent.innerHTML = html;
            modal.style.display = 'flex';
        }

        // æ£€æŸ¥æˆå°±
        function checkAchievements() {
            // åŸºç¡€è¿›åº¦
            if (gameState.week === 1) unlockAchievement('first-week');
            if (gameState.week === 4) unlockAchievement('first-month');

            // ç´¯è®¡æ—¶é•¿
            if (gameState.totalStudyHours >= 100) unlockAchievement('study-100');
            if (gameState.totalRestHours >= 50) unlockAchievement('rest-50');
            if (gameState.totalExerciseHours >= 30) unlockAchievement('exercise-30');
            if (gameState.totalSocialHours >= 20) unlockAchievement('social-20');

            // çŠ¶æ€
            if (gameState.energy >= 100) unlockAchievement('energy-100');
            if (gameState.stress === 0) unlockAchievement('stress-0');
            if (gameState.health >= 100) unlockAchievement('health-100');
            if (gameState.mental >= 100) unlockAchievement('mental-100');
            if (gameState.money >= 1000) unlockAchievement('money-1000');
            if (gameState.money === 0) unlockAchievement('money-0');

            // å­¦ç§‘
            if (gameState.subjects.chinese >= 80) unlockAchievement('chinese-80');
            if (gameState.subjects.math >= 90) unlockAchievement('math-90');
            if (gameState.subjects.english >= 80) unlockAchievement('english-80');
            if (gameState.subjects.physics >= 90) unlockAchievement('physics-90');
            if (gameState.subjects.chemistry >= 80) unlockAchievement('chemistry-80');
            if (gameState.subjects.biology >= 80) unlockAchievement('biology-80');

            const all85 = Object.values(gameState.subjects).every(s => s >= 85);
            if (all85) unlockAchievement('all-85');

            const all95 = Object.values(gameState.subjects).every(s => s >= 95);
            if (all95) unlockAchievement('all-95');

            // å…³ç³»
            if (gameState.relationships.teacher >= 90) unlockAchievement('teacher-90');
            if (gameState.relationships.mathTeacher >= 90) unlockAchievement('math-teacher-90');
            if (gameState.relationships.parents >= 90) unlockAchievement('parents-90');
            if (gameState.relationships.crush >= 60) unlockAchievement('crush-60');
            if (gameState.relationships.classmateA >= 90 || gameState.relationships.classmateB >= 90) unlockAchievement('classmate-90');

            // æ´»åŠ¨
            if (gameState.examCount >= 5) unlockAchievement('exam-5');
            const completedHomework = Object.values(gameState.homework).filter(v => v).length;
            if (completedHomework >= 100) unlockAchievement('homework-100');
            if (gameState.totalActivities >= 20) unlockAchievement('activity-20');
            if (gameState.memoryCount >= 10) unlockAchievement('memory-10');

            // ç‰¹æ®Š
            if (gameState.stress < 10 && gameState.week >= 10) unlockAchievement('stress-management');
            if (gameState.energy > 90 && gameState.week >= 5) unlockAchievement('early-bird');
            if (gameState.energy < 10) unlockAchievement('night-owl');
            if (gameState.totalStudyHours >= 50 && gameState.money >= 500) unlockAchievement('money-maker');

            // æ•…äº‹
            if (gameState.storyProgress >= 5) unlockAchievement('story-5');
        }

        // æ¸¸æˆç»“æŸ
        function endGame() {
            gameState.gameOver = true;

            // è®¡ç®—æœ€ç»ˆæˆç»©
            let totalScore = 0;
            for (const subject in gameState.subjects) {
                totalScore += gameState.subjects[subject];
            }
            totalScore = Math.round(totalScore / 6);

            // è®¡ç®—æœ€ç»ˆè¯„ä»·å’Œç»“å±€
            let result = "";
            let ending = "";
            let endingId = "";
            let endingType = "neutral";

            // å¤šç»´åº¦è¯„ä¼°
            const avgScore = totalScore;
            const stressLevel = gameState.stress;
            const healthLevel = gameState.health;
            const mentalLevel = gameState.mental;
            const relTotal = gameState.relationships.teacher + gameState.relationships.classmates + gameState.relationships.parents + gameState.relationships.crush;
            const money = gameState.money;

            // ç»“å±€åˆ†æ”¯ï¼ˆ25+ç»“å±€ï¼‰
            if (avgScore >= 95 && stressLevel < 30 && mentalLevel > 80) {
                result = "é¡¶å°–å¤§å­¦ + å¿ƒç†å¥åº·";
                ending = "ä½ ä»¥æƒŠäººçš„æˆç»©è€ƒå…¥äº†é¡¶å°–å¤§å­¦ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¿æŒäº†å¿ƒç†å¥åº·å’Œäººé™…å…³ç³»ã€‚è¿™æ®µAFOç»å†è®©ä½ æˆä¸ºäº†ä¸€ä¸ªæ›´å®Œæ•´çš„äººã€‚ä½ ä¸ä»…å­¦ä¼šäº†çŸ¥è¯†ï¼Œæ›´å­¦ä¼šäº†å¦‚ä½•é¢å¯¹äººç”Ÿã€‚";
                endingId = 'ending-1';
                endingType = "good";
            } else if (avgScore >= 90) {
                result = "é¡¶å°–å¤§å­¦";
                ending = "ä½ ä»¥ä¼˜å¼‚çš„æˆç»©è€ƒå…¥äº†ç†æƒ³çš„é¡¶å°–å¤§å­¦ï¼Œå®ç°äº†ä»ç«èµ›ç”Ÿåˆ°æ–‡åŒ–è¯¾å­¦éœ¸çš„åä¸½è½¬èº«ï¼ä½ çš„åŠªåŠ›å’Œæ™ºæ…§å¾—åˆ°äº†æœ€å¥½çš„å›æŠ¥ã€‚è¿™æ®µAFOç»å†è®©ä½ æ›´åŠ æˆç†Ÿï¼Œæœªæ¥å¯æœŸã€‚";
                endingId = 'ending-1';
                endingType = "good";
            } else if (avgScore >= 85 && gameState.relationships.crush >= 60) {
                result = "é‡ç‚¹å¤§å­¦ + çˆ±æƒ…";
                ending = "ä½ å’Œæš—æ‹å¯¹è±¡ä¸€èµ·è€ƒå…¥äº†é‡ç‚¹å¤§å­¦ï¼Œå®ç°äº†å­¦ä¸šå’Œçˆ±æƒ…çš„åŒä¸°æ”¶ã€‚è¿™æ®µAFOæ—…ç¨‹ä¸ä»…è®©ä½ æˆé•¿ï¼Œè¿˜è®©ä½ æ”¶è·äº†çè´µçš„æ„Ÿæƒ…ã€‚";
                endingId = 'ending-hidden-1';
                endingType = "good";
            } else if (avgScore >= 80) {
                result = "é‡ç‚¹å¤§å­¦";
                ending = "ä½ æˆåŠŸè€ƒå…¥äº†é‡ç‚¹å¤§å­¦ï¼Œè¯æ˜äº†è‡ªå·±åœ¨æ–‡åŒ–è¯¾ä¸Šçš„å®åŠ›ã€‚è™½ç„¶è¿‡ç¨‹è‰°è¾›ï¼Œä½†ä½ åšæŒåˆ°äº†æœ€åã€‚è¿™æ®µç»å†è®©ä½ æ˜ç™½ï¼Œäººç”Ÿä¸æ­¢ä¸€æ¡è·¯ï¼Œæ¯æ¡è·¯éƒ½èƒ½é€šå‘æˆåŠŸã€‚";
                endingId = 'ending-2';
                endingType = "good";
            } else if (avgScore >= 75 && gameState.relationships.parents >= 80) {
                result = "ä¸€æœ¬å¤§å­¦ + å®¶åº­å’Œç¦";
                ending = "ä½ è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¸çˆ¶æ¯è¾¾æˆäº†æ·±åˆ»çš„ç†è§£ã€‚è¿™æ®µAFOç»å†è®©ä½ ä»¬çš„å®¶åº­å…³ç³»æ›´åŠ ç´§å¯†ã€‚çˆ¶æ¯ä¸ºä½ éª„å‚²ï¼Œä¸æ˜¯å› ä¸ºæˆç»©ï¼Œè€Œæ˜¯å› ä¸ºä½ çš„æˆé•¿ã€‚";
                endingId = 'ending-hidden-2';
                endingType = "good";
            } else if (avgScore >= 70) {
                result = "ä¸€æœ¬å¤§å­¦";
                ending = "ä½ è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æˆç»©ã€‚è™½ç„¶å¯èƒ½ä¸æ˜¯æœ€ç†æƒ³çš„ç»“æœï¼Œä½†ä½ å·²ç»å°½åŠ›äº†ã€‚AFOè®©ä½ å­¦ä¼šäº†é€‚åº”å’ŒåšæŒï¼Œè¿™æ¯”åˆ†æ•°æ›´é‡è¦ã€‚";
                endingId = 'ending-3';
                endingType = "neutral";
            } else if (avgScore >= 65 && gameState.mental >= 80) {
                result = "äºŒæœ¬å¤§å­¦ + è‡ªæˆ‘æ•‘èµ";
                ending = "è™½ç„¶æˆç»©åªå¤ŸäºŒæœ¬ï¼Œä½†ä½ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å®Œæˆäº†è‡ªæˆ‘æ•‘èµã€‚ä½ æ‰¾åˆ°äº†è‡ªå·±çš„ä»·å€¼ï¼Œä¸å†è¢«ç«èµ›çš„å…‰ç¯æˆ–å¤±è´¥çš„é˜´å½±æŸç¼šã€‚ä½ å­¦ä¼šäº†æ¥çº³è‡ªå·±ï¼Œè¿™æ‰æ˜¯æœ€å¤§çš„æˆåŠŸã€‚";
                endingId = 'ending-hidden-3';
                endingType = "neutral";
            } else if (avgScore >= 60) {
                result = "äºŒæœ¬å¤§å­¦";
                ending = "ä½ è€ƒä¸Šäº†äºŒæœ¬å¤§å­¦ã€‚è¿™ä¸ªç»“æœæé†’ä½ ï¼Œæ–‡åŒ–è¯¾å­¦ä¹ éœ€è¦æŒç»­çš„åŠªåŠ›ï¼Œä½†è‡³å°‘ä½ è¿ˆè¿‡äº†é«˜è€ƒè¿™é“åã€‚æœªæ¥è¿˜æœ‰æ— é™å¯èƒ½ï¼Œè€ƒç ”ã€å·¥ä½œéƒ½æ˜¯æ–°çš„èµ·ç‚¹ã€‚";
                endingId = 'ending-4';
                endingType = "neutral";
            } else {
                // ç‰¹æ®Šç»“å±€åˆ†æ”¯
                if (gameState.relationships.crush >= 60 && gameState.relationships.classmateA >= 80) {
                    result = "çˆ±æƒ…ä¸å‹æƒ…";
                    ending = "è™½ç„¶é«˜è€ƒæˆç»©ä¸ç†æƒ³ï¼Œä½†ä½ æ”¶è·äº†çè´µçš„å‹æƒ…å’Œçˆ±æƒ…ã€‚ä½ å†³å®šå’ŒTAä¸€èµ·å¤è¯»ï¼Œæˆ–è€…é€‰æ‹©ä¸€æ‰€èƒ½åœ¨ä¸€èµ·çš„å¤§å­¦ã€‚äººç”Ÿä¸æ­¢è€ƒè¯•ï¼Œè¿˜æœ‰é™ªä¼´ã€‚";
                    endingId = 'ending-12';
                    endingType = "neutral";
                } else if (gameState.memoryCount >= 5 && gameState.subjects.math >= 70) {
                    result = "ç«èµ›å›å½’";
                    ending = "é«˜è€ƒå¤±åˆ©åï¼Œä½ é‡æ–°å›åˆ°äº†ä¿¡æ¯å­¦çš„ä¸–ç•Œã€‚è¿™ä¸€æ¬¡ï¼Œä½ å¸¦ç€æ–‡åŒ–è¯¾çš„æ²‰æ·€å’Œæ›´æˆç†Ÿçš„å¿ƒæ€ï¼Œæˆ–è®¸èƒ½åœ¨ç«èµ›è·¯ä¸Šèµ°å¾—æ›´è¿œã€‚æœ‰äº›çƒ­çˆ±ï¼Œä»æœªç†„ç­ã€‚";
                    endingId = 'ending-6';
                    endingType = "neutral";
                } else if (gameState.relationships.parents < 30) {
                    result = "ç‹¬ç«‹ä¹‹è·¯";
                    ending = "ä¸çˆ¶æ¯çš„æœŸæœ›èƒŒé“è€Œé©°ï¼Œä½ é€‰æ‹©äº†ä¸€æ¡æ›´è‡ªç”±çš„è·¯ã€‚ä¹Ÿè®¸æ˜¯åˆ›ä¸šï¼Œä¹Ÿè®¸æ˜¯æ‰“å·¥ï¼Œä½ å†³å®šç”¨è‡ªå·±çš„æ–¹å¼è¯æ˜ä»·å€¼ã€‚è¿™éœ€è¦å‹‡æ°”ï¼Œä½†ä½ å‡†å¤‡å¥½äº†ã€‚";
                    endingId = 'ending-7';
                    endingType = "neutral";
                } else if (gameState.totalActivities >= 15) {
                    result = "è‰ºæœ¯ç‰¹é•¿";
                    ending = "ä½ åœ¨å„ç§æ´»åŠ¨ä¸­å‘ç°äº†è‡ªå·±åœ¨è‰ºæœ¯æ–¹é¢çš„å¤©èµ‹ï¼Œå†³å®šèµ°è‰ºæœ¯ç‰¹é•¿ç”Ÿçš„é“è·¯ã€‚è™½ç„¶ä¸æ˜¯ä¼ ç»Ÿçš„æˆåŠŸï¼Œä½†ä½ æ‰¾åˆ°äº†è‡ªå·±çš„çƒ­çˆ±ã€‚";
                    endingId = 'ending-8';
                    endingType = "neutral";
                } else if (gameState.health >= 90 && gameState.totalExerciseHours >= 20) {
                    result = "ä½“è‚²ç‰¹æ‹›";
                    ending = "ä½ çš„èº«ä½“ç´ è´¨éå¸¸å‡ºè‰²ï¼Œè¢«ä½“è‚²é™¢æ ¡ç‰¹æ‹›ã€‚è™½ç„¶æ”¾å¼ƒäº†æ–‡åŒ–è¯¾ï¼Œä½†ä½ åœ¨å¦ä¸€ä¸ªé¢†åŸŸæ‰¾åˆ°äº†è‡ªå·±çš„ä»·å€¼ã€‚";
                    endingId = 'ending-9';
                    endingType = "neutral";
                } else if (gameState.money >= 1000) {
                    result = "å‡ºå›½æ·±é€ ";
                    ending = "ä½ æ”’å¤Ÿäº†é’±ï¼Œå†³å®šå‡ºå›½ç•™å­¦ã€‚æ¢ä¸ªç¯å¢ƒï¼Œé‡æ–°å¼€å§‹ã€‚ä¹Ÿè®¸å›½å¤–çš„æ•™è‚²æ›´é€‚åˆä½ ï¼Œä¹Ÿè®¸è¿™åªæ˜¯é€ƒé¿ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œä½ é€‰æ‹©äº†æ–°çš„é“è·¯ã€‚";
                    endingId = 'ending-10';
                    endingType = "neutral";
                } else if (gameState.stress > 80) {
                    result = "é—´éš”å¹´";
                    ending = "ä½ å†³å®šç»™è‡ªå·±ä¸€ä¸ªé—´éš”å¹´ï¼Œä¸å‚åŠ é«˜è€ƒï¼Œå»æ—…è¡Œã€å»æ€è€ƒã€å»å¯»æ‰¾è‡ªå·±çœŸæ­£æƒ³è¦çš„ã€‚è¿™ä¸æ˜¯å¤±è´¥ï¼Œè€Œæ˜¯ä¸ºäº†æ›´å¥½çš„å‡ºå‘ã€‚";
                    endingId = 'ending-11';
                    endingType = "neutral";
                } else {
                    result = "æœªèƒ½å¦‚æ„¿";
                    ending = "é«˜è€ƒæˆç»©ä¸ç†æƒ³ï¼Œä½ æœªèƒ½è¾¾åˆ°é¢„æœŸçš„ç›®æ ‡ã€‚ä½†è¿™ä¸ä»£è¡¨å¤±è´¥ï¼ŒAFOåªæ˜¯äººç”Ÿçš„ä¸€ä¸ªé˜¶æ®µã€‚æœªæ¥çš„è·¯è¿˜å¾ˆé•¿ï¼Œé‡è¦çš„æ˜¯ä½ å­¦ä¼šäº†é¢å¯¹æŒ«æŠ˜ã€‚";
                    endingId = 'ending-5';
                    endingType = "bad";
                }
            }

            // è§£é”ç»“å±€æˆå°±
            unlockAchievement(endingId);

            // æ˜¾ç¤ºç»“æŸç”»é¢
            const mainDiv = document.querySelector('.main');
            mainDiv.innerHTML = `
<div class="end-screen">
<h2>ğŸ“ é«˜è€ƒç»“æŸ</h2>
<div class="final-score">${totalScore}åˆ†</div>
<p>æœ€ç»ˆå¹³å‡èƒ½åŠ›å€¼</p>
<h3>ç»“æœï¼š${result}</h3>
<div class="ending-text">${ending}</div>
<div class="stats-summary">
<div class="stat-box">
<div class="label">æ€»å­¦ä¹ æ—¶é•¿</div>
<div class="value">${gameState.totalStudyHours}h</div>
</div>
<div class="stat-box">
<div class="label">æ€»ä¼‘æ¯æ—¶é•¿</div>
<div class="value">${gameState.totalRestHours}h</div>
</div>
<div class="stat-box">
<div class="label">å‚åŠ æ¨¡è€ƒ</div>
<div class="value">${gameState.examCount}æ¬¡</div>
</div>
<div class="stat-box">
<div class="label">å®Œæˆä½œä¸š</div>
<div class="value">${Object.values(gameState.homework).filter(v => v).length}æ¬¡</div>
</div>
<div class="stat-box">
<div class="label">å‚åŠ æ´»åŠ¨</div>
<div class="value">${gameState.totalActivities}æ¬¡</div>
</div>
<div class="stat-box">
<div class="label">å›å¿†å¾€äº‹</div>
<div class="value">${gameState.memoryCount}æ¬¡</div>
</div>
</div>
<p style="margin-top: 20px; font-size: 0.9rem; opacity: 0.7;">
ä½ çš„é«˜ä¸­ç”Ÿæ¶¯ç”»ä¸Šäº†å¥å·ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œè¿™æ®µæ—…ç¨‹éƒ½å°†æˆä¸ºä½ äººç”Ÿä¸­å®è´µçš„ç»å†ã€‚<br>
æ„Ÿè°¢æ¸¸ç©ï¼æœ¬æ¸¸æˆé‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/legalcode.zh-Hans"
target="_blank" style="color: rgb(196, 196, 196)">CC BY-NC-ND 4.0</a>åè®®ï¼Œä½œè€…ï¼šwujiahaocoder
</p>
<button class="restart-btn" onclick="location.reload()">ğŸ”„ é‡æ–°å¼€å§‹</button>
</div>`;

            // éšè—æ“ä½œæŒ‰é’®å’Œè®¡æ•°å™¨
            document.querySelector('.actions').style.display = 'none';
            document.getElementById('actionCounter').style.display = 'none';

            showNotification(`é«˜è€ƒç»“æŸï¼${result}`, endingType);
        }

        // ==================== æ¨¡æ€æ¡†æ§åˆ¶ ====================

        function openModal(modalId) {
            // æ£€æŸ¥æ“ä½œé™åˆ¶ï¼ˆæ•…äº‹æ¨¡æ€æ¡†é™¤å¤–ï¼‰
            if (modalId !== 'story-modal' && modalId !== 'goal-modal' && modalId !== 'achievement-modal' && !checkActionLimit()) {
                return;
            }

            // ç‰¹æ®Šå¤„ç†
            if (modalId === 'homework-modal') {
                updateHomeworkList();
            } else if (modalId === 'economy-modal') {
                elements.currentMoney.textContent = gameState.money;
            }

            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // æ›´æ–°ä½œä¸šåˆ—è¡¨
        function updateHomeworkList() {
            const homeworkList = Object.entries(gameState.homework).filter(([sub, done]) => !done);
            const listDiv = elements.homeworkList;

            if (homeworkList.length === 0) {
                listDiv.innerHTML = '<div style="opacity:0.6;">æœ¬å‘¨ä½œä¸šå·²å®Œæˆï¼</div>';
                return;
            }

            listDiv.innerHTML = '<div style="margin-bottom:10px;font-weight:bold;">æœªå®Œæˆä½œä¸šï¼š</div>';
            homeworkList.forEach(([subject, _]) => {
                const name = { chinese: 'è¯­æ–‡', math: 'æ•°å­¦', english: 'è‹±è¯­', physics: 'ç‰©ç†', chemistry: 'åŒ–å­¦', biology: 'ç”Ÿç‰©' }[subject];
                const div = document.createElement('div');
                div.style.padding = '4px 0';
                div.textContent = `â€¢ ${name}`;
                listDiv.appendChild(div);
            });
        }

        // ==================== äº‹ä»¶ç›‘å¬å™¨ ====================

        // æŒ‰é’®äº‹ä»¶ï¼ˆæ·»åŠ é˜²æŠ–ï¼‰
        let buttonCooldown = false;

        function handleButtonClick(action) {
            if (buttonCooldown) return;
            buttonCooldown = true;

            // æ‰§è¡ŒåŠ¨ä½œ
            action();

            // 1ç§’åè§£é™¤å†·å´
            setTimeout(() => {
                buttonCooldown = false;
            }, 1000);
        }

        document.getElementById('study-btn').addEventListener('click', () => handleButtonClick(() => openModal('study-modal')));
        document.getElementById('rest-btn').addEventListener('click', () => handleButtonClick(() => openModal('rest-modal')));
        document.getElementById('exercise-btn').addEventListener('click', () => handleButtonClick(exercise));
        document.getElementById('social-btn').addEventListener('click', () => handleButtonClick(social));
        document.getElementById('memory-btn').addEventListener('click', () => handleButtonClick(memory));
        document.getElementById('exam-btn').addEventListener('click', () => handleButtonClick(takeExam));
        document.getElementById('homework-btn').addEventListener('click', () => handleButtonClick(() => openModal('homework-modal')));
        document.getElementById('activity-btn').addEventListener('click', () => handleButtonClick(() => openModal('activity-modal')));
        document.getElementById('economy-btn').addEventListener('click', () => handleButtonClick(() => openModal('economy-modal')));
        document.getElementById('end-btn').addEventListener('click', () => handleButtonClick(endWeek));

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (gameState.gameOver) return;

            // Shifté”®æ˜¾ç¤ºæç¤º
            if (e.key === 'Shift') {
                elements.hotkeyHint.classList.add('show');
                return;
            }

            // å¿«æ·é”®ï¼ˆæ·»åŠ é˜²æŠ–ï¼‰
            if (buttonCooldown) return;
            buttonCooldown = true;

            switch (e.key) {
                case '1': openModal('study-modal'); break;
                case '2': openModal('rest-modal'); break;
                case '3': exercise(); break;
                case '4': social(); break;
                case '5': memory(); break;
                case '6': takeExam(); break;
                case '7': openModal('homework-modal'); break;
                case '8': openModal('activity-modal'); break;
                case '9': openModal('economy-modal'); break;
                case '0': endWeek(); break;
                case 'Escape':
                    document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
                    break;
            }

            setTimeout(() => {
                buttonCooldown = false;
            }, 1000);
        });

        // Shifté”®é‡Šæ”¾éšè—æç¤º
        document.addEventListener('keyup', (e) => {
            if (e.key === 'Shift') {
                elements.hotkeyHint.classList.remove('show');
            }
        });

        // å¯åŠ¨æ¸¸æˆ
        window.onload = initGame;
    </script>
</body>

</html>